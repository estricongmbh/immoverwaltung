(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function FT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pd={exports:{}},dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function GT(){if(f_)return dl;f_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:u}}return dl.Fragment=e,dl.jsx=n,dl.jsxs=n,dl}var d_;function KT(){return d_||(d_=1,pd.exports=GT()),pd.exports}var R=KT(),yd={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function QT(){if(m_)return $e;m_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.iterator;function k(D){return D===null||typeof D!="object"?null:(D=N&&D[N]||D["@@iterator"],typeof D=="function"?D:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,fe={};function re(D,U,X){this.props=D,this.context=U,this.refs=fe,this.updater=X||Q}re.prototype.isReactComponent={},re.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},re.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Re(){}Re.prototype=re.prototype;function Ne(D,U,X){this.props=D,this.context=U,this.refs=fe,this.updater=X||Q}var _e=Ne.prototype=new Re;_e.constructor=Ne,te(_e,re.prototype),_e.isPureReactComponent=!0;var Fe=Array.isArray,Ie={H:null,A:null,T:null,S:null,V:null},Ce=Object.prototype.hasOwnProperty;function M(D,U,X,B,ce,me){return X=me.ref,{$$typeof:r,type:D,key:U,ref:X!==void 0?X:null,props:me}}function E(D,U){return M(D.type,U,void 0,void 0,void 0,D.props)}function T(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function I(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(X){return U[X]})}var C=/\/+/g;function x(D,U){return typeof D=="object"&&D!==null&&D.key!=null?I(""+D.key):U.toString(36)}function b(){}function $(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(b,b):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function pe(D,U,X,B,ce){var me=typeof D;(me==="undefined"||me==="boolean")&&(D=null);var K=!1;if(D===null)K=!0;else switch(me){case"bigint":case"string":case"number":K=!0;break;case"object":switch(D.$$typeof){case r:case e:K=!0;break;case A:return K=D._init,pe(K(D._payload),U,X,B,ce)}}if(K)return ce=ce(D),K=B===""?"."+x(D,0):B,Fe(ce)?(X="",K!=null&&(X=K.replace(C,"$&/")+"/"),pe(ce,U,X,"",function(ae){return ae})):ce!=null&&(T(ce)&&(ce=E(ce,X+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(C,"$&/")+"/")+K)),U.push(ce)),1;K=0;var se=B===""?".":B+":";if(Fe(D))for(var J=0;J<D.length;J++)B=D[J],me=se+x(B,J),K+=pe(B,U,X,me,ce);else if(J=k(D),typeof J=="function")for(D=J.call(D),J=0;!(B=D.next()).done;)B=B.value,me=se+x(B,J++),K+=pe(B,U,X,me,ce);else if(me==="object"){if(typeof D.then=="function")return pe($(D),U,X,B,ce);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return K}function V(D,U,X){if(D==null)return D;var B=[],ce=0;return pe(D,B,"","",function(me){return U.call(X,me,ce++)}),B}function W(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(X){(D._status===0||D._status===-1)&&(D._status=1,D._result=X)},function(X){(D._status===0||D._status===-1)&&(D._status=2,D._result=X)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Z(){}return $e.Children={map:V,forEach:function(D,U,X){V(D,function(){U.apply(this,arguments)},X)},count:function(D){var U=0;return V(D,function(){U++}),U},toArray:function(D){return V(D,function(U){return U})||[]},only:function(D){if(!T(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},$e.Component=re,$e.Fragment=n,$e.Profiler=l,$e.PureComponent=Ne,$e.StrictMode=s,$e.Suspense=y,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ie,$e.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Ie.H.useMemoCache(D)}},$e.cache=function(D){return function(){return D.apply(null,arguments)}},$e.cloneElement=function(D,U,X){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var B=te({},D.props),ce=D.key,me=void 0;if(U!=null)for(K in U.ref!==void 0&&(me=void 0),U.key!==void 0&&(ce=""+U.key),U)!Ce.call(U,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&U.ref===void 0||(B[K]=U[K]);var K=arguments.length-2;if(K===1)B.children=X;else if(1<K){for(var se=Array(K),J=0;J<K;J++)se[J]=arguments[J+2];B.children=se}return M(D.type,ce,void 0,void 0,me,B)},$e.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},$e.createElement=function(D,U,X){var B,ce={},me=null;if(U!=null)for(B in U.key!==void 0&&(me=""+U.key),U)Ce.call(U,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(ce[B]=U[B]);var K=arguments.length-2;if(K===1)ce.children=X;else if(1<K){for(var se=Array(K),J=0;J<K;J++)se[J]=arguments[J+2];ce.children=se}if(D&&D.defaultProps)for(B in K=D.defaultProps,K)ce[B]===void 0&&(ce[B]=K[B]);return M(D,me,void 0,void 0,null,ce)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(D){return{$$typeof:g,render:D}},$e.isValidElement=T,$e.lazy=function(D){return{$$typeof:A,_payload:{_status:-1,_result:D},_init:W}},$e.memo=function(D,U){return{$$typeof:p,type:D,compare:U===void 0?null:U}},$e.startTransition=function(D){var U=Ie.T,X={};Ie.T=X;try{var B=D(),ce=Ie.S;ce!==null&&ce(X,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Z,z)}catch(me){z(me)}finally{Ie.T=U}},$e.unstable_useCacheRefresh=function(){return Ie.H.useCacheRefresh()},$e.use=function(D){return Ie.H.use(D)},$e.useActionState=function(D,U,X){return Ie.H.useActionState(D,U,X)},$e.useCallback=function(D,U){return Ie.H.useCallback(D,U)},$e.useContext=function(D){return Ie.H.useContext(D)},$e.useDebugValue=function(){},$e.useDeferredValue=function(D,U){return Ie.H.useDeferredValue(D,U)},$e.useEffect=function(D,U,X){var B=Ie.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(D,U)},$e.useId=function(){return Ie.H.useId()},$e.useImperativeHandle=function(D,U,X){return Ie.H.useImperativeHandle(D,U,X)},$e.useInsertionEffect=function(D,U){return Ie.H.useInsertionEffect(D,U)},$e.useLayoutEffect=function(D,U){return Ie.H.useLayoutEffect(D,U)},$e.useMemo=function(D,U){return Ie.H.useMemo(D,U)},$e.useOptimistic=function(D,U){return Ie.H.useOptimistic(D,U)},$e.useReducer=function(D,U,X){return Ie.H.useReducer(D,U,X)},$e.useRef=function(D){return Ie.H.useRef(D)},$e.useState=function(D){return Ie.H.useState(D)},$e.useSyncExternalStore=function(D,U,X){return Ie.H.useSyncExternalStore(D,U,X)},$e.useTransition=function(){return Ie.H.useTransition()},$e.version="19.1.0",$e}var g_;function am(){return g_||(g_=1,yd.exports=QT()),yd.exports}var Xe=am(),_d={exports:{}},ml={},vd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function YT(){return p_||(p_=1,function(r){function e(V,W){var z=V.length;V.push(W);e:for(;0<z;){var Z=z-1>>>1,D=V[Z];if(0<l(D,W))V[Z]=W,V[z]=D,z=Z;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var W=V[0],z=V.pop();if(z!==W){V[0]=z;e:for(var Z=0,D=V.length,U=D>>>1;Z<U;){var X=2*(Z+1)-1,B=V[X],ce=X+1,me=V[ce];if(0>l(B,z))ce<D&&0>l(me,B)?(V[Z]=me,V[ce]=z,Z=ce):(V[Z]=B,V[X]=z,Z=X);else if(ce<D&&0>l(me,z))V[Z]=me,V[ce]=z,Z=ce;else break e}}return W}function l(V,W){var z=V.sortIndex-W.sortIndex;return z!==0?z:V.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();r.unstable_now=function(){return f.now()-g}}var y=[],p=[],A=1,N=null,k=3,Q=!1,te=!1,fe=!1,re=!1,Re=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function Fe(V){for(var W=n(p);W!==null;){if(W.callback===null)s(p);else if(W.startTime<=V)s(p),W.sortIndex=W.expirationTime,e(y,W);else break;W=n(p)}}function Ie(V){if(fe=!1,Fe(V),!te)if(n(y)!==null)te=!0,Ce||(Ce=!0,x());else{var W=n(p);W!==null&&pe(Ie,W.startTime-V)}}var Ce=!1,M=-1,E=5,T=-1;function I(){return re?!0:!(r.unstable_now()-T<E)}function C(){if(re=!1,Ce){var V=r.unstable_now();T=V;var W=!0;try{e:{te=!1,fe&&(fe=!1,Ne(M),M=-1),Q=!0;var z=k;try{t:{for(Fe(V),N=n(y);N!==null&&!(N.expirationTime>V&&I());){var Z=N.callback;if(typeof Z=="function"){N.callback=null,k=N.priorityLevel;var D=Z(N.expirationTime<=V);if(V=r.unstable_now(),typeof D=="function"){N.callback=D,Fe(V),W=!0;break t}N===n(y)&&s(y),Fe(V)}else s(y);N=n(y)}if(N!==null)W=!0;else{var U=n(p);U!==null&&pe(Ie,U.startTime-V),W=!1}}break e}finally{N=null,k=z,Q=!1}W=void 0}}finally{W?x():Ce=!1}}}var x;if(typeof _e=="function")x=function(){_e(C)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,$=b.port2;b.port1.onmessage=C,x=function(){$.postMessage(null)}}else x=function(){Re(C,0)};function pe(V,W){M=Re(function(){V(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_next=function(V){switch(k){case 1:case 2:case 3:var W=3;break;default:W=k}var z=k;k=W;try{return V()}finally{k=z}},r.unstable_requestPaint=function(){re=!0},r.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=k;k=V;try{return W()}finally{k=z}},r.unstable_scheduleCallback=function(V,W,z){var Z=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=z+D,V={id:A++,callback:W,priorityLevel:V,startTime:z,expirationTime:D,sortIndex:-1},z>Z?(V.sortIndex=z,e(p,V),n(y)===null&&V===n(p)&&(fe?(Ne(M),M=-1):fe=!0,pe(Ie,z-Z))):(V.sortIndex=D,e(y,V),te||Q||(te=!0,Ce||(Ce=!0,x()))),V},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(V){var W=k;return function(){var z=k;k=W;try{return V.apply(this,arguments)}finally{k=z}}}}(Ed)),Ed}var y_;function $T(){return y_||(y_=1,vd.exports=YT()),vd.exports}var bd={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function XT(){if(__)return Tn;__=1;var r=am();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)p+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,p,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:N==null?null:""+N,children:y,containerInfo:p,implementation:A}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tn.createPortal=function(y,p){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,A)},Tn.flushSync=function(y){var p=f.T,A=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=p,s.p=A,s.d.f()}},Tn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},Tn.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Tn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var A=p.as,N=g(A,p.crossOrigin),k=typeof p.integrity=="string"?p.integrity:void 0,Q=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;A==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:N,integrity:k,fetchPriority:Q}):A==="script"&&s.d.X(y,{crossOrigin:N,integrity:k,fetchPriority:Q,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Tn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var A=g(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},Tn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var A=p.as,N=g(A,p.crossOrigin);s.d.L(y,A,{crossOrigin:N,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Tn.preloadModule=function(y,p){if(typeof y=="string")if(p){var A=g(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},Tn.requestFormReset=function(y){s.d.r(y)},Tn.unstable_batchedUpdates=function(y,p){return y(p)},Tn.useFormState=function(y,p,A){return f.H.useFormState(y,p,A)},Tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Tn.version="19.1.0",Tn}var v_;function ZT(){if(v_)return bd.exports;v_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bd.exports=XT(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function WT(){if(E_)return ml;E_=1;var r=$T(),e=am(),n=ZT();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===o)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,o=d;break}if(S===o){v=!0,o=h,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,o=h;break}if(S===o){v=!0,o=d,a=h;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),Ne=Symbol.for("react.consumer"),_e=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function x(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var b=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===b?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case te:return"Fragment";case re:return"Profiler";case fe:return"StrictMode";case Ie:return"Suspense";case Ce:return"SuspenseList";case T:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case _e:return(t.displayName||"Context")+".Provider";case Ne:return(t._context.displayName||"Context")+".Consumer";case Fe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:$(t.type)||"Memo";case E:i=t._payload,t=t._init;try{return $(t(i))}catch{}}return null}var pe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},Z=[],D=-1;function U(t){return{current:t}}function X(t){0>D||(t.current=Z[D],Z[D]=null,D--)}function B(t,i){D++,Z[D]=t.current,t.current=i}var ce=U(null),me=U(null),K=U(null),se=U(null);function J(t,i){switch(B(K,i),B(me,t),B(ce,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?jy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=jy(i),t=By(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(ce),B(ce,t)}function ae(){X(ce),X(me),X(K)}function Se(t){t.memoizedState!==null&&B(se,t);var i=ce.current,a=By(i,t.type);i!==a&&(B(me,t),B(ce,a))}function he(t){me.current===t&&(X(ce),X(me)),se.current===t&&(X(se),ll._currentValue=z)}var ge=Object.prototype.hasOwnProperty,xe=r.unstable_scheduleCallback,ue=r.unstable_cancelCallback,be=r.unstable_shouldYield,ye=r.unstable_requestPaint,De=r.unstable_now,ze=r.unstable_getCurrentPriorityLevel,je=r.unstable_ImmediatePriority,Je=r.unstable_UserBlockingPriority,ft=r.unstable_NormalPriority,Et=r.unstable_LowPriority,Ve=r.unstable_IdlePriority,Pe=r.log,ke=r.unstable_setDisableYieldValue,ve=null,Ee=null;function dt(t){if(typeof Pe=="function"&&ke(t),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(ve,t)}catch{}}var bt=Math.clz32?Math.clz32:Ke,He=Math.log,ct=Math.LN2;function Ke(t){return t>>>=0,t===0?32:31-(He(t)/ct|0)|0}var Ct=256,xt=4194304;function tt(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function tn(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~d,o!==0?h=tt(o):(v&=S,v!==0?h=tt(v):a||(a=S&~t,a!==0&&(h=tt(a))))):(S=o&~d,S!==0?h=tt(S):v!==0?h=tt(v):a||(a=o&~t,a!==0&&(h=tt(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function nn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Un(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(){var t=Ct;return Ct<<=1,(Ct&4194048)===0&&(Ct=256),t}function ui(){var t=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),t}function In(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Nn(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ci(t,i,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,O=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var ee=31-bt(a),ie=1<<ee;S[ee]=0,O[ee]=-1;var F=q[ee];if(F!==null)for(q[ee]=null,ee=0;ee<F.length;ee++){var G=F[ee];G!==null&&(G.lane&=-536870913)}a&=~ie}o!==0&&En(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function En(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-bt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function hi(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-bt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function Ft(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fi(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:a_(t.type))}function ds(t,i){var a=W.p;try{return W.p=t,i()}finally{W.p=a}}var Rt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Rt,kt="__reactProps$"+Rt,Cn="__reactContainer$"+Rt,Tr="__reactEvents$"+Rt,ea="__reactListeners$"+Rt,di="__reactHandles$"+Rt,Kl="__reactResources$"+Rt,ms="__reactMarker$"+Rt;function Sr(t){delete t[Pt],delete t[kt],delete t[Tr],delete t[ea],delete t[di]}function Gi(t){var i=t[Pt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Cn]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Gy(t);t!==null;){if(a=t[Pt])return a;t=Gy(t)}return i}t=a,a=t.parentNode}return null}function Si(t){if(t=t[Pt]||t[Cn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Ai(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Dn(t){var i=t[Kl];return i||(i=t[Kl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(t){t[ms]=!0}var mo=new Set,ta={};function mi(t,i){Ki(t,i),Ki(t+"Capture",i)}function Ki(t,i){for(ta[t]=i,t=0;t<i.length;t++)mo.add(i[t])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yl={},gs={};function $l(t){return ge.call(gs,t)?!0:ge.call(Yl,t)?!1:Ql.test(t)?gs[t]=!0:(Yl[t]=!0,!1)}function Ar(t,i,a){if($l(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function wi(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function fn(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var ps,Xl;function Qi(t){if(ps===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ps=i&&i[1]||"",Xl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ps+t+Xl}var na=!1;function ia(t,i){if(!t||na)return"";na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(G){var F=G}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(G){F=G}t.call(ie.prototype)}}else{try{throw Error()}catch(G){F=G}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var O=v.split(`
`),q=S.split(`
`);for(h=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(o===O.length||h===q.length)for(o=O.length-1,h=q.length-1;1<=o&&0<=h&&O[o]!==q[h];)h--;for(;1<=o&&0<=h;o--,h--)if(O[o]!==q[h]){if(o!==1||h!==1)do if(o--,h--,0>h||O[o]!==q[h]){var ee=`
`+O[o].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=o&&0<=h);break}}}finally{na=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Qi(a):""}function go(t){switch(t.tag){case 26:case 27:case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return ia(t.type,!1);case 11:return ia(t.type.render,!1);case 1:return ia(t.type,!0);case 31:return Qi("Activity");default:return""}}function ra(t){try{var i="";do i+=go(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function xn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function po(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vh(t){var i=po(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function sa(t){t._valueTracker||(t._valueTracker=vh(t))}function yo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=po(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Eh=/[\n"\\]/g;function Gt(t){return t.replace(Eh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function jn(t,i,a,o,h,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+xn(i)):t.value!==""+xn(i)&&(t.value=""+xn(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?wr(t,v,xn(i)):a!=null?wr(t,v,xn(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+xn(S):t.removeAttribute("name")}function _s(t,i,a,o,h,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+xn(a):"",i=i!=null?""+xn(i):a,S||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function wr(t,i,a){i==="number"&&ys(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+xn(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Tt(t,i,a){if(i!=null&&(i=""+xn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+xn(a):""}function vs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(pe(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=xn(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function $n(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Es=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Es.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function _o(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Zl(t,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Zl(t,d,i[d])}function vo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Th=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aa(t){return Th.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var $i=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,Zi=null;function Eo(t){var i=Si(t);if(i&&(t=i.stateNode)){var a=t[kt]||null;e:switch(t=i.stateNode,i.type){case"input":if(jn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[kt]||null;if(!h)throw Error(s(90));jn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&yo(o)}break e;case"textarea":Tt(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Yi(t,!!a.multiple,i,!1)}}}var Ri=!1;function Wl(t,i,a){if(Ri)return t(i,a);Ri=!0;try{var o=t(i);return o}finally{if(Ri=!1,(Xi!==null||Zi!==null)&&(Gu(),Xi&&(i=Xi,t=Zi,Zi=Xi=null,Eo(i),t)))for(i=0;i<t.length;i++)Eo(t[i])}}function bs(t,i){var a=t.stateNode;if(a===null)return null;var o=a[kt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(gi)try{var Ts={};Object.defineProperty(Ts,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",Ts,Ts),window.removeEventListener("test",Ts,Ts)}catch{Zn=!1}var Ii=null,Rr=null,Wi=null;function bo(){if(Wi)return Wi;var t,i=Rr,a=i.length,o,h="value"in Ii?Ii.value:Ii.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return Wi=h.slice(t,1<o?1-o:void 0)}function Ni(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function To(){return!1}function rn(t){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ci:To,this.isPropagationStopped=To,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),i}var gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=rn(gt),Ss=A({},gt,{view:0,detail:0}),Jl=rn(Ss),la,ua,Di,As=A({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(la=t.screenX-Di.screenX,ua=t.screenY-Di.screenY):ua=la=0,Di=t),la)},movementY:function(t){return"movementY"in t?t.movementY:ua}}),Wn=rn(As),eu=A({},As,{dataTransfer:0}),Sh=rn(eu),ws=A({},Ss,{relatedTarget:0}),ca=rn(ws),So=A({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),ha=rn(So),tu=A({},gt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fa=rn(tu),Ah=A({},gt,{data:0}),Ao=rn(Ah),Rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=iu[t])?!!i[t]:!1}function Is(){return wo}var ru=A({},Ss,{key:function(t){if(t.key){var i=Rs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),da=rn(ru),su=A({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ro=rn(su),Ji=A({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),au=rn(Ji),ou=A({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),lu=rn(ou),uu=A({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ma=rn(uu),On=A({},gt,{newState:0,oldState:0}),cu=rn(On),hu=[9,13,27,32],xi=gi&&"CompositionEvent"in window,c=null;gi&&"documentMode"in document&&(c=document.documentMode);var m=gi&&"TextEvent"in window&&!c,_=gi&&(!xi||c&&8<c&&11>=c),w=" ",j=!1;function Y(t,i){switch(t){case"keyup":return hu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var at=!1;function Xt(t,i){switch(t){case"compositionend":return de(i);case"keypress":return i.which!==32?null:(j=!0,w);case"textInput":return t=i.data,t===w&&j?null:t;default:return null}}function ot(t,i){if(at)return t==="compositionend"||!xi&&Y(t,i)?(t=bo(),Wi=Rr=Ii=null,at=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var sn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!sn[t.type]:i==="textarea"}function er(t,i,a,o){Xi?Zi?Zi.push(o):Zi=[o]:Xi=o,i=Zu(i,"onChange"),0<i.length&&(a=new oa("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var dn=null,Oi=null;function Io(t){Vy(t,0)}function fu(t){var i=Ai(t);if(yo(i))return t}function ng(t,i){if(t==="change")return i}var ig=!1;if(gi){var wh;if(gi){var Rh="oninput"in document;if(!Rh){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),Rh=typeof rg.oninput=="function"}wh=Rh}else wh=!1;ig=wh&&(!document.documentMode||9<document.documentMode)}function sg(){dn&&(dn.detachEvent("onpropertychange",ag),Oi=dn=null)}function ag(t){if(t.propertyName==="value"&&fu(Oi)){var i=[];er(i,Oi,t,Xn(t)),Wl(Io,i)}}function Eb(t,i,a){t==="focusin"?(sg(),dn=i,Oi=a,dn.attachEvent("onpropertychange",ag)):t==="focusout"&&sg()}function bb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(Oi)}function Tb(t,i){if(t==="click")return fu(i)}function Sb(t,i){if(t==="input"||t==="change")return fu(i)}function Ab(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Bn=typeof Object.is=="function"?Object.is:Ab;function No(t,i){if(Bn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ge.call(i,h)||!Bn(t[h],i[h]))return!1}return!0}function og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lg(t,i){var a=og(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=og(a)}}function ug(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ug(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function cg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ys(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ys(t.document)}return i}function Ih(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var wb=gi&&"documentMode"in document&&11>=document.documentMode,ga=null,Nh=null,Co=null,Ch=!1;function hg(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ch||ga==null||ga!==ys(o)||(o=ga,"selectionStart"in o&&Ih(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Co&&No(Co,o)||(Co=o,o=Zu(Nh,"onSelect"),0<o.length&&(i=new oa("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ga)))}function Ns(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var pa={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},Dh={},fg={};gi&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Cs(t){if(Dh[t])return Dh[t];if(!pa[t])return t;var i=pa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in fg)return Dh[t]=i[a];return t}var dg=Cs("animationend"),mg=Cs("animationiteration"),gg=Cs("animationstart"),Rb=Cs("transitionrun"),Ib=Cs("transitionstart"),Nb=Cs("transitioncancel"),pg=Cs("transitionend"),yg=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function pi(t,i){yg.set(t,i),mi(i,[t])}var _g=new WeakMap;function Jn(t,i){if(typeof t=="object"&&t!==null){var a=_g.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ra(i)},_g.set(t,i),i)}return{value:t,source:i,stack:ra(i)}}var ei=[],ya=0,Oh=0;function du(){for(var t=ya,i=Oh=ya=0;i<t;){var a=ei[i];ei[i++]=null;var o=ei[i];ei[i++]=null;var h=ei[i];ei[i++]=null;var d=ei[i];if(ei[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&vg(a,h,d)}}function mu(t,i,a,o){ei[ya++]=t,ei[ya++]=i,ei[ya++]=a,ei[ya++]=o,Oh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function kh(t,i,a,o){return mu(t,i,a,o),gu(t)}function _a(t,i){return mu(t,null,null,i),gu(t)}function vg(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-bt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function gu(t){if(50<el)throw el=0,jf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var va={};function Cb(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,i,a,o){return new Cb(t,i,a,o)}function Mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,i){var a=t.alternate;return a===null?(a=Hn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Eg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function pu(t,i,a,o,h,d){var v=0;if(o=t,typeof t=="function")Mh(t)&&(v=1);else if(typeof t=="string")v=xT(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case T:return t=Hn(31,a,i,h),t.elementType=T,t.lanes=d,t;case te:return Ds(a.children,h,d,i);case fe:v=8,h|=24;break;case re:return t=Hn(12,a,i,h|2),t.elementType=re,t.lanes=d,t;case Ie:return t=Hn(13,a,i,h),t.elementType=Ie,t.lanes=d,t;case Ce:return t=Hn(19,a,i,h),t.elementType=Ce,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Re:case _e:v=10;break e;case Ne:v=9;break e;case Fe:v=11;break e;case M:v=14;break e;case E:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=Hn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=d,i}function Ds(t,i,a,o){return t=Hn(7,t,o,i),t.lanes=a,t}function Vh(t,i,a){return t=Hn(6,t,null,i),t.lanes=a,t}function Ph(t,i,a){return i=Hn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ea=[],ba=0,yu=null,_u=0,ti=[],ni=0,xs=null,nr=1,ir="";function Os(t,i){Ea[ba++]=_u,Ea[ba++]=yu,yu=t,_u=i}function bg(t,i,a){ti[ni++]=nr,ti[ni++]=ir,ti[ni++]=xs,xs=t;var o=nr;t=ir;var h=32-bt(o)-1;o&=~(1<<h),a+=1;var d=32-bt(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,nr=1<<32-bt(i)+h|a<<h|o,ir=d+t}else nr=1<<d|a<<h|o,ir=t}function zh(t){t.return!==null&&(Os(t,1),bg(t,1,0))}function Lh(t){for(;t===yu;)yu=Ea[--ba],Ea[ba]=null,_u=Ea[--ba],Ea[ba]=null;for(;t===xs;)xs=ti[--ni],ti[ni]=null,ir=ti[--ni],ti[ni]=null,nr=ti[--ni],ti[ni]=null}var kn=null,zt=null,mt=!1,ks=null,ki=!1,Uh=Error(s(519));function Ms(t){var i=Error(s(418,""));throw Oo(Jn(i,t)),Uh}function Tg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[Pt]=t,i[kt]=o,a){case"dialog":it("cancel",i),it("close",i);break;case"iframe":case"object":case"embed":it("load",i);break;case"video":case"audio":for(a=0;a<nl.length;a++)it(nl[a],i);break;case"source":it("error",i);break;case"img":case"image":case"link":it("error",i),it("load",i);break;case"details":it("toggle",i);break;case"input":it("invalid",i),_s(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),sa(i);break;case"select":it("invalid",i);break;case"textarea":it("invalid",i),vs(i,o.value,o.defaultValue,o.children),sa(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Uy(i.textContent,a)?(o.popover!=null&&(it("beforetoggle",i),it("toggle",i)),o.onScroll!=null&&it("scroll",i),o.onScrollEnd!=null&&it("scrollend",i),o.onClick!=null&&(i.onclick=Wu),i=!0):i=!1,i||Ms(t)}function Sg(t){for(kn=t.return;kn;)switch(kn.tag){case 5:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:kn=kn.return}}function Do(t){if(t!==kn)return!1;if(!mt)return Sg(t),mt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||nd(t.type,t.memoizedProps)),a=!a),a&&zt&&Ms(t),Sg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){zt=_i(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}zt=null}}else i===27?(i=zt,Hr(t.type)?(t=ad,ad=null,zt=t):zt=i):zt=kn?_i(t.stateNode.nextSibling):null;return!0}function xo(){zt=kn=null,mt=!1}function Ag(){var t=ks;return t!==null&&(Pn===null?Pn=t:Pn.push.apply(Pn,t),ks=null),t}function Oo(t){ks===null?ks=[t]:ks.push(t)}var jh=U(null),Vs=null,rr=null;function Ir(t,i,a){B(jh,i._currentValue),i._currentValue=a}function sr(t){t._currentValue=jh.current,X(jh)}function Bh(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function Hh(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=h;for(var O=0;O<i.length;O++)if(S.context===i[O]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Bh(d.return,a,t),o||(v=null);break e}d=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Bh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ko(t,i,a,o){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=h.type;Bn(h.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(h===se.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ll):t=[ll])}h=h.return}t!==null&&Hh(i,t,a,o),i.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!Bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ps(t){Vs=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bn(t){return wg(Vs,t)}function Eu(t,i){return Vs===null&&Ps(t),wg(t,i)}function wg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(s(308));rr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else rr=rr.next=i;return a}var Db=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},xb=r.unstable_scheduleCallback,Ob=r.unstable_NormalPriority,Wt={$$typeof:_e,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qh(){return{controller:new Db,data:new Map,refCount:0}}function Mo(t){t.refCount--,t.refCount===0&&xb(Ob,function(){t.controller.abort()})}var Vo=null,Fh=0,Ta=0,Sa=null;function kb(t,i){if(Vo===null){var a=Vo=[];Fh=0,Ta=Qf(),Sa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Fh++,i.then(Rg,Rg),i}function Rg(){if(--Fh===0&&Vo!==null){Sa!==null&&(Sa.status="fulfilled");var t=Vo;Vo=null,Ta=0,Sa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Mb(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Ig=V.S;V.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kb(t,i),Ig!==null&&Ig(t,i)};var zs=U(null);function Gh(){var t=zs.current;return t!==null?t:Nt.pooledCache}function bu(t,i){i===null?B(zs,zs.current):B(zs,i.pool)}function Ng(){var t=Gh();return t===null?null:{parent:Wt._currentValue,pool:t}}var Po=Error(s(460)),Cg=Error(s(474)),Tu=Error(s(542)),Kh={then:function(){}};function Dg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Su(){}function xg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Su,Su),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kg(t),t;default:if(typeof i.status=="string")i.then(Su,Su);else{if(t=Nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,kg(t),t}throw zo=i,Po}}var zo=null;function Og(){if(zo===null)throw Error(s(459));var t=zo;return zo=null,t}function kg(t){if(t===Po||t===Tu)throw Error(s(483))}var Nr=!1;function Qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Cr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(_t&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=gu(t),vg(t,null,a),i}return mu(t,o,i,a),gu(t)}function Lo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,hi(t,a)}}function $h(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Xh=!1;function Uo(){if(Xh){var t=Sa;if(t!==null)throw t}}function jo(t,i,a,o){Xh=!1;var h=t.updateQueue;Nr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var O=S,q=O.next;O.next=null,v===null?d=q:v.next=q,v=O;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==v&&(S===null?ee.firstBaseUpdate=q:S.next=q,ee.lastBaseUpdate=O))}if(d!==null){var ie=h.baseState;v=0,ee=q=O=null,S=d;do{var F=S.lane&-536870913,G=F!==S.lane;if(G?(lt&F)===F:(o&F)===F){F!==0&&F===Ta&&(Xh=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var qe=t,Le=S;F=i;var wt=a;switch(Le.tag){case 1:if(qe=Le.payload,typeof qe=="function"){ie=qe.call(wt,ie,F);break e}ie=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Le.payload,F=typeof qe=="function"?qe.call(wt,ie,F):qe,F==null)break e;ie=A({},ie,F);break e;case 2:Nr=!0}}F=S.callback,F!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[F]:G.push(F))}else G={lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(q=ee=G,O=ie):ee=ee.next=G,v|=F;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;G=S,S=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);ee===null&&(O=ie),h.baseState=O,h.firstBaseUpdate=q,h.lastBaseUpdate=ee,d===null&&(h.shared.lanes=0),Lr|=v,t.lanes=v,t.memoizedState=ie}}function Mg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Vg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Mg(a[t],i)}var Aa=U(null),Au=U(0);function Pg(t,i){t=fr,B(Au,t),B(Aa,i),fr=t|i.baseLanes}function Zh(){B(Au,fr),B(Aa,Aa.current)}function Wh(){fr=Au.current,X(Aa),X(Au)}var xr=0,Ze=null,St=null,Kt=null,wu=!1,wa=!1,Ls=!1,Ru=0,Bo=0,Ra=null,Vb=0;function Bt(){throw Error(s(321))}function Jh(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Bn(t[a],i[a]))return!1;return!0}function ef(t,i,a,o,h,d){return xr=d,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=t===null||t.memoizedState===null?vp:Ep,Ls=!1,d=a(o,h),Ls=!1,wa&&(d=Lg(i,a,o,h)),zg(t),d}function zg(t){V.H=Ou;var i=St!==null&&St.next!==null;if(xr=0,Kt=St=Ze=null,wu=!1,Bo=0,Ra=null,i)throw Error(s(300));t===null||an||(t=t.dependencies,t!==null&&vu(t)&&(an=!0))}function Lg(t,i,a,o){Ze=t;var h=0;do{if(wa&&(Ra=null),Bo=0,wa=!1,25<=h)throw Error(s(301));if(h+=1,Kt=St=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}V.H=Hb,d=i(a,o)}while(wa);return d}function Pb(){var t=V.H,i=t.useState()[0];return i=typeof i.then=="function"?Ho(i):i,t=t.useState()[0],(St!==null?St.memoizedState:null)!==t&&(Ze.flags|=1024),i}function tf(){var t=Ru!==0;return Ru=0,t}function nf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function rf(t){if(wu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}wu=!1}xr=0,Kt=St=Ze=null,wa=!1,Bo=Ru=0,Ra=null}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ze.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Qt(){if(St===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var i=Kt===null?Ze.memoizedState:Kt.next;if(i!==null)Kt=i,St=t;else{if(t===null)throw Ze.alternate===null?Error(s(467)):Error(s(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Kt===null?Ze.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(t){var i=Bo;return Bo+=1,Ra===null&&(Ra=[]),t=xg(Ra,t,i),i=Ze,(Kt===null?i.memoizedState:Kt.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?vp:Ep),t}function Iu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ho(t);if(t.$$typeof===_e)return bn(t)}throw Error(s(438,String(t)))}function af(t){var i=null,a=Ze.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ze.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=sf(),Ze.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=I;return i.index++,a}function ar(t,i){return typeof i=="function"?i(t):i}function Nu(t){var i=Qt();return of(i,St,t)}function of(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var S=v=null,O=null,q=i,ee=!1;do{var ie=q.lane&-536870913;if(ie!==q.lane?(lt&ie)===ie:(xr&ie)===ie){var F=q.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ie===Ta&&(ee=!0);else if((xr&F)===F){q=q.next,F===Ta&&(ee=!0);continue}else ie={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(S=O=ie,v=d):O=O.next=ie,Ze.lanes|=F,Lr|=F;ie=q.action,Ls&&a(d,ie),d=q.hasEagerState?q.eagerState:a(d,ie)}else F={lane:ie,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(S=O=F,v=d):O=O.next=F,Ze.lanes|=ie,Lr|=ie;q=q.next}while(q!==null&&q!==i);if(O===null?v=d:O.next=S,!Bn(d,t.memoizedState)&&(an=!0,ee&&(a=Sa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=O,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function lf(t){var i=Qt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Bn(d,i.memoizedState)||(an=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function Ug(t,i,a){var o=Ze,h=Qt(),d=mt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!Bn((St||h).memoizedState,a);v&&(h.memoizedState=a,an=!0),h=h.queue;var S=Hg.bind(null,o,h,t);if(qo(2048,8,S,[t]),h.getSnapshot!==i||v||Kt!==null&&Kt.memoizedState.tag&1){if(o.flags|=2048,Ia(9,Cu(),Bg.bind(null,o,h,a,i),null),Nt===null)throw Error(s(349));d||(xr&124)!==0||jg(o,i,a)}return a}function jg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ze.updateQueue,i===null?(i=sf(),Ze.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Bg(t,i,a,o){i.value=a,i.getSnapshot=o,qg(i)&&Fg(t)}function Hg(t,i,a){return a(function(){qg(i)&&Fg(t)})}function qg(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Bn(t,a)}catch{return!0}}function Fg(t){var i=_a(t,2);i!==null&&Qn(i,t,2)}function uf(t){var i=Mn();if(typeof t=="function"){var a=t;if(t=a(),Ls){dt(!0);try{a()}finally{dt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},i}function Gg(t,i,a,o){return t.baseState=a,of(t,St,typeof o=="function"?o:ar)}function zb(t,i,a,o,h){if(xu(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};V.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,Kg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Kg(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var d=V.T,v={};V.T=v;try{var S=a(h,o),O=V.S;O!==null&&O(v,S),Qg(t,i,S)}catch(q){cf(t,i,q)}finally{V.T=d}}else try{d=a(h,o),Qg(t,i,d)}catch(q){cf(t,i,q)}}function Qg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Yg(t,i,o)},function(o){return cf(t,i,o)}):Yg(t,i,a)}function Yg(t,i,a){i.status="fulfilled",i.value=a,$g(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Kg(t,a)))}function cf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,$g(i),i=i.next;while(i!==o)}t.action=null}function $g(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Xg(t,i){return i}function Zg(t,i){if(mt){var a=Nt.formState;if(a!==null){e:{var o=Ze;if(mt){if(zt){t:{for(var h=zt,d=ki;h.nodeType!==8;){if(!d){h=null;break t}if(h=_i(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){zt=_i(h.nextSibling),o=h.data==="F!";break e}}Ms(o)}o=!1}o&&(i=a[0])}}return a=Mn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xg,lastRenderedState:i},a.queue=o,a=pp.bind(null,Ze,o),o.dispatch=a,o=uf(!1),d=gf.bind(null,Ze,!1,o.queue),o=Mn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=zb.bind(null,Ze,h,d,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Wg(t){var i=Qt();return Jg(i,St,t)}function Jg(t,i,a){if(i=of(t,i,Xg)[0],t=Nu(ar)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Ho(i)}catch(v){throw v===Po?Tu:v}else o=i;i=Qt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ze.flags|=2048,Ia(9,Cu(),Lb.bind(null,h,a),null)),[o,d,t]}function Lb(t,i){t.action=i}function ep(t){var i=Qt(),a=St;if(a!==null)return Jg(i,a,t);Qt(),i=i.memoizedState,a=Qt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ia(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Ze.updateQueue,i===null&&(i=sf(),Ze.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Cu(){return{destroy:void 0,resource:void 0}}function tp(){return Qt().memoizedState}function Du(t,i,a,o){var h=Mn();o=o===void 0?null:o,Ze.flags|=t,h.memoizedState=Ia(1|i,Cu(),a,o)}function qo(t,i,a,o){var h=Qt();o=o===void 0?null:o;var d=h.memoizedState.inst;St!==null&&o!==null&&Jh(o,St.memoizedState.deps)?h.memoizedState=Ia(i,d,a,o):(Ze.flags|=t,h.memoizedState=Ia(1|i,d,a,o))}function np(t,i){Du(8390656,8,t,i)}function ip(t,i){qo(2048,8,t,i)}function rp(t,i){return qo(4,2,t,i)}function sp(t,i){return qo(4,4,t,i)}function ap(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function op(t,i,a){a=a!=null?a.concat([t]):null,qo(4,4,ap.bind(null,i,t),a)}function hf(){}function lp(t,i){var a=Qt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Jh(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function up(t,i){var a=Qt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Jh(i,o[1]))return o[0];if(o=t(),Ls){dt(!0);try{t()}finally{dt(!1)}}return a.memoizedState=[o,i],o}function ff(t,i,a){return a===void 0||(xr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=fy(),Ze.lanes|=t,Lr|=t,a)}function cp(t,i,a,o){return Bn(a,i)?a:Aa.current!==null?(t=ff(t,a,o),Bn(t,i)||(an=!0),t):(xr&42)===0?(an=!0,t.memoizedState=a):(t=fy(),Ze.lanes|=t,Lr|=t,i)}function hp(t,i,a,o,h){var d=W.p;W.p=d!==0&&8>d?d:8;var v=V.T,S={};V.T=S,gf(t,!1,i,a);try{var O=h(),q=V.S;if(q!==null&&q(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=Mb(O,o);Fo(t,i,ee,Kn(t))}else Fo(t,i,o,Kn(t))}catch(ie){Fo(t,i,{then:function(){},status:"rejected",reason:ie},Kn())}finally{W.p=d,V.T=v}}function Ub(){}function df(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=fp(t).queue;hp(t,h,i,z,a===null?Ub:function(){return dp(t),a(o)})}function fp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:z},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function dp(t){var i=fp(t).next.queue;Fo(t,i,{},Kn())}function mf(){return bn(ll)}function mp(){return Qt().memoizedState}function gp(){return Qt().memoizedState}function jb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Kn();t=Cr(a);var o=Dr(i,t,a);o!==null&&(Qn(o,i,a),Lo(o,i,a)),i={cache:qh()},t.payload=i;return}i=i.return}}function Bb(t,i,a){var o=Kn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xu(t)?yp(i,a):(a=kh(t,i,a,o),a!==null&&(Qn(a,t,o),_p(a,i,o)))}function pp(t,i,a){var o=Kn();Fo(t,i,a,o)}function Fo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(t))yp(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,S=d(v,a);if(h.hasEagerState=!0,h.eagerState=S,Bn(S,v))return mu(t,i,h,0),Nt===null&&du(),!1}catch{}finally{}if(a=kh(t,i,h,o),a!==null)return Qn(a,t,o),_p(a,i,o),!0}return!1}function gf(t,i,a,o){if(o={lane:2,revertLane:Qf(),action:o,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(i)throw Error(s(479))}else i=kh(t,a,o,2),i!==null&&Qn(i,t,2)}function xu(t){var i=t.alternate;return t===Ze||i!==null&&i===Ze}function yp(t,i){wa=wu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function _p(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,hi(t,a)}}var Ou={readContext:bn,use:Iu,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},vp={readContext:bn,use:Iu,useCallback:function(t,i){return Mn().memoizedState=[t,i===void 0?null:i],t},useContext:bn,useEffect:np,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Du(4194308,4,ap.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Du(4194308,4,t,i)},useInsertionEffect:function(t,i){Du(4,2,t,i)},useMemo:function(t,i){var a=Mn();i=i===void 0?null:i;var o=t();if(Ls){dt(!0);try{t()}finally{dt(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=Mn();if(a!==void 0){var h=a(i);if(Ls){dt(!0);try{a(i)}finally{dt(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Bb.bind(null,Ze,t),[o.memoizedState,t]},useRef:function(t){var i=Mn();return t={current:t},i.memoizedState=t},useState:function(t){t=uf(t);var i=t.queue,a=pp.bind(null,Ze,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:hf,useDeferredValue:function(t,i){var a=Mn();return ff(a,t,i)},useTransition:function(){var t=uf(!1);return t=hp.bind(null,Ze,t.queue,!0,!1),Mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Ze,h=Mn();if(mt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Nt===null)throw Error(s(349));(lt&124)!==0||jg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,np(Hg.bind(null,o,d,t),[t]),o.flags|=2048,Ia(9,Cu(),Bg.bind(null,o,d,a,i),null),a},useId:function(){var t=Mn(),i=Nt.identifierPrefix;if(mt){var a=ir,o=nr;a=(o&~(1<<32-bt(o)-1)).toString(32)+a,i=""+i+"R"+a,a=Ru++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=Vb++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:mf,useFormState:Zg,useActionState:Zg,useOptimistic:function(t){var i=Mn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=gf.bind(null,Ze,!0,a),a.dispatch=i,[t,i]},useMemoCache:af,useCacheRefresh:function(){return Mn().memoizedState=jb.bind(null,Ze)}},Ep={readContext:bn,use:Iu,useCallback:lp,useContext:bn,useEffect:ip,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:up,useReducer:Nu,useRef:tp,useState:function(){return Nu(ar)},useDebugValue:hf,useDeferredValue:function(t,i){var a=Qt();return cp(a,St.memoizedState,t,i)},useTransition:function(){var t=Nu(ar)[0],i=Qt().memoizedState;return[typeof t=="boolean"?t:Ho(t),i]},useSyncExternalStore:Ug,useId:mp,useHostTransitionStatus:mf,useFormState:Wg,useActionState:Wg,useOptimistic:function(t,i){var a=Qt();return Gg(a,St,t,i)},useMemoCache:af,useCacheRefresh:gp},Hb={readContext:bn,use:Iu,useCallback:lp,useContext:bn,useEffect:ip,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:up,useReducer:lf,useRef:tp,useState:function(){return lf(ar)},useDebugValue:hf,useDeferredValue:function(t,i){var a=Qt();return St===null?ff(a,t,i):cp(a,St.memoizedState,t,i)},useTransition:function(){var t=lf(ar)[0],i=Qt().memoizedState;return[typeof t=="boolean"?t:Ho(t),i]},useSyncExternalStore:Ug,useId:mp,useHostTransitionStatus:mf,useFormState:ep,useActionState:ep,useOptimistic:function(t,i){var a=Qt();return St!==null?Gg(a,St,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:af,useCacheRefresh:gp},Na=null,Go=0;function ku(t){var i=Go;return Go+=1,Na===null&&(Na=[]),xg(Na,t,i)}function Ko(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Mu(t,i){throw i.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function bp(t){var i=t._init;return i(t._payload)}function Tp(t){function i(L,P){if(t){var H=L.deletions;H===null?(L.deletions=[P],L.flags|=16):H.push(P)}}function a(L,P){if(!t)return null;for(;P!==null;)i(L,P),P=P.sibling;return null}function o(L){for(var P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function h(L,P){return L=tr(L,P),L.index=0,L.sibling=null,L}function d(L,P,H){return L.index=H,t?(H=L.alternate,H!==null?(H=H.index,H<P?(L.flags|=67108866,P):H):(L.flags|=67108866,P)):(L.flags|=1048576,P)}function v(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function S(L,P,H,ne){return P===null||P.tag!==6?(P=Vh(H,L.mode,ne),P.return=L,P):(P=h(P,H),P.return=L,P)}function O(L,P,H,ne){var we=H.type;return we===te?ee(L,P,H.props.children,ne,H.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===E&&bp(we)===P.type)?(P=h(P,H.props),Ko(P,H),P.return=L,P):(P=pu(H.type,H.key,H.props,null,L.mode,ne),Ko(P,H),P.return=L,P)}function q(L,P,H,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=Ph(H,L.mode,ne),P.return=L,P):(P=h(P,H.children||[]),P.return=L,P)}function ee(L,P,H,ne,we){return P===null||P.tag!==7?(P=Ds(H,L.mode,ne,we),P.return=L,P):(P=h(P,H),P.return=L,P)}function ie(L,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Vh(""+P,L.mode,H),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case k:return H=pu(P.type,P.key,P.props,null,L.mode,H),Ko(H,P),H.return=L,H;case Q:return P=Ph(P,L.mode,H),P.return=L,P;case E:var ne=P._init;return P=ne(P._payload),ie(L,P,H)}if(pe(P)||x(P))return P=Ds(P,L.mode,H,null),P.return=L,P;if(typeof P.then=="function")return ie(L,ku(P),H);if(P.$$typeof===_e)return ie(L,Eu(L,P),H);Mu(L,P)}return null}function F(L,P,H,ne){var we=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:S(L,P,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===we?O(L,P,H,ne):null;case Q:return H.key===we?q(L,P,H,ne):null;case E:return we=H._init,H=we(H._payload),F(L,P,H,ne)}if(pe(H)||x(H))return we!==null?null:ee(L,P,H,ne,null);if(typeof H.then=="function")return F(L,P,ku(H),ne);if(H.$$typeof===_e)return F(L,P,Eu(L,H),ne);Mu(L,H)}return null}function G(L,P,H,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return L=L.get(H)||null,S(P,L,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return L=L.get(ne.key===null?H:ne.key)||null,O(P,L,ne,we);case Q:return L=L.get(ne.key===null?H:ne.key)||null,q(P,L,ne,we);case E:var et=ne._init;return ne=et(ne._payload),G(L,P,H,ne,we)}if(pe(ne)||x(ne))return L=L.get(H)||null,ee(P,L,ne,we,null);if(typeof ne.then=="function")return G(L,P,H,ku(ne),we);if(ne.$$typeof===_e)return G(L,P,H,Eu(P,ne),we);Mu(P,ne)}return null}function qe(L,P,H,ne){for(var we=null,et=null,Oe=P,Ue=P=0,ln=null;Oe!==null&&Ue<H.length;Ue++){Oe.index>Ue?(ln=Oe,Oe=null):ln=Oe.sibling;var ht=F(L,Oe,H[Ue],ne);if(ht===null){Oe===null&&(Oe=ln);break}t&&Oe&&ht.alternate===null&&i(L,Oe),P=d(ht,P,Ue),et===null?we=ht:et.sibling=ht,et=ht,Oe=ln}if(Ue===H.length)return a(L,Oe),mt&&Os(L,Ue),we;if(Oe===null){for(;Ue<H.length;Ue++)Oe=ie(L,H[Ue],ne),Oe!==null&&(P=d(Oe,P,Ue),et===null?we=Oe:et.sibling=Oe,et=Oe);return mt&&Os(L,Ue),we}for(Oe=o(Oe);Ue<H.length;Ue++)ln=G(Oe,L,Ue,H[Ue],ne),ln!==null&&(t&&ln.alternate!==null&&Oe.delete(ln.key===null?Ue:ln.key),P=d(ln,P,Ue),et===null?we=ln:et.sibling=ln,et=ln);return t&&Oe.forEach(function(Qr){return i(L,Qr)}),mt&&Os(L,Ue),we}function Le(L,P,H,ne){if(H==null)throw Error(s(151));for(var we=null,et=null,Oe=P,Ue=P=0,ln=null,ht=H.next();Oe!==null&&!ht.done;Ue++,ht=H.next()){Oe.index>Ue?(ln=Oe,Oe=null):ln=Oe.sibling;var Qr=F(L,Oe,ht.value,ne);if(Qr===null){Oe===null&&(Oe=ln);break}t&&Oe&&Qr.alternate===null&&i(L,Oe),P=d(Qr,P,Ue),et===null?we=Qr:et.sibling=Qr,et=Qr,Oe=ln}if(ht.done)return a(L,Oe),mt&&Os(L,Ue),we;if(Oe===null){for(;!ht.done;Ue++,ht=H.next())ht=ie(L,ht.value,ne),ht!==null&&(P=d(ht,P,Ue),et===null?we=ht:et.sibling=ht,et=ht);return mt&&Os(L,Ue),we}for(Oe=o(Oe);!ht.done;Ue++,ht=H.next())ht=G(Oe,L,Ue,ht.value,ne),ht!==null&&(t&&ht.alternate!==null&&Oe.delete(ht.key===null?Ue:ht.key),P=d(ht,P,Ue),et===null?we=ht:et.sibling=ht,et=ht);return t&&Oe.forEach(function(qT){return i(L,qT)}),mt&&Os(L,Ue),we}function wt(L,P,H,ne){if(typeof H=="object"&&H!==null&&H.type===te&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var we=H.key;P!==null;){if(P.key===we){if(we=H.type,we===te){if(P.tag===7){a(L,P.sibling),ne=h(P,H.props.children),ne.return=L,L=ne;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===E&&bp(we)===P.type){a(L,P.sibling),ne=h(P,H.props),Ko(ne,H),ne.return=L,L=ne;break e}a(L,P);break}else i(L,P);P=P.sibling}H.type===te?(ne=Ds(H.props.children,L.mode,ne,H.key),ne.return=L,L=ne):(ne=pu(H.type,H.key,H.props,null,L.mode,ne),Ko(ne,H),ne.return=L,L=ne)}return v(L);case Q:e:{for(we=H.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){a(L,P.sibling),ne=h(P,H.children||[]),ne.return=L,L=ne;break e}else{a(L,P);break}else i(L,P);P=P.sibling}ne=Ph(H,L.mode,ne),ne.return=L,L=ne}return v(L);case E:return we=H._init,H=we(H._payload),wt(L,P,H,ne)}if(pe(H))return qe(L,P,H,ne);if(x(H)){if(we=x(H),typeof we!="function")throw Error(s(150));return H=we.call(H),Le(L,P,H,ne)}if(typeof H.then=="function")return wt(L,P,ku(H),ne);if(H.$$typeof===_e)return wt(L,P,Eu(L,H),ne);Mu(L,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(a(L,P.sibling),ne=h(P,H),ne.return=L,L=ne):(a(L,P),ne=Vh(H,L.mode,ne),ne.return=L,L=ne),v(L)):a(L,P)}return function(L,P,H,ne){try{Go=0;var we=wt(L,P,H,ne);return Na=null,we}catch(Oe){if(Oe===Po||Oe===Tu)throw Oe;var et=Hn(29,Oe,null,L.mode);return et.lanes=ne,et.return=L,et}finally{}}}var Ca=Tp(!0),Sp=Tp(!1),ii=U(null),Mi=null;function Or(t){var i=t.alternate;B(Jt,Jt.current&1),B(ii,t),Mi===null&&(i===null||Aa.current!==null||i.memoizedState!==null)&&(Mi=t)}function Ap(t){if(t.tag===22){if(B(Jt,Jt.current),B(ii,t),Mi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Mi=t)}}else kr()}function kr(){B(Jt,Jt.current),B(ii,ii.current)}function or(t){X(ii),Mi===t&&(Mi=null),X(Jt)}var Jt=U(0);function Vu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||sd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function pf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var yf={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Kn(),h=Cr(o);h.payload=i,a!=null&&(h.callback=a),i=Dr(t,h,o),i!==null&&(Qn(i,t,o),Lo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Kn(),h=Cr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Dr(t,h,o),i!==null&&(Qn(i,t,o),Lo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Kn(),o=Cr(a);o.tag=2,i!=null&&(o.callback=i),i=Dr(t,o,a),i!==null&&(Qn(i,t,a),Lo(i,t,a))}};function wp(t,i,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!No(a,o)||!No(h,d):!0}function Rp(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&yf.enqueueReplaceState(i,i.state,null)}function Us(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ip(t){Pu(t)}function Np(t){console.error(t)}function Cp(t){Pu(t)}function zu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Dp(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function _f(t,i,a){return a=Cr(a),a.tag=3,a.payload={element:null},a.callback=function(){zu(t,i)},a}function xp(t){return t=Cr(t),t.tag=3,t}function Op(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Dp(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Dp(i,a,o),typeof h!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function qb(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&ko(i,a,h,!0),a=ii.current,a!==null){switch(a.tag){case 13:return Mi===null?Hf():a.alternate===null&&Lt===0&&(Lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Kh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Ff(t,o,h)),!1;case 22:return a.flags|=65536,o===Kh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Ff(t,o,h)),!1}throw Error(s(435,a.tag))}return Ff(t,o,h),Hf(),!1}if(mt)return i=ii.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Uh&&(t=Error(s(422),{cause:o}),Oo(Jn(t,a)))):(o!==Uh&&(i=Error(s(423),{cause:o}),Oo(Jn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Jn(o,a),h=_f(t.stateNode,o,h),$h(t,h),Lt!==4&&(Lt=2)),!1;var d=Error(s(520),{cause:o});if(d=Jn(d,a),Jo===null?Jo=[d]:Jo.push(d),Lt!==4&&(Lt=2),i===null)return!0;o=Jn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=_f(a.stateNode,o,t),$h(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=xp(h),Op(h,t,a,o),$h(a,h),!1}a=a.return}while(a!==null);return!1}var kp=Error(s(461)),an=!1;function mn(t,i,a,o){i.child=t===null?Sp(i,null,a,o):Ca(i,t.child,a,o)}function Mp(t,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var S in o)S!=="ref"&&(v[S]=o[S])}else v=o;return Ps(i),o=ef(t,i,a,v,d,h),S=tf(),t!==null&&!an?(nf(t,i,h),lr(t,i,h)):(mt&&S&&zh(i),i.flags|=1,mn(t,i,o,h),i.child)}function Vp(t,i,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!Mh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Pp(t,i,d,o,h)):(t=pu(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Rf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:No,a(v,o)&&t.ref===i.ref)return lr(t,i,h)}return i.flags|=1,t=tr(d,o),t.ref=i.ref,t.return=i,i.child=t}function Pp(t,i,a,o,h){if(t!==null){var d=t.memoizedProps;if(No(d,o)&&t.ref===i.ref)if(an=!1,i.pendingProps=o=d,Rf(t,h))(t.flags&131072)!==0&&(an=!0);else return i.lanes=t.lanes,lr(t,i,h)}return vf(t,i,a,o,h)}function zp(t,i,a){var o=i.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return Lp(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(i,d!==null?d.cachePool:null),d!==null?Pg(i,d):Zh(),Ap(i);else return i.lanes=i.childLanes=536870912,Lp(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(bu(i,d.cachePool),Pg(i,d),kr(),i.memoizedState=null):(t!==null&&bu(i,null),Zh(),kr());return mn(t,i,h,a),i.child}function Lp(t,i,a,o){var h=Gh();return h=h===null?null:{parent:Wt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&bu(i,null),Zh(),Ap(i),t!==null&&ko(t,i,o,!0),null}function Lu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function vf(t,i,a,o,h){return Ps(i),a=ef(t,i,a,o,void 0,h),o=tf(),t!==null&&!an?(nf(t,i,h),lr(t,i,h)):(mt&&o&&zh(i),i.flags|=1,mn(t,i,a,h),i.child)}function Up(t,i,a,o,h,d){return Ps(i),i.updateQueue=null,a=Lg(i,o,a,h),zg(t),o=tf(),t!==null&&!an?(nf(t,i,d),lr(t,i,d)):(mt&&o&&zh(i),i.flags|=1,mn(t,i,a,d),i.child)}function jp(t,i,a,o,h){if(Ps(i),i.stateNode===null){var d=va,v=a.contextType;typeof v=="object"&&v!==null&&(d=bn(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=yf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},Qh(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?bn(v):va,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(pf(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&yf.enqueueReplaceState(d,d.state,null),jo(i,o,d,h),Uo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){d=i.stateNode;var S=i.memoizedProps,O=Us(a,S);d.props=O;var q=d.context,ee=a.contextType;v=va,typeof ee=="object"&&ee!==null&&(v=bn(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ee||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||q!==v)&&Rp(i,d,o,v),Nr=!1;var F=i.memoizedState;d.state=F,jo(i,o,d,h),Uo(),q=i.memoizedState,S||F!==q||Nr?(typeof ie=="function"&&(pf(i,a,ie,o),q=i.memoizedState),(O=Nr||wp(i,a,O,o,F,q,v))?(ee||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=q),d.props=o,d.state=q,d.context=v,o=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Yh(t,i),v=i.memoizedProps,ee=Us(a,v),d.props=ee,ie=i.pendingProps,F=d.context,q=a.contextType,O=va,typeof q=="object"&&q!==null&&(O=bn(q)),S=a.getDerivedStateFromProps,(q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==ie||F!==O)&&Rp(i,d,o,O),Nr=!1,F=i.memoizedState,d.state=F,jo(i,o,d,h),Uo();var G=i.memoizedState;v!==ie||F!==G||Nr||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof S=="function"&&(pf(i,a,S,o),G=i.memoizedState),(ee=Nr||wp(i,a,ee,o,F,G,O)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,G,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,G,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=G),d.props=o,d.state=G,d.context=O,o=ee):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(i.flags|=1024),o=!1)}return d=o,Lu(t,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&o?(i.child=Ca(i,t.child,null,h),i.child=Ca(i,null,a,h)):mn(t,i,a,h),i.memoizedState=d.state,t=i.child):t=lr(t,i,h),t}function Bp(t,i,a,o){return xo(),i.flags|=256,mn(t,i,a,o),i.child}var Ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(t){return{baseLanes:t,cachePool:Ng()}}function Tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=ri),t}function Hp(t,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Jt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(mt){if(h?Or(i):kr(),mt){var S=zt,O;if(O=S){e:{for(O=S,S=ki;O.nodeType!==8;){if(!S){S=null;break e}if(O=_i(O.nextSibling),O===null){S=null;break e}}S=O}S!==null?(i.memoizedState={dehydrated:S,treeContext:xs!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},O=Hn(18,null,null,0),O.stateNode=S,O.return=i,i.child=O,kn=i,zt=null,O=!0):O=!1}O||Ms(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return sd(S)?i.lanes=32:i.lanes=536870912,null;or(i)}return S=o.children,o=o.fallback,h?(kr(),h=i.mode,S=Uu({mode:"hidden",children:S},h),o=Ds(o,h,a,null),S.return=i,o.return=i,S.sibling=o,i.child=S,h=i.child,h.memoizedState=bf(a),h.childLanes=Tf(t,v,a),i.memoizedState=Ef,o):(Or(i),Sf(i,S))}if(O=t.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(d)i.flags&256?(Or(i),i.flags&=-257,i=Af(t,i,a)):i.memoizedState!==null?(kr(),i.child=t.child,i.flags|=128,i=null):(kr(),h=o.fallback,S=i.mode,o=Uu({mode:"visible",children:o.children},S),h=Ds(h,S,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ca(i,t.child,null,a),o=i.child,o.memoizedState=bf(a),o.childLanes=Tf(t,v,a),i.memoizedState=Ef,i=h);else if(Or(i),sd(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var q=v.dgst;v=q,o=Error(s(419)),o.stack="",o.digest=v,Oo({value:o,source:null,stack:null}),i=Af(t,i,a)}else if(an||ko(t,i,a,!1),v=(a&t.childLanes)!==0,an||v){if(v=Nt,v!==null&&(o=a&-a,o=(o&42)!==0?1:Ft(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==O.retryLane))throw O.retryLane=o,_a(t,o),Qn(v,t,o),kp;S.data==="$?"||Hf(),i=Af(t,i,a)}else S.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,zt=_i(S.nextSibling),kn=i,mt=!0,ks=null,ki=!1,t!==null&&(ti[ni++]=nr,ti[ni++]=ir,ti[ni++]=xs,nr=t.id,ir=t.overflow,xs=i),i=Sf(i,o.children),i.flags|=4096);return i}return h?(kr(),h=o.fallback,S=i.mode,O=t.child,q=O.sibling,o=tr(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,q!==null?h=tr(q,h):(h=Ds(h,S,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,S=t.child.memoizedState,S===null?S=bf(a):(O=S.cachePool,O!==null?(q=Wt._currentValue,O=O.parent!==q?{parent:q,pool:q}:O):O=Ng(),S={baseLanes:S.baseLanes|a,cachePool:O}),h.memoizedState=S,h.childLanes=Tf(t,v,a),i.memoizedState=Ef,o):(Or(i),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Sf(t,i){return i=Uu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Uu(t,i){return t=Hn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Af(t,i,a){return Ca(i,t.child,null,a),t=Sf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function qp(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),Bh(t.return,i,a)}function wf(t,i,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function Fp(t,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(mn(t,i,o.children,a),o=Jt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qp(t,a,i);else if(t.tag===19)qp(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(B(Jt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Vu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),wf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Vu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}wf(i,!0,a,null,d);break;case"together":wf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function lr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Lr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ko(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=tr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Rf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function Fb(t,i,a){switch(i.tag){case 3:J(i,i.stateNode.containerInfo),Ir(i,Wt,t.memoizedState.cache),xo();break;case 27:case 5:Se(i);break;case 4:J(i,i.stateNode.containerInfo);break;case 10:Ir(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Or(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Hp(t,i,a):(Or(i),t=lr(t,i,a),t!==null?t.sibling:null);Or(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(ko(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Fp(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),B(Jt,Jt.current),o)break;return null;case 22:case 23:return i.lanes=0,zp(t,i,a);case 24:Ir(i,Wt,t.memoizedState.cache)}return lr(t,i,a)}function Gp(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)an=!0;else{if(!Rf(t,a)&&(i.flags&128)===0)return an=!1,Fb(t,i,a);an=(t.flags&131072)!==0}else an=!1,mt&&(i.flags&1048576)!==0&&bg(i,_u,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Mh(o)?(t=Us(o,t),i.tag=1,i=jp(null,i,o,t,a)):(i.tag=0,i=vf(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Fe){i.tag=11,i=Mp(null,i,o,t,a);break e}else if(h===M){i.tag=14,i=Vp(null,i,o,t,a);break e}}throw i=$(o)||o,Error(s(306,i,""))}}return i;case 0:return vf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Us(o,i.pendingProps),jp(t,i,o,h,a);case 3:e:{if(J(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Yh(t,i),jo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,Ir(i,Wt,o),o!==d.cache&&Hh(i,[Wt],a,!0),Uo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Bp(t,i,o,a);break e}else if(o!==h){h=Jn(Error(s(424)),i),Oo(h),i=Bp(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(zt=_i(t.firstChild),kn=i,mt=!0,ks=null,ki=!0,a=Sp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(xo(),o===h){i=lr(t,i,a);break e}mn(t,i,o,a)}i=i.child}return i;case 26:return Lu(t,i),t===null?(a=$y(i.type,null,i.pendingProps,null))?i.memoizedState=a:mt||(a=i.type,t=i.pendingProps,o=Ju(K.current).createElement(a),o[Pt]=i,o[kt]=t,pn(o,a,t),jt(o),i.stateNode=o):i.memoizedState=$y(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Se(i),t===null&&mt&&(o=i.stateNode=Ky(i.type,i.pendingProps,K.current),kn=i,ki=!0,h=zt,Hr(i.type)?(ad=h,zt=_i(o.firstChild)):zt=h),mn(t,i,i.pendingProps.children,a),Lu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&mt&&((h=o=zt)&&(o=_T(o,i.type,i.pendingProps,ki),o!==null?(i.stateNode=o,kn=i,zt=_i(o.firstChild),ki=!1,h=!0):h=!1),h||Ms(i)),Se(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,nd(h,d)?o=null:v!==null&&nd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=ef(t,i,Pb,null,null,a),ll._currentValue=h),Lu(t,i),mn(t,i,o,a),i.child;case 6:return t===null&&mt&&((t=a=zt)&&(a=vT(a,i.pendingProps,ki),a!==null?(i.stateNode=a,kn=i,zt=null,t=!0):t=!1),t||Ms(i)),null;case 13:return Hp(t,i,a);case 4:return J(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ca(i,null,o,a):mn(t,i,o,a),i.child;case 11:return Mp(t,i,i.type,i.pendingProps,a);case 7:return mn(t,i,i.pendingProps,a),i.child;case 8:return mn(t,i,i.pendingProps.children,a),i.child;case 12:return mn(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Ir(i,i.type,o.value),mn(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ps(i),h=bn(h),o=o(h),i.flags|=1,mn(t,i,o,a),i.child;case 14:return Vp(t,i,i.type,i.pendingProps,a);case 15:return Pp(t,i,i.type,i.pendingProps,a);case 19:return Fp(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=Uu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=tr(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return zp(t,i,a);case 24:return Ps(i),o=bn(Wt),t===null?(h=Gh(),h===null&&(h=Nt,d=qh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},Qh(i),Ir(i,Wt,h)):((t.lanes&a)!==0&&(Yh(t,i),jo(i,null,null,a),Uo()),h=t.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ir(i,Wt,o)):(o=d.cache,Ir(i,Wt,o),o!==h.cache&&Hh(i,[Wt],a,!0))),mn(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ur(t){t.flags|=4}function Kp(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!e_(i)){if(i=ii.current,i!==null&&((lt&4194048)===lt?Mi!==null:(lt&62914560)!==lt&&(lt&536870912)===0||i!==Mi))throw zo=Kh,Cg;t.flags|=8192}}function ju(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ui():536870912,t.lanes|=i,ka|=i)}function Qo(t,i){if(!mt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Mt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function Gb(t,i,a){var o=i.pendingProps;switch(Lh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(i),null;case 1:return Mt(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),sr(Wt),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Do(i)?ur(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ag())),Mt(i),null;case 26:return a=i.memoizedState,t===null?(ur(i),a!==null?(Mt(i),Kp(i,a)):(Mt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ur(i),Mt(i),Kp(i,a)):(Mt(i),i.flags&=-16777217):(t.memoizedProps!==o&&ur(i),Mt(i),i.flags&=-16777217),null;case 27:he(i),a=K.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ur(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Mt(i),null}t=ce.current,Do(i)?Tg(i):(t=Ky(h,o,a),i.stateNode=t,ur(i))}return Mt(i),null;case 5:if(he(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&ur(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Mt(i),null}if(t=ce.current,Do(i))Tg(i);else{switch(h=Ju(K.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[Pt]=i,t[kt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(pn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ur(i)}}return Mt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&ur(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=K.current,Do(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=kn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Pt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Uy(t.nodeValue,a)),t||Ms(i)}else t=Ju(t).createTextNode(o),t[Pt]=i,i.stateNode=t}return Mt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Do(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Pt]=i}else xo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Mt(i),h=!1}else h=Ag(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(or(i),i):(or(i),null)}if(or(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),ju(i,i.updateQueue),Mt(i),null;case 4:return ae(),t===null&&Zf(i.stateNode.containerInfo),Mt(i),null;case 10:return sr(i.type),Mt(i),null;case 19:if(X(Jt),h=i.memoizedState,h===null)return Mt(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)Qo(h,!1);else{if(Lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Vu(t),d!==null){for(i.flags|=128,Qo(h,!1),t=d.updateQueue,i.updateQueue=t,ju(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Eg(a,t),a=a.sibling;return B(Jt,Jt.current&1|2),i.child}t=t.sibling}h.tail!==null&&De()>qu&&(i.flags|=128,o=!0,Qo(h,!1),i.lanes=4194304)}else{if(!o)if(t=Vu(d),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,ju(i,t),Qo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!mt)return Mt(i),null}else 2*De()-h.renderingStartTime>qu&&a!==536870912&&(i.flags|=128,o=!0,Qo(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=De(),i.sibling=null,t=Jt.current,B(Jt,o?t&1|2:t&1),i):(Mt(i),null);case 22:case 23:return or(i),Wh(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(Mt(i),i.subtreeFlags&6&&(i.flags|=8192)):Mt(i),a=i.updateQueue,a!==null&&ju(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&X(zs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),sr(Wt),Mt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Kb(t,i){switch(Lh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return sr(Wt),ae(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return he(i),null;case 13:if(or(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));xo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return X(Jt),null;case 4:return ae(),null;case 10:return sr(i.type),null;case 22:case 23:return or(i),Wh(),t!==null&&X(zs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return sr(Wt),null;case 25:return null;default:return null}}function Qp(t,i){switch(Lh(i),i.tag){case 3:sr(Wt),ae();break;case 26:case 27:case 5:he(i);break;case 4:ae();break;case 13:or(i);break;case 19:X(Jt);break;case 10:sr(i.type);break;case 22:case 23:or(i),Wh(),t!==null&&X(zs);break;case 24:sr(Wt)}}function Yo(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(S){It(i,i.return,S)}}function Mr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=i;var O=a,q=S;try{q()}catch(ee){It(h,O,ee)}}}o=o.next}while(o!==d)}}catch(ee){It(i,i.return,ee)}}function Yp(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Vg(i,a)}catch(o){It(t,t.return,o)}}}function $p(t,i,a){a.props=Us(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){It(t,i,o)}}function $o(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){It(t,i,h)}}function Vi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){It(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){It(t,i,h)}else a.current=null}function Xp(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){It(t,t.return,h)}}function If(t,i,a){try{var o=t.stateNode;dT(o,t.type,a,i),o[kt]=i}catch(h){It(t,t.return,h)}}function Zp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hr(t.type)||t.tag===4}function Nf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wu));else if(o!==4&&(o===27&&Hr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Cf(t,i,a),t=t.sibling;t!==null;)Cf(t,i,a),t=t.sibling}function Bu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Hr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Bu(t,i,a),t=t.sibling;t!==null;)Bu(t,i,a),t=t.sibling}function Wp(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);pn(i,o,a),i[Pt]=t,i[kt]=a}catch(d){It(t,t.return,d)}}var cr=!1,Ht=!1,Df=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,on=null;function Qb(t,i){if(t=t.containerInfo,ed=sc,t=cg(t),Ih(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,O=-1,q=0,ee=0,ie=t,F=null;t:for(;;){for(var G;ie!==a||h!==0&&ie.nodeType!==3||(S=v+h),ie!==d||o!==0&&ie.nodeType!==3||(O=v+o),ie.nodeType===3&&(v+=ie.nodeValue.length),(G=ie.firstChild)!==null;)F=ie,ie=G;for(;;){if(ie===t)break t;if(F===a&&++q===h&&(S=v),F===d&&++ee===o&&(O=v),(G=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=G}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(td={focusedElem:t,selectionRange:a},sc=!1,on=i;on!==null;)if(i=on,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,on=t;else for(;on!==null;){switch(i=on,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var qe=Us(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(qe,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Le){It(a,a.return,Le)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)rd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,on=t;break}on=i.return}}function ey(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Vr(t,a),o&4&&Yo(5,a);break;case 1:if(Vr(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){It(a,a.return,v)}else{var h=Us(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){It(a,a.return,v)}}o&64&&Yp(a),o&512&&$o(a,a.return);break;case 3:if(Vr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Vg(t,i)}catch(v){It(a,a.return,v)}}break;case 27:i===null&&o&4&&Wp(a);case 26:case 5:Vr(t,a),i===null&&o&4&&Xp(a),o&512&&$o(a,a.return);break;case 12:Vr(t,a);break;case 13:Vr(t,a),o&4&&iy(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=nT.bind(null,a),ET(t,a))));break;case 22:if(o=a.memoizedState!==null||cr,!o){i=i!==null&&i.memoizedState!==null||Ht,h=cr;var d=Ht;cr=o,(Ht=i)&&!d?Pr(t,a,(a.subtreeFlags&8772)!==0):Vr(t,a),cr=h,Ht=d}break;case 30:break;default:Vr(t,a)}}function ty(t){var i=t.alternate;i!==null&&(t.alternate=null,ty(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Sr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,Vn=!1;function hr(t,i,a){for(a=a.child;a!==null;)ny(t,i,a),a=a.sibling}function ny(t,i,a){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(ve,a)}catch{}switch(a.tag){case 26:Ht||Vi(a,i),hr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||Vi(a,i);var o=Ot,h=Vn;Hr(a.type)&&(Ot=a.stateNode,Vn=!1),hr(t,i,a),rl(a.stateNode),Ot=o,Vn=h;break;case 5:Ht||Vi(a,i);case 6:if(o=Ot,h=Vn,Ot=null,hr(t,i,a),Ot=o,Vn=h,Ot!==null)if(Vn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(a.stateNode)}catch(d){It(a,i,d)}else try{Ot.removeChild(a.stateNode)}catch(d){It(a,i,d)}break;case 18:Ot!==null&&(Vn?(t=Ot,Fy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fl(t)):Fy(Ot,a.stateNode));break;case 4:o=Ot,h=Vn,Ot=a.stateNode.containerInfo,Vn=!0,hr(t,i,a),Ot=o,Vn=h;break;case 0:case 11:case 14:case 15:Ht||Mr(2,a,i),Ht||Mr(4,a,i),hr(t,i,a);break;case 1:Ht||(Vi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&$p(a,i,o)),hr(t,i,a);break;case 21:hr(t,i,a);break;case 22:Ht=(o=Ht)||a.memoizedState!==null,hr(t,i,a),Ht=o;break;default:hr(t,i,a)}}function iy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(a){It(i,i.return,a)}}function Yb(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Jp),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Jp),i;default:throw Error(s(435,t.tag))}}function xf(t,i){var a=Yb(t);i.forEach(function(o){var h=iT.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function qn(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Hr(S.type)){Ot=S.stateNode,Vn=!1;break e}break;case 5:Ot=S.stateNode,Vn=!1;break e;case 3:case 4:Ot=S.stateNode.containerInfo,Vn=!0;break e}S=S.return}if(Ot===null)throw Error(s(160));ny(d,v,h),Ot=null,Vn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ry(i,t),i=i.sibling}var yi=null;function ry(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(i,t),Fn(t),o&4&&(Mr(3,t,t.return),Yo(3,t),Mr(5,t,t.return));break;case 1:qn(i,t),Fn(t),o&512&&(Ht||a===null||Vi(a,a.return)),o&64&&cr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=yi;if(qn(i,t),Fn(t),o&512&&(Ht||a===null||Vi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ms]||d[Pt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),pn(d,o,a),d[Pt]=t,jt(d),o=d;break e;case"link":var v=Wy("link","href",h).get(o+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=h.createElement(o),pn(d,o,a),h.head.appendChild(d);break;case"meta":if(v=Wy("meta","content",h).get(o+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=h.createElement(o),pn(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Pt]=t,jt(d),o=d}t.stateNode=o}else Jy(h,t.type,t.stateNode);else t.stateNode=Zy(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Jy(h,t.type,t.stateNode):Zy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&If(t,t.memoizedProps,a.memoizedProps)}break;case 27:qn(i,t),Fn(t),o&512&&(Ht||a===null||Vi(a,a.return)),a!==null&&o&4&&If(t,t.memoizedProps,a.memoizedProps);break;case 5:if(qn(i,t),Fn(t),o&512&&(Ht||a===null||Vi(a,a.return)),t.flags&32){h=t.stateNode;try{$n(h,"")}catch(G){It(t,t.return,G)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,If(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Df=!0);break;case 6:if(qn(i,t),Fn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(G){It(t,t.return,G)}}break;case 3:if(nc=null,h=yi,yi=ec(i.containerInfo),qn(i,t),yi=h,Fn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{fl(i.containerInfo)}catch(G){It(t,t.return,G)}Df&&(Df=!1,sy(t));break;case 4:o=yi,yi=ec(t.stateNode.containerInfo),qn(i,t),Fn(t),yi=o;break;case 12:qn(i,t),Fn(t);break;case 13:qn(i,t),Fn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zf=De()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,xf(t,o)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,q=cr,ee=Ht;if(cr=q||h,Ht=ee||O,qn(i,t),Ht=ee,cr=q,Fn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||cr||Ht||js(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(d=O.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=O.stateNode;var ie=O.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;S.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(G){It(O,O.return,G)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(G){It(O,O.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,xf(t,a))));break;case 19:qn(i,t),Fn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,xf(t,o)));break;case 30:break;case 21:break;default:qn(i,t),Fn(t)}}function Fn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(Zp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Nf(t);Bu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&($n(v,""),a.flags&=-33);var S=Nf(t);Bu(t,S,v);break;case 3:case 4:var O=a.stateNode.containerInfo,q=Nf(t);Cf(t,q,O);break;default:throw Error(s(161))}}catch(ee){It(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function sy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;sy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Vr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ey(t,i.alternate,i),i=i.sibling}function js(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Mr(4,i,i.return),js(i);break;case 1:Vi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&$p(i,i.return,a),js(i);break;case 27:rl(i.stateNode);case 26:case 5:Vi(i,i.return),js(i);break;case 22:i.memoizedState===null&&js(i);break;case 30:js(i);break;default:js(i)}t=t.sibling}}function Pr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Pr(h,d,a),Yo(4,d);break;case 1:if(Pr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){It(o,o.return,q)}if(o=d,h=o.updateQueue,h!==null){var S=o.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Mg(O[h],S)}catch(q){It(o,o.return,q)}}a&&v&64&&Yp(d),$o(d,d.return);break;case 27:Wp(d);case 26:case 5:Pr(h,d,a),a&&o===null&&v&4&&Xp(d),$o(d,d.return);break;case 12:Pr(h,d,a);break;case 13:Pr(h,d,a),a&&v&4&&iy(h,d);break;case 22:d.memoizedState===null&&Pr(h,d,a),$o(d,d.return);break;case 30:break;default:Pr(h,d,a)}i=i.sibling}}function Of(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Mo(a))}function kf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Mo(t))}function Pi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ay(t,i,a,o),i=i.sibling}function ay(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Pi(t,i,a,o),h&2048&&Yo(9,i);break;case 1:Pi(t,i,a,o);break;case 3:Pi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Mo(t)));break;case 12:if(h&2048){Pi(t,i,a,o),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){It(i,i.return,O)}}else Pi(t,i,a,o);break;case 13:Pi(t,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?Pi(t,i,a,o):Xo(t,i):d._visibility&2?Pi(t,i,a,o):(d._visibility|=2,Da(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Of(v,i);break;case 24:Pi(t,i,a,o),h&2048&&kf(i.alternate,i);break;default:Pi(t,i,a,o)}}function Da(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,S=a,O=o,q=v.flags;switch(v.tag){case 0:case 11:case 15:Da(d,v,S,O,h),Yo(8,v);break;case 23:break;case 22:var ee=v.stateNode;v.memoizedState!==null?ee._visibility&2?Da(d,v,S,O,h):Xo(d,v):(ee._visibility|=2,Da(d,v,S,O,h)),h&&q&2048&&Of(v.alternate,v);break;case 24:Da(d,v,S,O,h),h&&q&2048&&kf(v.alternate,v);break;default:Da(d,v,S,O,h)}i=i.sibling}}function Xo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:Xo(a,o),h&2048&&Of(o.alternate,o);break;case 24:Xo(a,o),h&2048&&kf(o.alternate,o);break;default:Xo(a,o)}i=i.sibling}}var Zo=8192;function xa(t){if(t.subtreeFlags&Zo)for(t=t.child;t!==null;)oy(t),t=t.sibling}function oy(t){switch(t.tag){case 26:xa(t),t.flags&Zo&&t.memoizedState!==null&&kT(yi,t.memoizedState,t.memoizedProps);break;case 5:xa(t);break;case 3:case 4:var i=yi;yi=ec(t.stateNode.containerInfo),xa(t),yi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Zo,Zo=16777216,xa(t),Zo=i):xa(t));break;default:xa(t)}}function ly(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Wo(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];on=o,cy(o,t)}ly(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)uy(t),t=t.sibling}function uy(t){switch(t.tag){case 0:case 11:case 15:Wo(t),t.flags&2048&&Mr(9,t,t.return);break;case 3:Wo(t);break;case 12:Wo(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Hu(t)):Wo(t);break;default:Wo(t)}}function Hu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];on=o,cy(o,t)}ly(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Mr(8,i,i.return),Hu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(i));break;default:Hu(i)}t=t.sibling}}function cy(t,i){for(;on!==null;){var a=on;switch(a.tag){case 0:case 11:case 15:Mr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Mo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,on=o;else e:for(a=t;on!==null;){o=on;var h=o.sibling,d=o.return;if(ty(o),o===a){on=null;break e}if(h!==null){h.return=d,on=h;break e}on=d}}}var $b={getCacheForType:function(t){var i=bn(Wt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Xb=typeof WeakMap=="function"?WeakMap:Map,_t=0,Nt=null,nt=null,lt=0,vt=0,Gn=null,zr=!1,Oa=!1,Mf=!1,fr=0,Lt=0,Lr=0,Bs=0,Vf=0,ri=0,ka=0,Jo=null,Pn=null,Pf=!1,zf=0,qu=1/0,Fu=null,Ur=null,gn=0,jr=null,Ma=null,Va=0,Lf=0,Uf=null,hy=null,el=0,jf=null;function Kn(){if((_t&2)!==0&&lt!==0)return lt&-lt;if(V.T!==null){var t=Ta;return t!==0?t:Qf()}return fi()}function fy(){ri===0&&(ri=(lt&536870912)===0||mt?li():536870912);var t=ii.current;return t!==null&&(t.flags|=32),ri}function Qn(t,i,a){(t===Nt&&(vt===2||vt===9)||t.cancelPendingCommit!==null)&&(Pa(t,0),Br(t,lt,ri,!1)),Nn(t,a),((_t&2)===0||t!==Nt)&&(t===Nt&&((_t&2)===0&&(Bs|=a),Lt===4&&Br(t,lt,ri,!1)),zi(t))}function dy(t,i,a){if((_t&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||nn(t,i),h=o?Jb(t,i):qf(t,i,!0),d=o;do{if(h===0){Oa&&!o&&Br(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Zb(a)){h=qf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var S=t;h=Jo;var O=S.current.memoizedState.isDehydrated;if(O&&(Pa(S,v).flags|=256),v=qf(S,v,!1),v!==2){if(Mf&&!O){S.errorRecoveryDisabledLanes|=d,Bs|=d,h=4;break e}d=Pn,Pn=h,d!==null&&(Pn===null?Pn=d:Pn.push.apply(Pn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Pa(t,0),Br(t,i,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Br(o,i,ri,!zr);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=zf+300-De(),10<h)){if(Br(o,i,ri,!zr),tn(o,0,!0)!==0)break e;o.timeoutHandle=Hy(my.bind(null,o,a,Pn,Fu,Pf,i,ri,Bs,ka,zr,d,2,-0,0),h);break e}my(o,a,Pn,Fu,Pf,i,ri,Bs,ka,zr,d,0,-0,0)}}break}while(!0);zi(t)}function my(t,i,a,o,h,d,v,S,O,q,ee,ie,F,G){if(t.timeoutHandle=-1,ie=i.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(ol={stylesheets:null,count:0,unsuspend:OT},oy(i),ie=MT(),ie!==null)){t.cancelPendingCommit=ie(by.bind(null,t,i,d,a,o,h,v,S,O,ee,1,F,G)),Br(t,d,v,!q);return}by(t,i,d,a,o,h,v,S,O)}function Zb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!Bn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Br(t,i,a,o){i&=~Vf,i&=~Bs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var d=31-bt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&En(t,a,i)}function Gu(){return(_t&6)===0?(tl(0),!1):!0}function Bf(){if(nt!==null){if(vt===0)var t=nt.return;else t=nt,rr=Vs=null,rf(t),Na=null,Go=0,t=nt;for(;t!==null;)Qp(t.alternate,t),t=t.return;nt=null}}function Pa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,gT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Bf(),Nt=t,nt=a=tr(t.current,null),lt=i,vt=0,Gn=null,zr=!1,Oa=nn(t,i),Mf=!1,ka=ri=Vf=Bs=Lr=Lt=0,Pn=Jo=null,Pf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-bt(o),d=1<<h;i|=t[h],o&=~d}return fr=i,du(),a}function gy(t,i){Ze=null,V.H=Ou,i===Po||i===Tu?(i=Og(),vt=3):i===Cg?(i=Og(),vt=4):vt=i===kp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Gn=i,nt===null&&(Lt=1,zu(t,Jn(i,t.current)))}function py(){var t=V.H;return V.H=Ou,t===null?Ou:t}function yy(){var t=V.A;return V.A=$b,t}function Hf(){Lt=4,zr||(lt&4194048)!==lt&&ii.current!==null||(Oa=!0),(Lr&134217727)===0&&(Bs&134217727)===0||Nt===null||Br(Nt,lt,ri,!1)}function qf(t,i,a){var o=_t;_t|=2;var h=py(),d=yy();(Nt!==t||lt!==i)&&(Fu=null,Pa(t,i)),i=!1;var v=Lt;e:do try{if(vt!==0&&nt!==null){var S=nt,O=Gn;switch(vt){case 8:Bf(),v=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(i=!0);var q=vt;if(vt=0,Gn=null,za(t,S,O,q),a&&Oa){v=0;break e}break;default:q=vt,vt=0,Gn=null,za(t,S,O,q)}}Wb(),v=Lt;break}catch(ee){gy(t,ee)}while(!0);return i&&t.shellSuspendCounter++,rr=Vs=null,_t=o,V.H=h,V.A=d,nt===null&&(Nt=null,lt=0,du()),v}function Wb(){for(;nt!==null;)_y(nt)}function Jb(t,i){var a=_t;_t|=2;var o=py(),h=yy();Nt!==t||lt!==i?(Fu=null,qu=De()+500,Pa(t,i)):Oa=nn(t,i);e:do try{if(vt!==0&&nt!==null){i=nt;var d=Gn;t:switch(vt){case 1:vt=0,Gn=null,za(t,i,d,1);break;case 2:case 9:if(Dg(d)){vt=0,Gn=null,vy(i);break}i=function(){vt!==2&&vt!==9||Nt!==t||(vt=7),zi(t)},d.then(i,i);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Dg(d)?(vt=0,Gn=null,vy(i)):(vt=0,Gn=null,za(t,i,d,7));break;case 5:var v=null;switch(nt.tag){case 26:v=nt.memoizedState;case 5:case 27:var S=nt;if(!v||e_(v)){vt=0,Gn=null;var O=S.sibling;if(O!==null)nt=O;else{var q=S.return;q!==null?(nt=q,Ku(q)):nt=null}break t}}vt=0,Gn=null,za(t,i,d,5);break;case 6:vt=0,Gn=null,za(t,i,d,6);break;case 8:Bf(),Lt=6;break e;default:throw Error(s(462))}}eT();break}catch(ee){gy(t,ee)}while(!0);return rr=Vs=null,V.H=o,V.A=h,_t=a,nt!==null?0:(Nt=null,lt=0,du(),Lt)}function eT(){for(;nt!==null&&!be();)_y(nt)}function _y(t){var i=Gp(t.alternate,t,fr);t.memoizedProps=t.pendingProps,i===null?Ku(t):nt=i}function vy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Up(a,i,i.pendingProps,i.type,void 0,lt);break;case 11:i=Up(a,i,i.pendingProps,i.type.render,i.ref,lt);break;case 5:rf(i);default:Qp(a,i),i=nt=Eg(i,fr),i=Gp(a,i,fr)}t.memoizedProps=t.pendingProps,i===null?Ku(t):nt=i}function za(t,i,a,o){rr=Vs=null,rf(i),Na=null,Go=0;var h=i.return;try{if(qb(t,h,i,a,lt)){Lt=1,zu(t,Jn(a,t.current)),nt=null;return}}catch(d){if(h!==null)throw nt=h,d;Lt=1,zu(t,Jn(a,t.current)),nt=null;return}i.flags&32768?(mt||o===1?t=!0:Oa||(lt&536870912)!==0?t=!1:(zr=t=!0,(o===2||o===9||o===3||o===6)&&(o=ii.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ey(i,t)):Ku(i)}function Ku(t){var i=t;do{if((i.flags&32768)!==0){Ey(i,zr);return}t=i.return;var a=Gb(i.alternate,i,fr);if(a!==null){nt=a;return}if(i=i.sibling,i!==null){nt=i;return}nt=i=t}while(i!==null);Lt===0&&(Lt=5)}function Ey(t,i){do{var a=Kb(t.alternate,t);if(a!==null){a.flags&=32767,nt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){nt=t;return}nt=t=a}while(t!==null);Lt=6,nt=null}function by(t,i,a,o,h,d,v,S,O){t.cancelPendingCommit=null;do Qu();while(gn!==0);if((_t&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Oh,ci(t,a,d,v,S,O),t===Nt&&(nt=Nt=null,lt=0),Ma=i,jr=t,Va=a,Lf=d,Uf=h,hy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,rT(ft,function(){return Ry(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=V.T,V.T=null,h=W.p,W.p=2,v=_t,_t|=4;try{Qb(t,i,a)}finally{_t=v,W.p=h,V.T=o}}gn=1,Ty(),Sy(),Ay()}}function Ty(){if(gn===1){gn=0;var t=jr,i=Ma,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var o=W.p;W.p=2;var h=_t;_t|=4;try{ry(i,t);var d=td,v=cg(t.containerInfo),S=d.focusedElem,O=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&ug(S.ownerDocument.documentElement,S)){if(O!==null&&Ih(S)){var q=O.start,ee=O.end;if(ee===void 0&&(ee=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min(ee,S.value.length);else{var ie=S.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var G=F.getSelection(),qe=S.textContent.length,Le=Math.min(O.start,qe),wt=O.end===void 0?Le:Math.min(O.end,qe);!G.extend&&Le>wt&&(v=wt,wt=Le,Le=v);var L=lg(S,Le),P=lg(S,wt);if(L&&P&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==P.node||G.focusOffset!==P.offset)){var H=ie.createRange();H.setStart(L.node,L.offset),G.removeAllRanges(),Le>wt?(G.addRange(H),G.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),G.addRange(H))}}}}for(ie=[],G=S;G=G.parentNode;)G.nodeType===1&&ie.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ie.length;S++){var ne=ie[S];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}sc=!!ed,td=ed=null}finally{_t=h,W.p=o,V.T=a}}t.current=i,gn=2}}function Sy(){if(gn===2){gn=0;var t=jr,i=Ma,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var o=W.p;W.p=2;var h=_t;_t|=4;try{ey(t,i.alternate,i)}finally{_t=h,W.p=o,V.T=a}}gn=3}}function Ay(){if(gn===4||gn===3){gn=0,ye();var t=jr,i=Ma,a=Va,o=hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?gn=5:(gn=0,Ma=jr=null,wy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ur=null),Fi(a),i=i.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(ve,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=V.T,h=W.p,W.p=2,V.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var S=o[v];d(S.value,{componentStack:S.stack})}}finally{V.T=i,W.p=h}}(Va&3)!==0&&Qu(),zi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===jf?el++:(el=0,jf=t):el=0,tl(0)}}function wy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Mo(i)))}function Qu(t){return Ty(),Sy(),Ay(),Ry()}function Ry(){if(gn!==5)return!1;var t=jr,i=Lf;Lf=0;var a=Fi(Va),o=V.T,h=W.p;try{W.p=32>a?32:a,V.T=null,a=Uf,Uf=null;var d=jr,v=Va;if(gn=0,Ma=jr=null,Va=0,(_t&6)!==0)throw Error(s(331));var S=_t;if(_t|=4,uy(d.current),ay(d,d.current,v,a),_t=S,tl(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(ve,d)}catch{}return!0}finally{W.p=h,V.T=o,wy(t,i)}}function Iy(t,i,a){i=Jn(a,i),i=_f(t.stateNode,i,2),t=Dr(t,i,2),t!==null&&(Nn(t,2),zi(t))}function It(t,i,a){if(t.tag===3)Iy(t,t,a);else for(;i!==null;){if(i.tag===3){Iy(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ur===null||!Ur.has(o))){t=Jn(a,t),a=xp(2),o=Dr(i,a,2),o!==null&&(Op(a,o,i,t),Nn(o,2),zi(o));break}}i=i.return}}function Ff(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new Xb;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Mf=!0,h.add(a),t=tT.bind(null,t,i,a),i.then(t,t))}function tT(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Nt===t&&(lt&a)===a&&(Lt===4||Lt===3&&(lt&62914560)===lt&&300>De()-zf?(_t&2)===0&&Pa(t,0):Vf|=a,ka===lt&&(ka=0)),zi(t)}function Ny(t,i){i===0&&(i=ui()),t=_a(t,i),t!==null&&(Nn(t,i),zi(t))}function nT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Ny(t,a)}function iT(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Ny(t,a)}function rT(t,i){return xe(t,i)}var Yu=null,La=null,Gf=!1,$u=!1,Kf=!1,Hs=0;function zi(t){t!==La&&t.next===null&&(La===null?Yu=La=t:La=La.next=t),$u=!0,Gf||(Gf=!0,aT())}function tl(t,i){if(!Kf&&$u){Kf=!0;do for(var a=!1,o=Yu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,S=o.pingedLanes;d=(1<<31-bt(42|t)+1)-1,d&=h&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Oy(o,d))}else d=lt,d=tn(o,o===Nt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||nn(o,d)||(a=!0,Oy(o,d));o=o.next}while(a);Kf=!1}}function sT(){Cy()}function Cy(){$u=Gf=!1;var t=0;Hs!==0&&(mT()&&(t=Hs),Hs=0);for(var i=De(),a=null,o=Yu;o!==null;){var h=o.next,d=Dy(o,i);d===0?(o.next=null,a===null?Yu=h:a.next=h,h===null&&(La=a)):(a=o,(t!==0||(d&3)!==0)&&($u=!0)),o=h}tl(t)}function Dy(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-bt(d),S=1<<v,O=h[v];O===-1?((S&a)===0||(S&o)!==0)&&(h[v]=Un(S,i)):O<=i&&(t.expiredLanes|=S),d&=~S}if(i=Nt,a=lt,a=tn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(vt===2||vt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ue(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||nn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&ue(o),Fi(a)){case 2:case 8:a=Je;break;case 32:a=ft;break;case 268435456:a=Ve;break;default:a=ft}return o=xy.bind(null,t),a=xe(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&ue(o),t.callbackPriority=2,t.callbackNode=null,2}function xy(t,i){if(gn!==0&&gn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Qu()&&t.callbackNode!==a)return null;var o=lt;return o=tn(t,t===Nt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(dy(t,o,i),Dy(t,De()),t.callbackNode!=null&&t.callbackNode===a?xy.bind(null,t):null)}function Oy(t,i){if(Qu())return null;dy(t,i,!0)}function aT(){pT(function(){(_t&6)!==0?xe(je,sT):Cy()})}function Qf(){return Hs===0&&(Hs=li()),Hs}function ky(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:aa(""+t)}function My(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function oT(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=ky((h[kt]||null).action),v=o.submitter;v&&(i=(i=v[kt]||null)?ky(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var S=new oa("action","action",null,o,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hs!==0){var O=v?My(h,v):new FormData(h);df(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(S.preventDefault(),O=v?My(h,v):new FormData(h),df(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var Yf=0;Yf<xh.length;Yf++){var $f=xh[Yf],lT=$f.toLowerCase(),uT=$f[0].toUpperCase()+$f.slice(1);pi(lT,"on"+uT)}pi(dg,"onAnimationEnd"),pi(mg,"onAnimationIteration"),pi(gg,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Rb,"onTransitionRun"),pi(Ib,"onTransitionStart"),pi(Nb,"onTransitionCancel"),pi(pg,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nl));function Vy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var S=o[v],O=S.instance,q=S.currentTarget;if(S=S.listener,O!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=q;try{d(h)}catch(ee){Pu(ee)}h.currentTarget=null,d=O}else for(v=0;v<o.length;v++){if(S=o[v],O=S.instance,q=S.currentTarget,S=S.listener,O!==d&&h.isPropagationStopped())break e;d=S,h.currentTarget=q;try{d(h)}catch(ee){Pu(ee)}h.currentTarget=null,d=O}}}}function it(t,i){var a=i[Tr];a===void 0&&(a=i[Tr]=new Set);var o=t+"__bubble";a.has(o)||(Py(i,t,2,!1),a.add(o))}function Xf(t,i,a){var o=0;i&&(o|=4),Py(a,t,o,i)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zf(t){if(!t[Xu]){t[Xu]=!0,mo.forEach(function(a){a!=="selectionchange"&&(cT.has(a)||Xf(a,!1,t),Xf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Xu]||(i[Xu]=!0,Xf("selectionchange",!1,i))}}function Py(t,i,a,o){switch(a_(i)){case 2:var h=zT;break;case 8:h=LT;break;default:h=hd}a=h.bind(null,i,a,t),h=void 0,!Zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Wf(t,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var S=o.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=o.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=Gi(S),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){o=d=v;continue e}S=S.parentNode}}o=o.return}Wl(function(){var q=d,ee=Xn(a),ie=[];e:{var F=yg.get(t);if(F!==void 0){var G=oa,qe=t;switch(t){case"keypress":if(Ni(a)===0)break e;case"keydown":case"keyup":G=da;break;case"focusin":qe="focus",G=ca;break;case"focusout":qe="blur",G=ca;break;case"beforeblur":case"afterblur":G=ca;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=au;break;case dg:case mg:case gg:G=ha;break;case pg:G=lu;break;case"scroll":case"scrollend":G=Jl;break;case"wheel":G=ma;break;case"copy":case"cut":case"paste":G=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Ro;break;case"toggle":case"beforetoggle":G=cu}var Le=(i&4)!==0,wt=!Le&&(t==="scroll"||t==="scrollend"),L=Le?F!==null?F+"Capture":null:F;Le=[];for(var P=q,H;P!==null;){var ne=P;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||L===null||(ne=bs(P,L),ne!=null&&Le.push(il(P,ne,H))),wt)break;P=P.return}0<Le.length&&(F=new G(F,qe,null,a,ee),ie.push({event:F,listeners:Le}))}}if((i&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",F&&a!==$i&&(qe=a.relatedTarget||a.fromElement)&&(Gi(qe)||qe[Cn]))break e;if((G||F)&&(F=ee.window===ee?ee:(F=ee.ownerDocument)?F.defaultView||F.parentWindow:window,G?(qe=a.relatedTarget||a.toElement,G=q,qe=qe?Gi(qe):null,qe!==null&&(wt=u(qe),Le=qe.tag,qe!==wt||Le!==5&&Le!==27&&Le!==6)&&(qe=null)):(G=null,qe=q),G!==qe)){if(Le=Wn,ne="onMouseLeave",L="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Le=Ro,ne="onPointerLeave",L="onPointerEnter",P="pointer"),wt=G==null?F:Ai(G),H=qe==null?F:Ai(qe),F=new Le(ne,P+"leave",G,a,ee),F.target=wt,F.relatedTarget=H,ne=null,Gi(ee)===q&&(Le=new Le(L,P+"enter",qe,a,ee),Le.target=H,Le.relatedTarget=wt,ne=Le),wt=ne,G&&qe)t:{for(Le=G,L=qe,P=0,H=Le;H;H=Ua(H))P++;for(H=0,ne=L;ne;ne=Ua(ne))H++;for(;0<P-H;)Le=Ua(Le),P--;for(;0<H-P;)L=Ua(L),H--;for(;P--;){if(Le===L||L!==null&&Le===L.alternate)break t;Le=Ua(Le),L=Ua(L)}Le=null}else Le=null;G!==null&&zy(ie,F,G,Le,!1),qe!==null&&wt!==null&&zy(ie,wt,qe,Le,!0)}}e:{if(F=q?Ai(q):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var we=ng;else if(Zt(F))if(ig)we=Sb;else{we=bb;var et=Eb}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&vo(q.elementType)&&(we=ng):we=Tb;if(we&&(we=we(t,q))){er(ie,we,a,ee);break e}et&&et(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&wr(F,"number",F.value)}switch(et=q?Ai(q):window,t){case"focusin":(Zt(et)||et.contentEditable==="true")&&(ga=et,Nh=q,Co=null);break;case"focusout":Co=Nh=ga=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,hg(ie,a,ee);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":hg(ie,a,ee)}var Oe;if(xi)e:{switch(t){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else at?Y(t,a)&&(Ue="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(_&&a.locale!=="ko"&&(at||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&at&&(Oe=bo()):(Ii=ee,Rr="value"in Ii?Ii.value:Ii.textContent,at=!0)),et=Zu(q,Ue),0<et.length&&(Ue=new Ao(Ue,t,null,a,ee),ie.push({event:Ue,listeners:et}),Oe?Ue.data=Oe:(Oe=de(a),Oe!==null&&(Ue.data=Oe)))),(Oe=m?Xt(t,a):ot(t,a))&&(Ue=Zu(q,"onBeforeInput"),0<Ue.length&&(et=new Ao("onBeforeInput","beforeinput",null,a,ee),ie.push({event:et,listeners:Ue}),et.data=Oe)),oT(ie,t,q,a,ee)}Vy(ie,i)})}function il(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Zu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=bs(t,a),h!=null&&o.unshift(il(t,h,d)),h=bs(t,i),h!=null&&o.push(il(t,h,d))),t.tag===3)return o;t=t.return}return[]}function Ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zy(t,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var S=a,O=S.alternate,q=S.stateNode;if(S=S.tag,O!==null&&O===o)break;S!==5&&S!==26&&S!==27||q===null||(O=q,h?(q=bs(a,d),q!=null&&v.unshift(il(a,q,O))):h||(q=bs(a,d),q!=null&&v.push(il(a,q,O)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var hT=/\r\n?/g,fT=/\u0000|\uFFFD/g;function Ly(t){return(typeof t=="string"?t:""+t).replace(hT,`
`).replace(fT,"")}function Uy(t,i){return i=Ly(i),Ly(t)===i}function Wu(){}function At(t,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||$n(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&$n(t,""+o);break;case"className":wi(t,"class",o);break;case"tabIndex":wi(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(t,a,o);break;case"style":_o(t,o,d);break;case"data":if(i!=="object"){wi(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=aa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&At(t,i,"name",h.name,h,null),At(t,i,"formEncType",h.formEncType,h,null),At(t,i,"formMethod",h.formMethod,h,null),At(t,i,"formTarget",h.formTarget,h,null)):(At(t,i,"encType",h.encType,h,null),At(t,i,"method",h.method,h,null),At(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=aa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Wu);break;case"onScroll":o!=null&&it("scroll",t);break;case"onScrollEnd":o!=null&&it("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=aa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":it("beforetoggle",t),it("toggle",t),Ar(t,"popover",o);break;case"xlinkActuate":fn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":fn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":fn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":fn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":fn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":fn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":fn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":fn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":fn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ar(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bh.get(a)||a,Ar(t,a,o))}}function Jf(t,i,a,o,h,d){switch(a){case"style":_o(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?$n(t,o):(typeof o=="number"||typeof o=="bigint")&&$n(t,""+o);break;case"onScroll":o!=null&&it("scroll",t);break;case"onScrollEnd":o!=null&&it("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ta.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Ar(t,a,o)}}}function pn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",t),it("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:At(t,i,d,v,a,null)}}h&&At(t,i,"srcSet",a.srcSet,a,null),o&&At(t,i,"src",a.src,a,null);return;case"input":it("invalid",t);var S=d=v=h=null,O=null,q=null;for(o in a)if(a.hasOwnProperty(o)){var ee=a[o];if(ee!=null)switch(o){case"name":h=ee;break;case"type":v=ee;break;case"checked":O=ee;break;case"defaultChecked":q=ee;break;case"value":d=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:At(t,i,o,ee,a,null)}}_s(t,d,S,O,q,v,h,!1),sa(t);return;case"select":it("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":o=S;default:At(t,i,h,S,a,null)}i=d,a=v,t.multiple=!!o,i!=null?Yi(t,!!o,i,!1):a!=null&&Yi(t,!!o,a,!0);return;case"textarea":it("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":o=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:At(t,i,v,S,a,null)}vs(t,o,h,d),sa(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(o=a[O],o!=null))switch(O){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:At(t,i,O,o,a,null)}return;case"dialog":it("beforetoggle",t),it("toggle",t),it("cancel",t),it("close",t);break;case"iframe":case"object":it("load",t);break;case"video":case"audio":for(o=0;o<nl.length;o++)it(nl[o],t);break;case"image":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"embed":case"source":case"link":it("error",t),it("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(o=a[q],o!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:At(t,i,q,o,a,null)}return;default:if(vo(i)){for(ee in a)a.hasOwnProperty(ee)&&(o=a[ee],o!==void 0&&Jf(t,i,ee,o,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(o=a[S],o!=null&&At(t,i,S,o,a,null))}function dT(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,S=null,O=null,q=null,ee=null;for(G in a){var ie=a[G];if(a.hasOwnProperty(G)&&ie!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(G)||At(t,i,G,null,o,ie)}}for(var F in o){var G=o[F];if(ie=a[F],o.hasOwnProperty(F)&&(G!=null||ie!=null))switch(F){case"type":d=G;break;case"name":h=G;break;case"checked":q=G;break;case"defaultChecked":ee=G;break;case"value":v=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==ie&&At(t,i,F,G,o,ie)}}jn(t,v,S,O,q,ee,d,h);return;case"select":G=v=S=F=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":G=O;default:o.hasOwnProperty(d)||At(t,i,d,null,o,O)}for(h in o)if(d=o[h],O=a[h],o.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":F=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==O&&At(t,i,h,d,o,O)}i=S,a=v,o=G,F!=null?Yi(t,!!a,F,!1):!!o!=!!a&&(i!=null?Yi(t,!!a,i,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:At(t,i,S,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":F=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&At(t,i,v,h,o,d)}Tt(t,F,G);return;case"option":for(var qe in a)if(F=a[qe],a.hasOwnProperty(qe)&&F!=null&&!o.hasOwnProperty(qe))switch(qe){case"selected":t.selected=!1;break;default:At(t,i,qe,null,o,F)}for(O in o)if(F=o[O],G=a[O],o.hasOwnProperty(O)&&F!==G&&(F!=null||G!=null))switch(O){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:At(t,i,O,F,o,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)F=a[Le],a.hasOwnProperty(Le)&&F!=null&&!o.hasOwnProperty(Le)&&At(t,i,Le,null,o,F);for(q in o)if(F=o[q],G=a[q],o.hasOwnProperty(q)&&F!==G&&(F!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:At(t,i,q,F,o,G)}return;default:if(vo(i)){for(var wt in a)F=a[wt],a.hasOwnProperty(wt)&&F!==void 0&&!o.hasOwnProperty(wt)&&Jf(t,i,wt,void 0,o,F);for(ee in o)F=o[ee],G=a[ee],!o.hasOwnProperty(ee)||F===G||F===void 0&&G===void 0||Jf(t,i,ee,F,o,G);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!o.hasOwnProperty(L)&&At(t,i,L,null,o,F);for(ie in o)F=o[ie],G=a[ie],!o.hasOwnProperty(ie)||F===G||F==null&&G==null||At(t,i,ie,F,o,G)}var ed=null,td=null;function Ju(t){return t.nodeType===9?t:t.ownerDocument}function jy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function By(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function nd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var id=null;function mT(){var t=window.event;return t&&t.type==="popstate"?t===id?!1:(id=t,!0):(id=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,pT=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(t){return qy.resolve(null).then(t).catch(yT)}:Hy;function yT(t){setTimeout(function(){throw t})}function Hr(t){return t==="head"}function Fy(t,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&rl(v.documentElement),a&2&&rl(v.body),a&4)for(a=v.head,rl(a),v=a.firstChild;v;){var S=v.nextSibling,O=v.nodeName;v[ms]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}if(h===0){t.removeChild(d),fl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);fl(i)}function rd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rd(a),Sr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function _T(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ms])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=_i(t.nextSibling),t===null)break}return null}function vT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=_i(t.nextSibling),t===null))return null;return t}function sd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function ET(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function _i(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var ad=null;function Gy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Ky(t,i,a){switch(i=Ju(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function rl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Sr(t)}var si=new Map,Qy=new Set;function ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dr=W.d;W.d={f:bT,r:TT,D:ST,C:AT,L:wT,m:RT,X:NT,S:IT,M:CT};function bT(){var t=dr.f(),i=Gu();return t||i}function TT(t){var i=Si(t);i!==null&&i.tag===5&&i.type==="form"?dp(i):dr.r(t)}var ja=typeof document>"u"?null:document;function Yy(t,i,a){var o=ja;if(o&&typeof i=="string"&&i){var h=Gt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Qy.has(h)||(Qy.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),pn(i,"link",t),jt(i),o.head.appendChild(i)))}}function ST(t){dr.D(t),Yy("dns-prefetch",t,null)}function AT(t,i){dr.C(t,i),Yy("preconnect",t,i)}function wT(t,i,a){dr.L(t,i,a);var o=ja;if(o&&t&&i){var h='link[rel="preload"][as="'+Gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Gt(a.imageSizes)+'"]')):h+='[href="'+Gt(t)+'"]';var d=h;switch(i){case"style":d=Ba(t);break;case"script":d=Ha(t)}si.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),si.set(d,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(sl(d))||i==="script"&&o.querySelector(al(d))||(i=o.createElement("link"),pn(i,"link",t),jt(i),o.head.appendChild(i)))}}function RT(t,i){dr.m(t,i);var a=ja;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Gt(o)+'"][href="'+Gt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ha(t)}if(!si.has(d)&&(t=A({rel:"modulepreload",href:t},i),si.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(al(d)))return}o=a.createElement("link"),pn(o,"link",t),jt(o),a.head.appendChild(o)}}}function IT(t,i,a){dr.S(t,i,a);var o=ja;if(o&&t){var h=Dn(o).hoistableStyles,d=Ba(t);i=i||"default";var v=h.get(d);if(!v){var S={loading:0,preload:null};if(v=o.querySelector(sl(d)))S.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=si.get(d))&&od(t,a);var O=v=o.createElement("link");jt(O),pn(O,"link",t),O._p=new Promise(function(q,ee){O.onload=q,O.onerror=ee}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,tc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(d,v)}}}function NT(t,i){dr.X(t,i);var a=ja;if(a&&t){var o=Dn(a).hoistableScripts,h=Ha(t),d=o.get(h);d||(d=a.querySelector(al(h)),d||(t=A({src:t,async:!0},i),(i=si.get(h))&&ld(t,i),d=a.createElement("script"),jt(d),pn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function CT(t,i){dr.M(t,i);var a=ja;if(a&&t){var o=Dn(a).hoistableScripts,h=Ha(t),d=o.get(h);d||(d=a.querySelector(al(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=si.get(h))&&ld(t,i),d=a.createElement("script"),jt(d),pn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function $y(t,i,a,o){var h=(h=K.current)?ec(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ba(a.href),a=Dn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ba(a.href);var d=Dn(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(sl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),si.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},si.set(t,a),d||DT(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ha(a),a=Dn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ba(t){return'href="'+Gt(t)+'"'}function sl(t){return'link[rel="stylesheet"]['+t+"]"}function Xy(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function DT(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),pn(i,"link",a),jt(i),t.head.appendChild(i))}function Ha(t){return'[src="'+Gt(t)+'"]'}function al(t){return"script[async]"+t}function Zy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(o)return i.instance=o,jt(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),jt(o),pn(o,"style",h),tc(o,a.precedence,t),i.instance=o;case"stylesheet":h=Ba(a.href);var d=t.querySelector(sl(h));if(d)return i.state.loading|=4,i.instance=d,jt(d),d;o=Xy(a),(h=si.get(h))&&od(o,h),d=(t.ownerDocument||t).createElement("link"),jt(d);var v=d;return v._p=new Promise(function(S,O){v.onload=S,v.onerror=O}),pn(d,"link",o),i.state.loading|=4,tc(d,a.precedence,t),i.instance=d;case"script":return d=Ha(a.src),(h=t.querySelector(al(d)))?(i.instance=h,jt(h),h):(o=a,(h=si.get(d))&&(o=A({},a),ld(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),jt(h),pn(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,tc(o,a.precedence,t));return i.instance}function tc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var S=o[v];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function od(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function ld(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var nc=null;function Wy(t,i,a){if(nc===null){var o=new Map,h=nc=new Map;h.set(a,o)}else h=nc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ms]||d[Pt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var S=o.get(v);S?S.push(d):o.set(v,[d])}}return o}function Jy(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function xT(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function e_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ol=null;function OT(){}function kT(t,i,a){if(ol===null)throw Error(s(475));var o=ol;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ba(a.href),d=t.querySelector(sl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=ic.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=d,jt(d);return}d=t.ownerDocument||t,a=Xy(a),(h=si.get(h))&&od(a,h),d=d.createElement("link"),jt(d);var v=d;v._p=new Promise(function(S,O){v.onload=S,v.onerror=O}),pn(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=ic.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function MT(){if(ol===null)throw Error(s(475));var t=ol;return t.stylesheets&&t.count===0&&ud(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&ud(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ic(){if(this.count--,this.count===0){if(this.stylesheets)ud(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rc=null;function ud(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rc=new Map,i.forEach(VT,t),rc=null,ic.call(t))}function VT(t,i){if(!(i.state.loading&4)){var a=rc.get(t);if(a)var o=a.get(null);else{a=new Map,rc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=ic.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var ll={$$typeof:_e,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function PT(t,i,a,o,h,d,v,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function t_(t,i,a,o,h,d,v,S,O,q,ee,ie){return t=new PT(t,i,a,v,S,O,q,ie),i=1,d===!0&&(i|=24),d=Hn(3,null,null,i),t.current=d,d.stateNode=t,i=qh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},Qh(d),t}function n_(t){return t?(t=va,t):va}function i_(t,i,a,o,h,d){h=n_(h),o.context===null?o.context=h:o.pendingContext=h,o=Cr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Dr(t,o,i),a!==null&&(Qn(a,t,i),Lo(a,t,i))}function r_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function cd(t,i){r_(t,i),(t=t.alternate)&&r_(t,i)}function s_(t){if(t.tag===13){var i=_a(t,67108864);i!==null&&Qn(i,t,67108864),cd(t,67108864)}}var sc=!0;function zT(t,i,a,o){var h=V.T;V.T=null;var d=W.p;try{W.p=2,hd(t,i,a,o)}finally{W.p=d,V.T=h}}function LT(t,i,a,o){var h=V.T;V.T=null;var d=W.p;try{W.p=8,hd(t,i,a,o)}finally{W.p=d,V.T=h}}function hd(t,i,a,o){if(sc){var h=fd(o);if(h===null)Wf(t,i,o,ac,a),o_(t,o);else if(jT(h,t,i,a,o))o.stopPropagation();else if(o_(t,o),i&4&&-1<UT.indexOf(t)){for(;h!==null;){var d=Si(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=tt(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var O=1<<31-bt(v);S.entanglements[1]|=O,v&=~O}zi(d),(_t&6)===0&&(qu=De()+500,tl(0))}}break;case 13:S=_a(d,2),S!==null&&Qn(S,d,2),Gu(),cd(d,2)}if(d=fd(o),d===null&&Wf(t,i,o,ac,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Wf(t,i,o,null,a)}}function fd(t){return t=Xn(t),dd(t)}var ac=null;function dd(t){if(ac=null,t=Gi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ac=t,null}function a_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case je:return 2;case Je:return 8;case ft:case Et:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var md=!1,qr=null,Fr=null,Gr=null,ul=new Map,cl=new Map,Kr=[],UT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o_(t,i){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":ul.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(i.pointerId)}}function hl(t,i,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Si(i),i!==null&&s_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function jT(t,i,a,o,h){switch(i){case"focusin":return qr=hl(qr,t,i,a,o,h),!0;case"dragenter":return Fr=hl(Fr,t,i,a,o,h),!0;case"mouseover":return Gr=hl(Gr,t,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return ul.set(d,hl(ul.get(d)||null,t,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,cl.set(d,hl(cl.get(d)||null,t,i,a,o,h)),!0}return!1}function l_(t){var i=Gi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,ds(t.priority,function(){if(a.tag===13){var o=Kn();o=Ft(o);var h=_a(a,o);h!==null&&Qn(h,a,o),cd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=fd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);$i=o,a.target.dispatchEvent(o),$i=null}else return i=Si(a),i!==null&&s_(i),t.blockedOn=a,!1;i.shift()}return!0}function u_(t,i,a){oc(t)&&a.delete(i)}function BT(){md=!1,qr!==null&&oc(qr)&&(qr=null),Fr!==null&&oc(Fr)&&(Fr=null),Gr!==null&&oc(Gr)&&(Gr=null),ul.forEach(u_),cl.forEach(u_)}function lc(t,i){t.blockedOn===i&&(t.blockedOn=null,md||(md=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,BT)))}var uc=null;function c_(t){uc!==t&&(uc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){uc===t&&(uc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(dd(o||a)===null)continue;break}var d=Si(a);d!==null&&(t.splice(i,3),i-=3,df(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function fl(t){function i(O){return lc(O,t)}qr!==null&&lc(qr,t),Fr!==null&&lc(Fr,t),Gr!==null&&lc(Gr,t),ul.forEach(i),cl.forEach(i);for(var a=0;a<Kr.length;a++){var o=Kr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Kr.length&&(a=Kr[0],a.blockedOn===null);)l_(a),a.blockedOn===null&&Kr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[kt]||null;if(typeof d=="function")v||c_(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[kt]||null)S=v.formAction;else if(dd(h)!==null)continue}else S=v.action;typeof S=="function"?a[o+1]=S:(a.splice(o,3),o-=3),c_(a)}}}function gd(t){this._internalRoot=t}cc.prototype.render=gd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Kn();i_(a,o,t,i,null,null)},cc.prototype.unmount=gd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;i_(t.current,2,null,t,null,null),Gu(),i[Cn]=null}};function cc(t){this._internalRoot=t}cc.prototype.unstable_scheduleHydration=function(t){if(t){var i=fi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Kr.length&&i!==0&&i<Kr[a].priority;a++);Kr.splice(a,0,t),a===0&&l_(t)}};var h_=e.version;if(h_!=="19.1.0")throw Error(s(527,h_,"19.1.0"));W.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var HT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{ve=hc.inject(HT),Ee=hc}catch{}}return ml.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Ip,d=Np,v=Cp,S=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=t_(t,1,!1,null,null,a,o,h,d,v,S,null),t[Cn]=i.current,Zf(t),new gd(i)},ml.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",d=Ip,v=Np,S=Cp,O=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=t_(t,1,!0,i,a??null,o,h,d,v,S,O,q),i.context=n_(null),a=i.current,o=Kn(),o=Ft(o),h=Cr(o),h.callback=null,Dr(a,h,o),a=o,i.current.lanes=a,Nn(i,a),zi(i),t[Cn]=i.current,Zf(t),new cc(i)},ml.version="19.1.0",ml}var b_;function JT(){if(b_)return _d.exports;b_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_d.exports=WT(),_d.exports}var eS=JT();const tS=()=>{};var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},nS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=r[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=r[n++],f=r[n++],g=r[n++],y=((l&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},e0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const u=r[l],f=l+1<r.length,g=f?r[l+1]:0,y=l+2<r.length,p=y?r[l+2]:0,A=u>>2,N=(u&3)<<4|g>>4;let k=(g&15)<<2|p>>6,Q=p&63;y||(Q=64,f||(k=64)),s.push(n[A],n[N],n[k],n[Q])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Jv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const u=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const p=l<r.length?n[r.charAt(l)]:64;++l;const N=l<r.length?n[r.charAt(l)]:64;if(++l,u==null||g==null||p==null||N==null)throw new iS;const k=u<<2|g>>4;if(s.push(k),p!==64){const Q=g<<4&240|p>>2;if(s.push(Q),N!==64){const te=p<<6&192|N;s.push(te)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rS=function(r){const e=Jv(r);return e0.encodeByteArray(e,!0)},xc=function(r){return rS(r).replace(/\./g,"")},t0=function(r){try{return e0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=()=>sS().__FIREBASE_DEFAULTS__,oS=()=>{if(typeof process>"u"||typeof T_>"u")return;const r=T_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},lS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&t0(r[1]);return e&&JSON.parse(e)},Wc=()=>{try{return tS()||aS()||oS()||lS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},n0=r=>{var e,n;return(n=(e=Wc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},uS=r=>{const e=n0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},i0=()=>{var r;return(r=Wc())===null||r===void 0?void 0:r.config},r0=r=>{var e;return(e=Wc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(r){return r.endsWith(".cloudworkstations.dev")}async function s0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[xc(JSON.stringify(n)),xc(JSON.stringify(f)),""].join(".")}const vl={};function fS(){const r={prod:[],emulator:[]};for(const e of Object.keys(vl))vl[e]?r.emulator.push(e):r.prod.push(e);return r}function dS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let S_=!1;function a0(r,e){if(typeof window>"u"||typeof document>"u"||!Ml(window.location.host)||vl[r]===e||vl[r]||S_)return;vl[r]=e;function n(k){return`__firebase__banner__${k}`}const s="__firebase__banner",u=fS().prod.length>0;function f(){const k=document.getElementById(s);k&&k.remove()}function g(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function y(k,Q){k.setAttribute("width","24"),k.setAttribute("id",Q),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function p(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{S_=!0,f()},k}function A(k,Q){k.setAttribute("id",Q),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function N(){const k=dS(s),Q=n("text"),te=document.getElementById(Q)||document.createElement("span"),fe=n("learnmore"),re=document.getElementById(fe)||document.createElement("a"),Re=n("preprendIcon"),Ne=document.getElementById(Re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const _e=k.element;g(_e),A(re,fe);const Fe=p();y(Ne,Re),_e.append(Ne,te,re,Fe),document.body.appendChild(_e)}u?(te.innerText="Preview backend disconnected.",Ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,te.innerText="Preview backend running in this workspace."),te.setAttribute("id",Q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function gS(){var r;const e=(r=Wc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vS(){const r=Rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ES(){return!gS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bS(){try{return typeof indexedDB=="object"}catch{return!1}}function TS(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="FirebaseError";class br extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=SS,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?AS(u,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new br(l,g,s)}}function AS(r,e){return r.replace(wS,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const wS=/\{\$([^}]+)}/g;function RS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Qs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const u=r[l],f=e[l];if(A_(u)&&A_(f)){if(!Qs(u,f))return!1}else if(u!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function A_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function IS(r,e){const n=new NS(r,e);return n.subscribe.bind(n)}class NS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");CS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Td),l.error===void 0&&(l.error=Td),l.complete===void 0&&(l.complete=Td);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CS(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Td(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(r){return r&&r._delegate?r._delegate:r}class Ys{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new cS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OS(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(l,u);const f=this.instances.get(l);return f&&e(f,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xS(r){return r===qs?void 0:r}function OS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new DS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(rt||(rt={}));const MS={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},VS=rt.INFO,PS={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},zS=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=PS[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=VS,this._logHandler=zS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const LS=(r,e)=>e.some(n=>r instanceof n);let w_,R_;function US(){return w_||(w_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jS(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o0=new WeakMap,Md=new WeakMap,l0=new WeakMap,Sd=new WeakMap,lm=new WeakMap;function BS(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Jr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&o0.set(n,r)}).catch(()=>{}),lm.set(e,r),e}function HS(r){if(Md.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Md.set(r,e)}let Vd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Md.get(r);if(e==="objectStoreNames")return r.objectStoreNames||l0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function qS(r){Vd=r(Vd)}function FS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Ad(this),e,...n);return l0.set(s,e.sort?e.sort():[e]),Jr(s)}:jS().includes(r)?function(...e){return r.apply(Ad(this),e),Jr(o0.get(this))}:function(...e){return Jr(r.apply(Ad(this),e))}}function GS(r){return typeof r=="function"?FS(r):(r instanceof IDBTransaction&&HS(r),LS(r,US())?new Proxy(r,Vd):r)}function Jr(r){if(r instanceof IDBRequest)return BS(r);if(Sd.has(r))return Sd.get(r);const e=GS(r);return e!==r&&(Sd.set(r,e),lm.set(e,r)),e}const Ad=r=>lm.get(r);function KS(r,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const f=indexedDB.open(r,e),g=Jr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Jr(f.result),y.oldVersion,y.newVersion,Jr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const QS=["get","getKey","getAll","getAllKeys","count"],YS=["put","add","delete","clear"],wd=new Map;function I_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=YS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||QS.includes(n)))return;const u=async function(f,...g){const y=this.transaction(f,l?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),l&&y.done]))[0]};return wd.set(e,u),u}qS(r=>({...r,get:(e,n,s)=>I_(e,n)||r.get(e,n,s),has:(e,n)=>!!I_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function XS(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",N_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new om("@firebase/app"),ZS="@firebase/app-compat",WS="@firebase/analytics-compat",JS="@firebase/analytics",eA="@firebase/app-check-compat",tA="@firebase/app-check",nA="@firebase/auth",iA="@firebase/auth-compat",rA="@firebase/database",sA="@firebase/data-connect",aA="@firebase/database-compat",oA="@firebase/functions",lA="@firebase/functions-compat",uA="@firebase/installations",cA="@firebase/installations-compat",hA="@firebase/messaging",fA="@firebase/messaging-compat",dA="@firebase/performance",mA="@firebase/performance-compat",gA="@firebase/remote-config",pA="@firebase/remote-config-compat",yA="@firebase/storage",_A="@firebase/storage-compat",vA="@firebase/firestore",EA="@firebase/ai",bA="@firebase/firestore-compat",TA="firebase",SA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",AA={[Pd]:"fire-core",[ZS]:"fire-core-compat",[JS]:"fire-analytics",[WS]:"fire-analytics-compat",[tA]:"fire-app-check",[eA]:"fire-app-check-compat",[nA]:"fire-auth",[iA]:"fire-auth-compat",[rA]:"fire-rtdb",[sA]:"fire-data-connect",[aA]:"fire-rtdb-compat",[oA]:"fire-fn",[lA]:"fire-fn-compat",[uA]:"fire-iid",[cA]:"fire-iid-compat",[hA]:"fire-fcm",[fA]:"fire-fcm-compat",[dA]:"fire-perf",[mA]:"fire-perf-compat",[gA]:"fire-rc",[pA]:"fire-rc-compat",[yA]:"fire-gcs",[_A]:"fire-gcs-compat",[vA]:"fire-fst",[bA]:"fire-fst-compat",[EA]:"fire-vertex","fire-js":"fire-js",[TA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,wA=new Map,Ld=new Map;function C_(r,e){try{r.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Za(r){const e=r.name;if(Ld.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Ld.set(e,r);for(const n of Oc.values())C_(n,r);for(const n of wA.values())C_(n,r);return!0}function um(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function vi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new Vl("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=SA;function u0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:zd,automaticDataCollectionEnabled:!0},e),l=s.name;if(typeof l!="string"||!l)throw es.create("bad-app-name",{appName:String(l)});if(n||(n=i0()),!n)throw es.create("no-options");const u=Oc.get(l);if(u){if(Qs(n,u.options)&&Qs(s,u.config))return u;throw es.create("duplicate-app",{appName:l})}const f=new kS(l);for(const y of Ld.values())f.addComponent(y);const g=new IA(n,s,f);return Oc.set(l,g),g}function c0(r=zd){const e=Oc.get(r);if(!e&&r===zd&&i0())return u0();if(!e)throw es.create("no-app",{appName:r});return e}function ts(r,e,n){var s;let l=(s=AA[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const u=l.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const g=[`Unable to register library "${l}" with version "${e}":`];u&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(g.join(" "));return}Za(new Ys(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="firebase-heartbeat-database",CA=1,wl="firebase-heartbeat-store";let Rd=null;function h0(){return Rd||(Rd=KS(NA,CA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(wl)}catch(n){console.warn(n)}}}}).catch(r=>{throw es.create("idb-open",{originalErrorMessage:r.message})})),Rd}async function DA(r){try{const n=(await h0()).transaction(wl),s=await n.objectStore(wl).get(f0(r));return await n.done,s}catch(e){if(e instanceof br)yr.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function D_(r,e){try{const s=(await h0()).transaction(wl,"readwrite");await s.objectStore(wl).put(e,f0(r)),await s.done}catch(n){if(n instanceof br)yr.warn(n.message);else{const s=es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(s.message)}}}function f0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1024,OA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=x_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>OA){const f=PA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){yr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x_(),{heartbeatsToSend:s,unsentEntries:l}=MA(this._heartbeatsCache.heartbeats),u=xc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return yr.warn(n),""}}}function x_(){return new Date().toISOString().substring(0,10)}function MA(r,e=xA){const n=[];let s=r.slice();for(const l of r){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),O_(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),O_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class VA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bS()?TS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return D_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return D_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function O_(r){return xc(JSON.stringify({version:2,heartbeats:r})).length}function PA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(r){Za(new Ys("platform-logger",e=>new $S(e),"PRIVATE")),Za(new Ys("heartbeat",e=>new kA(e),"PRIVATE")),ts(Pd,N_,r),ts(Pd,N_,"esm2017"),ts("fire-js","")}zA("");var LA="firebase",UA="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ts(LA,UA,"app");function cm(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function d0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jA=d0,m0=new Vl("auth","Firebase",d0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new om("@firebase/auth");function BA(r,...e){kc.logLevel<=rt.WARN&&kc.warn(`Auth (${ao}): ${r}`,...e)}function Ec(r,...e){kc.logLevel<=rt.ERROR&&kc.error(`Auth (${ao}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(r,...e){throw fm(r,...e)}function bi(r,...e){return fm(r,...e)}function hm(r,e,n){const s=Object.assign(Object.assign({},jA()),{[e]:n});return new Vl("auth","Firebase",s).create(e,{appName:r.name})}function Ks(r){return hm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HA(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Hi(r,"argument-error"),hm(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return m0.create(r,...e)}function Ge(r,e,...n){if(!r)throw fm(e,...n)}function gr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ec(e),new Error(e)}function _r(r,e){r||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function qA(){return k_()==="http:"||k_()==="https:"}function k_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qA()||yS()||"connection"in navigator)?navigator.onLine:!0}function GA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=mS()||_S()}get(){return FA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(r,e){_r(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YA=new zl(3e4,6e4);function mm(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function oo(r,e,n,s,l={}){return p0(r,l,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const g=Pl(Object.assign({key:r.config.apiKey},f)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const p=Object.assign({method:e,headers:y},u);return pS()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&Ml(r.emulatorConfig.host)&&(p.credentials="include"),g0.fetch()(await y0(r,r.config.apiHost,n,g),p)})}async function p0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},KA),e);try{const l=new XA(r),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw fc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(r,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw fc(r,"email-already-in-use",f);if(y==="USER_DISABLED")throw fc(r,"user-disabled",f);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw hm(r,A,p);Hi(r,A)}}catch(l){if(l instanceof br)throw l;Hi(r,"network-request-failed",{message:String(l)})}}async function $A(r,e,n,s,l={}){const u=await oo(r,e,n,s,l);return"mfaPendingCredential"in u&&Hi(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function y0(r,e,n,s){const l=`${e}${n}?${s}`,u=r,f=u.config.emulator?dm(r.config,l):`${r.config.apiScheme}://${l}`;return QA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class XA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(bi(this.auth,"network-request-failed")),YA.get())})}}function fc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=bi(r,e,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(r,e){return oo(r,"POST","/v1/accounts:delete",e)}async function Mc(r,e){return oo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WA(r,e=!1){const n=hn(r),s=await n.getIdToken(e),l=gm(s);Ge(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:s,authTime:El(Id(l.auth_time)),issuedAtTime:El(Id(l.iat)),expirationTime:El(Id(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Id(r){return Number(r)*1e3}function gm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const l=t0(n);return l?JSON.parse(l):(Ec("Failed to decode base64 JWT payload"),null)}catch(l){return Ec("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function M_(r){const e=gm(r);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof br&&JA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function JA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=El(this.lastLoginAt),this.creationTime=El(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(r){var e;const n=r.auth,s=await r.getIdToken(),l=await Rl(r,Mc(n,{idToken:s}));Ge(l==null?void 0:l.users.length,n,"internal-error");const u=l.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?_0(u.providerUserInfo):[],g=n1(r.providerData,f),y=r.isAnonymous,p=!(r.email&&u.passwordHash)&&!(g!=null&&g.length),A=y?p:!1,N={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new jd(u.createdAt,u.lastLoginAt),isAnonymous:A};Object.assign(r,N)}async function t1(r){const e=hn(r);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n1(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function _0(r){return r.map(e=>{var{providerId:n}=e,s=cm(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(r,e){const n=await p0(r,{},async()=>{const s=Pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=r.config,f=await y0(r,l,"/v1/token",`key=${u}`),g=await r._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",g0.fetch()(f,{method:"POST",headers:g,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function r1(r,e){return oo(r,"POST","/v2/accounts:revokeToken",mm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=M_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:u}=await i1(e,n);this.updateTokensAndExpiration(s,l,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:u}=n,f=new Qa;return s&&(Ge(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),l&&(Ge(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(Ge(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){Ge(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ei{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,u=cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new e1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new jd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Rl(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WA(this,e)}reload(){return t1(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await Rl(this,ZA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,u,f,g,y,p,A;const N=(s=n.displayName)!==null&&s!==void 0?s:void 0,k=(l=n.email)!==null&&l!==void 0?l:void 0,Q=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,te=(f=n.photoURL)!==null&&f!==void 0?f:void 0,fe=(g=n.tenantId)!==null&&g!==void 0?g:void 0,re=(y=n._redirectEventId)!==null&&y!==void 0?y:void 0,Re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,Ne=(A=n.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:_e,emailVerified:Fe,isAnonymous:Ie,providerData:Ce,stsTokenManager:M}=n;Ge(_e&&M,e,"internal-error");const E=Qa.fromJSON(this.name,M);Ge(typeof _e=="string",e,"internal-error"),Yr(N,e.name),Yr(k,e.name),Ge(typeof Fe=="boolean",e,"internal-error"),Ge(typeof Ie=="boolean",e,"internal-error"),Yr(Q,e.name),Yr(te,e.name),Yr(fe,e.name),Yr(re,e.name),Yr(Re,e.name),Yr(Ne,e.name);const T=new Ei({uid:_e,auth:e,email:k,emailVerified:Fe,displayName:N,isAnonymous:Ie,photoURL:te,phoneNumber:Q,tenantId:fe,stsTokenManager:E,createdAt:Re,lastLoginAt:Ne});return Ce&&Array.isArray(Ce)&&(T.providerData=Ce.map(I=>Object.assign({},I))),re&&(T._redirectEventId=re),T}static async _fromIdTokenResponse(e,n,s=!1){const l=new Qa;l.updateFromServerResponse(n);const u=new Ei({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Vc(u),u}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Ge(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?_0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),g=new Qa;g.updateFromIdToken(s);const y=new Ei({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new jd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function pr(r){_r(r instanceof Function,"Expected a class definition");let e=V_.get(r);return e?(_r(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,V_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}v0.type="NONE";const P_=v0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ya{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:u}=this.auth;this.fullUserKey=bc(this.userKey,l.apiKey,u),this.fullPersistenceKey=bc("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mc(this.auth,{idToken:e}).catch(()=>{});return n?Ei._fromGetAccountInfoResponse(this.auth,n,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ya(pr(P_),e,s);const l=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=l[0]||pr(P_);const f=bc(s,e.config.apiKey,e.name);let g=null;for(const p of n)try{const A=await p._get(f);if(A){let N;if(typeof A=="string"){const k=await Mc(e,{idToken:A}).catch(()=>{});if(!k)break;N=await Ei._fromGetAccountInfoResponse(e,k,A)}else N=Ei._fromJSON(e,A);p!==u&&(g=N),u=p;break}}catch{}const y=l.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Ya(u,e,s):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new Ya(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w0(e))return"Blackberry";if(R0(e))return"Webos";if(b0(e))return"Safari";if((e.includes("chrome/")||T0(e))&&!e.includes("edge/"))return"Chrome";if(A0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function E0(r=Rn()){return/firefox\//i.test(r)}function b0(r=Rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T0(r=Rn()){return/crios\//i.test(r)}function S0(r=Rn()){return/iemobile/i.test(r)}function A0(r=Rn()){return/android/i.test(r)}function w0(r=Rn()){return/blackberry/i.test(r)}function R0(r=Rn()){return/webos/i.test(r)}function pm(r=Rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function s1(r=Rn()){var e;return pm(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function a1(){return vS()&&document.documentMode===10}function I0(r=Rn()){return pm(r)||A0(r)||R0(r)||w0(r)||/windows phone/i.test(r)||S0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(r,e=[]){let n;switch(r){case"Browser":n=z_(Rn());break;case"Worker":n=`${z_(Rn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(r,e={}){return oo(r,"GET","/v2/passwordPolicy",mm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=6;class c1{constructor(e){var n,s,l,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:u1,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,u,f,g;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(n=y.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),y.isValid&&(y.isValid=(s=y.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(l=y.containsLowercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(u=y.containsUppercaseLetter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(f=y.containsNumericCharacter)!==null&&f!==void 0?f:!0),y.isValid&&(y.isValid=(g=y.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),y}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new o1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var s,l,u;if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mc(this,{idToken:e}),s=await Ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===g)&&(y!=null&&y.user)&&(l=y.user,u=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(Ks(this));const n=e?hn(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l1(this),n=new c1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await r1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,l);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&BA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jc(r){return hn(r)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=IS(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f1(r){ym=r}function d1(r){return ym.loadJS(r)}function m1(){return ym.gapiScript}function g1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(r,e){const n=um(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Qs(u,e??{}))return l;Hi(l,"already-initialized")}return n.initialize({options:e})}function y1(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function _1(r,e,n){const s=Jc(r);Ge(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,u=C0(e),{host:f,port:g}=v1(e),y=g===null?"":`:${g}`,p={url:`${u}//${f}${y}/`},A=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Ge(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ge(Qs(p,s.config.emulator)&&Qs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,Ml(f)?(s0(`${u}//${f}${y}`),a0("Auth",!0)):E1()}function C0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function v1(r){const e=C0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const u=l[1];return{host:u,port:U_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:U_(f)}}}function U_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function E1(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(r,e){return $A(r,"POST","/v1/accounts:signInWithIdp",mm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="http://localhost";class $s extends D0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,u=cm(n,["providerId","signInMethod"]);if(!s||!l)return null;const f=new $s(s,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return $a(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,$a(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$a(e,n)}buildRequest(){const e={requestUri:b1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends _m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Ll{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return mr.credential(n,s)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Ll{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Ll{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const u=await Ei._fromIdTokenResponse(e,s,l),f=j_(s);return new Wa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=j_(s);return new Wa({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function j_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends br{constructor(e,n,s,l){var u;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Pc(e,n,s,l)}}function x0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(r,u,e,s):u})}async function T1(r,e,n=!1){const s=await Rl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Wa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(r,e,n=!1){const{auth:s}=r;if(vi(s.app))return Promise.reject(Ks(s));const l="reauthenticate";try{const u=await Rl(r,x0(s,l,e,r),n);Ge(u.idToken,s,"internal-error");const f=gm(u.idToken);Ge(f,s,"internal-error");const{sub:g}=f;return Ge(r.uid===g,s,"user-mismatch"),Wa._forOperation(r,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Hi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(r,e,n=!1){if(vi(r.app))return Promise.reject(Ks(r));const s="signIn",l=await x0(r,s,e),u=await Wa._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(u.user),u}function w1(r,e,n,s){return hn(r).onIdTokenChanged(e,n,s)}function R1(r,e,n){return hn(r).beforeAuthStateChanged(e,n)}function I1(r,e,n,s){return hn(r).onAuthStateChanged(e,n,s)}function N1(r){return hn(r).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=1e3,D1=10;class k0 extends O0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);a1()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,D1):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},C1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k0.type="LOCAL";const x1=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends O0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}M0.type="SESSION";const V0=M0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new eh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(f).map(async p=>p(n.origin,u)),y=await O1(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const p=vm("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(N){const k=N;if(k.data.eventId===p)switch(k.data.status){case"ack":clearTimeout(A),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(k.data.response);break;default:clearTimeout(A),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function M1(r){Ui().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function V1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function z1(){return P0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firebaseLocalStorageDb",L1=1,Lc="firebaseLocalStorage",L0="fbase_key";class Ul{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function th(r,e){return r.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function U1(){const r=indexedDB.deleteDatabase(z0);return new Ul(r).toPromise()}function Bd(){const r=indexedDB.open(z0,L1);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Lc,{keyPath:L0})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Lc)?e(s):(s.close(),await U1(),e(await Bd()))})})}async function B_(r,e,n){const s=th(r,!0).put({[L0]:e,value:n});return new Ul(s).toPromise()}async function j1(r,e){const n=th(r,!1).get(e),s=await new Ul(n).toPromise();return s===void 0?null:s.value}function H_(r,e){const n=th(r,!0).delete(e);return new Ul(n).toPromise()}const B1=800,H1=3;class U0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>H1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(z1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await V1(),!this.activeServiceWorker)return;this.sender=new k1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bd();return await B_(e,zc,"1"),await H_(e,zc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>B_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>j1(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=th(l,!1).getAll();return new Ul(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U0.type="LOCAL";const q1=U0;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(r,e){return e?pr(e):(Ge(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends D0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F1(r){return A1(r.auth,new Em(r),r.bypassAuthState)}function G1(r){const{auth:e,user:n}=r;return Ge(n,e,"internal-error"),S1(n,new Em(r),r.bypassAuthState)}async function K1(r){const{auth:e,user:n}=r;return Ge(n,e,"internal-error"),T1(n,new Em(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n,s,l,u=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F1;case"linkViaPopup":case"linkViaRedirect":return K1;case"reauthViaPopup":case"reauthViaRedirect":return G1;default:Hi(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new zl(2e3,1e4);async function Y1(r,e,n){if(vi(r.app))return Promise.reject(bi(r,"operation-not-supported-in-this-environment"));const s=Jc(r);HA(r,e,_m);const l=j0(s,n);return new Fs(s,"signInViaPopup",e,l).executeNotNull()}class Fs extends B0{constructor(e,n,s,l,u){super(e,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q1.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="pendingRedirect",Tc=new Map;class X1 extends B0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Tc.get(this.auth._key());if(!e){try{const s=await Z1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Tc.set(this.auth._key(),e)}return this.bypassAuthState||Tc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z1(r,e){const n=ew(e),s=J1(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function W1(r,e){Tc.set(r._key(),e)}function J1(r){return pr(r._redirectPersistence)}function ew(r){return bc($1,r.config.apiKey,r.name)}async function tw(r,e,n=!1){if(vi(r.app))return Promise.reject(Ks(r));const s=Jc(r),l=j0(s,e),f=await new X1(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=10*60*1e3;class iw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!H0(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nw&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function H0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(r,e={}){return oo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ow=/^https?/;async function lw(r){if(r.config.emulator)return;const{authorizedDomains:e}=await sw(r);for(const n of e)try{if(uw(n))return}catch{}Hi(r,"unauthorized-domain")}function uw(r){const e=Ud(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!ow.test(n))return!1;if(aw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new zl(3e4,6e4);function F_(){const r=Ui().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function hw(r){return new Promise((e,n)=>{var s,l,u;function f(){F_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(bi(r,"network-request-failed"))},timeout:cw.get()})}if(!((l=(s=Ui().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((u=Ui().gapi)===null||u===void 0)&&u.load)f();else{const g=g1("iframefcb");return Ui()[g]=()=>{gapi.load?f():n(bi(r,"network-request-failed"))},d1(`${m1()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function fw(r){return Sc=Sc||hw(r),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new zl(5e3,15e3),mw="__/auth/iframe",gw="emulator/auth/iframe",pw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _w(r){const e=r.config;Ge(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?dm(e,gw):`https://${r.config.authDomain}/${mw}`,s={apiKey:e.apiKey,appName:r.name,v:ao},l=yw.get(r.config.apiHost);l&&(s.eid=l);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Pl(s).slice(1)}`}async function vw(r){const e=await fw(r),n=Ui().gapi;return Ge(n,r,"internal-error"),e.open({where:document.body,url:_w(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pw,dontclear:!0},s=>new Promise(async(l,u)=>{await s.restyle({setHideOnLeave:!1});const f=bi(r,"network-request-failed"),g=Ui().setTimeout(()=>{u(f)},dw.get());function y(){Ui().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bw=500,Tw=600,Sw="_blank",Aw="http://localhost";class G_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ww(r,e,n,s=bw,l=Tw){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y=Object.assign(Object.assign({},Ew),{width:s.toString(),height:l.toString(),top:u,left:f}),p=Rn().toLowerCase();n&&(g=T0(p)?Sw:n),E0(p)&&(e=e||Aw,y.scrollbars="yes");const A=Object.entries(y).reduce((k,[Q,te])=>`${k}${Q}=${te},`,"");if(s1(p)&&g!=="_self")return Rw(e||"",g),new G_(null);const N=window.open(e||"",g,A);Ge(N,r,"popup-blocked");try{N.focus()}catch{}return new G_(N)}function Rw(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="__/auth/handler",Nw="emulator/auth/handler",Cw=encodeURIComponent("fac");async function K_(r,e,n,s,l,u){Ge(r.config.authDomain,r,"auth-domain-config-required"),Ge(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ao,eventId:l};if(e instanceof _m){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",RS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[A,N]of Object.entries({}))f[A]=N}if(e instanceof Ll){const A=e.getScopes().filter(N=>N!=="");A.length>0&&(f.scopes=A.join(","))}r.tenantId&&(f.tid=r.tenantId);const g=f;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const y=await r._getAppCheckToken(),p=y?`#${Cw}=${encodeURIComponent(y)}`:"";return`${Dw(r)}?${Pl(g).slice(1)}${p}`}function Dw({config:r}){return r.emulator?dm(r,Nw):`https://${r.authDomain}/${Iw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="webStorageSupport";class xw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V0,this._completeRedirectFn=tw,this._overrideRedirectResult=W1}async _openPopup(e,n,s,l){var u;_r((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await K_(e,n,s,Ud(),l);return ww(e,f,vm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const u=await K_(e,n,s,Ud(),l);return M1(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(_r(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await vw(e),s=new iw(e);return n.register("authEvent",l=>(Ge(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nd,{type:Nd},l=>{var u;const f=(u=l==null?void 0:l[0])===null||u===void 0?void 0:u[Nd];f!==void 0&&n(!!f),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I0()||b0()||pm()}}const Ow=xw;var Q_="@firebase/auth",Y_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vw(r){Za(new Ys("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=s.options;Ge(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N0(r)},p=new h1(s,l,u,y);return y1(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Za(new Ys("auth-internal",e=>{const n=Jc(e.getProvider("auth").getImmediate());return(s=>new kw(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ts(Q_,Y_,Mw(r)),ts(Q_,Y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=5*60,zw=r0("authIdTokenMaxAge")||Pw;let $_=null;const Lw=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>zw)return;const l=n==null?void 0:n.token;$_!==l&&($_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Uw(r=c0()){const e=um(r,"auth");if(e.isInitialized())return e.getImmediate();const n=p1(r,{popupRedirectResolver:Ow,persistence:[q1,x1,V0]}),s=r0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=Lw(u.toString());R1(n,f,()=>f(n.currentUser)),w1(n,g=>f(g))}}const l=n0("auth");return l&&_1(n,`http://${l}`),n}function jw(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}f1({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const u=bi("internal-error");u.customData=l,n(u)},s.type="text/javascript",s.charset="UTF-8",jw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vw("Browser");var X_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,q0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,E){function T(){}T.prototype=E.prototype,M.D=E.prototype,M.prototype=new T,M.prototype.constructor=M,M.C=function(I,C,x){for(var b=Array(arguments.length-2),$=2;$<arguments.length;$++)b[$-2]=arguments[$];return E.prototype[C].apply(I,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,E,T){T||(T=0);var I=Array(16);if(typeof E=="string")for(var C=0;16>C;++C)I[C]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(C=0;16>C;++C)I[C]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=M.g[0],T=M.g[1],C=M.g[2];var x=M.g[3],b=E+(x^T&(C^x))+I[0]+3614090360&4294967295;E=T+(b<<7&4294967295|b>>>25),b=x+(C^E&(T^C))+I[1]+3905402710&4294967295,x=E+(b<<12&4294967295|b>>>20),b=C+(T^x&(E^T))+I[2]+606105819&4294967295,C=x+(b<<17&4294967295|b>>>15),b=T+(E^C&(x^E))+I[3]+3250441966&4294967295,T=C+(b<<22&4294967295|b>>>10),b=E+(x^T&(C^x))+I[4]+4118548399&4294967295,E=T+(b<<7&4294967295|b>>>25),b=x+(C^E&(T^C))+I[5]+1200080426&4294967295,x=E+(b<<12&4294967295|b>>>20),b=C+(T^x&(E^T))+I[6]+2821735955&4294967295,C=x+(b<<17&4294967295|b>>>15),b=T+(E^C&(x^E))+I[7]+4249261313&4294967295,T=C+(b<<22&4294967295|b>>>10),b=E+(x^T&(C^x))+I[8]+1770035416&4294967295,E=T+(b<<7&4294967295|b>>>25),b=x+(C^E&(T^C))+I[9]+2336552879&4294967295,x=E+(b<<12&4294967295|b>>>20),b=C+(T^x&(E^T))+I[10]+4294925233&4294967295,C=x+(b<<17&4294967295|b>>>15),b=T+(E^C&(x^E))+I[11]+2304563134&4294967295,T=C+(b<<22&4294967295|b>>>10),b=E+(x^T&(C^x))+I[12]+1804603682&4294967295,E=T+(b<<7&4294967295|b>>>25),b=x+(C^E&(T^C))+I[13]+4254626195&4294967295,x=E+(b<<12&4294967295|b>>>20),b=C+(T^x&(E^T))+I[14]+2792965006&4294967295,C=x+(b<<17&4294967295|b>>>15),b=T+(E^C&(x^E))+I[15]+1236535329&4294967295,T=C+(b<<22&4294967295|b>>>10),b=E+(C^x&(T^C))+I[1]+4129170786&4294967295,E=T+(b<<5&4294967295|b>>>27),b=x+(T^C&(E^T))+I[6]+3225465664&4294967295,x=E+(b<<9&4294967295|b>>>23),b=C+(E^T&(x^E))+I[11]+643717713&4294967295,C=x+(b<<14&4294967295|b>>>18),b=T+(x^E&(C^x))+I[0]+3921069994&4294967295,T=C+(b<<20&4294967295|b>>>12),b=E+(C^x&(T^C))+I[5]+3593408605&4294967295,E=T+(b<<5&4294967295|b>>>27),b=x+(T^C&(E^T))+I[10]+38016083&4294967295,x=E+(b<<9&4294967295|b>>>23),b=C+(E^T&(x^E))+I[15]+3634488961&4294967295,C=x+(b<<14&4294967295|b>>>18),b=T+(x^E&(C^x))+I[4]+3889429448&4294967295,T=C+(b<<20&4294967295|b>>>12),b=E+(C^x&(T^C))+I[9]+568446438&4294967295,E=T+(b<<5&4294967295|b>>>27),b=x+(T^C&(E^T))+I[14]+3275163606&4294967295,x=E+(b<<9&4294967295|b>>>23),b=C+(E^T&(x^E))+I[3]+4107603335&4294967295,C=x+(b<<14&4294967295|b>>>18),b=T+(x^E&(C^x))+I[8]+1163531501&4294967295,T=C+(b<<20&4294967295|b>>>12),b=E+(C^x&(T^C))+I[13]+2850285829&4294967295,E=T+(b<<5&4294967295|b>>>27),b=x+(T^C&(E^T))+I[2]+4243563512&4294967295,x=E+(b<<9&4294967295|b>>>23),b=C+(E^T&(x^E))+I[7]+1735328473&4294967295,C=x+(b<<14&4294967295|b>>>18),b=T+(x^E&(C^x))+I[12]+2368359562&4294967295,T=C+(b<<20&4294967295|b>>>12),b=E+(T^C^x)+I[5]+4294588738&4294967295,E=T+(b<<4&4294967295|b>>>28),b=x+(E^T^C)+I[8]+2272392833&4294967295,x=E+(b<<11&4294967295|b>>>21),b=C+(x^E^T)+I[11]+1839030562&4294967295,C=x+(b<<16&4294967295|b>>>16),b=T+(C^x^E)+I[14]+4259657740&4294967295,T=C+(b<<23&4294967295|b>>>9),b=E+(T^C^x)+I[1]+2763975236&4294967295,E=T+(b<<4&4294967295|b>>>28),b=x+(E^T^C)+I[4]+1272893353&4294967295,x=E+(b<<11&4294967295|b>>>21),b=C+(x^E^T)+I[7]+4139469664&4294967295,C=x+(b<<16&4294967295|b>>>16),b=T+(C^x^E)+I[10]+3200236656&4294967295,T=C+(b<<23&4294967295|b>>>9),b=E+(T^C^x)+I[13]+681279174&4294967295,E=T+(b<<4&4294967295|b>>>28),b=x+(E^T^C)+I[0]+3936430074&4294967295,x=E+(b<<11&4294967295|b>>>21),b=C+(x^E^T)+I[3]+3572445317&4294967295,C=x+(b<<16&4294967295|b>>>16),b=T+(C^x^E)+I[6]+76029189&4294967295,T=C+(b<<23&4294967295|b>>>9),b=E+(T^C^x)+I[9]+3654602809&4294967295,E=T+(b<<4&4294967295|b>>>28),b=x+(E^T^C)+I[12]+3873151461&4294967295,x=E+(b<<11&4294967295|b>>>21),b=C+(x^E^T)+I[15]+530742520&4294967295,C=x+(b<<16&4294967295|b>>>16),b=T+(C^x^E)+I[2]+3299628645&4294967295,T=C+(b<<23&4294967295|b>>>9),b=E+(C^(T|~x))+I[0]+4096336452&4294967295,E=T+(b<<6&4294967295|b>>>26),b=x+(T^(E|~C))+I[7]+1126891415&4294967295,x=E+(b<<10&4294967295|b>>>22),b=C+(E^(x|~T))+I[14]+2878612391&4294967295,C=x+(b<<15&4294967295|b>>>17),b=T+(x^(C|~E))+I[5]+4237533241&4294967295,T=C+(b<<21&4294967295|b>>>11),b=E+(C^(T|~x))+I[12]+1700485571&4294967295,E=T+(b<<6&4294967295|b>>>26),b=x+(T^(E|~C))+I[3]+2399980690&4294967295,x=E+(b<<10&4294967295|b>>>22),b=C+(E^(x|~T))+I[10]+4293915773&4294967295,C=x+(b<<15&4294967295|b>>>17),b=T+(x^(C|~E))+I[1]+2240044497&4294967295,T=C+(b<<21&4294967295|b>>>11),b=E+(C^(T|~x))+I[8]+1873313359&4294967295,E=T+(b<<6&4294967295|b>>>26),b=x+(T^(E|~C))+I[15]+4264355552&4294967295,x=E+(b<<10&4294967295|b>>>22),b=C+(E^(x|~T))+I[6]+2734768916&4294967295,C=x+(b<<15&4294967295|b>>>17),b=T+(x^(C|~E))+I[13]+1309151649&4294967295,T=C+(b<<21&4294967295|b>>>11),b=E+(C^(T|~x))+I[4]+4149444226&4294967295,E=T+(b<<6&4294967295|b>>>26),b=x+(T^(E|~C))+I[11]+3174756917&4294967295,x=E+(b<<10&4294967295|b>>>22),b=C+(E^(x|~T))+I[2]+718787259&4294967295,C=x+(b<<15&4294967295|b>>>17),b=T+(x^(C|~E))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+E&4294967295,M.g[1]=M.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,M.g[2]=M.g[2]+C&4294967295,M.g[3]=M.g[3]+x&4294967295}s.prototype.u=function(M,E){E===void 0&&(E=M.length);for(var T=E-this.blockSize,I=this.B,C=this.h,x=0;x<E;){if(C==0)for(;x<=T;)l(this,M,x),x+=this.blockSize;if(typeof M=="string"){for(;x<E;)if(I[C++]=M.charCodeAt(x++),C==this.blockSize){l(this,I),C=0;break}}else for(;x<E;)if(I[C++]=M[x++],C==this.blockSize){l(this,I),C=0;break}}this.h=C,this.o+=E},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var E=1;E<M.length-8;++E)M[E]=0;var T=8*this.o;for(E=M.length-8;E<M.length;++E)M[E]=T&255,T/=256;for(this.u(M),M=Array(16),E=T=0;4>E;++E)for(var I=0;32>I;I+=8)M[T++]=this.g[E]>>>I&255;return M};function u(M,E){var T=g;return Object.prototype.hasOwnProperty.call(T,M)?T[M]:T[M]=E(M)}function f(M,E){this.h=E;for(var T=[],I=!0,C=M.length-1;0<=C;C--){var x=M[C]|0;I&&x==E||(T[C]=x,I=!1)}this.g=T}var g={};function y(M){return-128<=M&&128>M?u(M,function(E){return new f([E|0],0>E?-1:0)}):new f([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return N;if(0>M)return re(p(-M));for(var E=[],T=1,I=0;M>=T;I++)E[I]=M/T|0,T*=4294967296;return new f(E,0)}function A(M,E){if(M.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(M.charAt(0)=="-")return re(A(M.substring(1),E));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=p(Math.pow(E,8)),I=N,C=0;C<M.length;C+=8){var x=Math.min(8,M.length-C),b=parseInt(M.substring(C,C+x),E);8>x?(x=p(Math.pow(E,x)),I=I.j(x).add(p(b))):(I=I.j(T),I=I.add(p(b)))}return I}var N=y(0),k=y(1),Q=y(16777216);r=f.prototype,r.m=function(){if(fe(this))return-re(this).m();for(var M=0,E=1,T=0;T<this.g.length;T++){var I=this.i(T);M+=(0<=I?I:4294967296+I)*E,E*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(te(this))return"0";if(fe(this))return"-"+re(this).toString(M);for(var E=p(Math.pow(M,6)),T=this,I="";;){var C=Fe(T,E).g;T=Re(T,C.j(E));var x=((0<T.g.length?T.g[0]:T.h)>>>0).toString(M);if(T=C,te(T))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function te(M){if(M.h!=0)return!1;for(var E=0;E<M.g.length;E++)if(M.g[E]!=0)return!1;return!0}function fe(M){return M.h==-1}r.l=function(M){return M=Re(this,M),fe(M)?-1:te(M)?0:1};function re(M){for(var E=M.g.length,T=[],I=0;I<E;I++)T[I]=~M.g[I];return new f(T,~M.h).add(k)}r.abs=function(){return fe(this)?re(this):this},r.add=function(M){for(var E=Math.max(this.g.length,M.g.length),T=[],I=0,C=0;C<=E;C++){var x=I+(this.i(C)&65535)+(M.i(C)&65535),b=(x>>>16)+(this.i(C)>>>16)+(M.i(C)>>>16);I=b>>>16,x&=65535,b&=65535,T[C]=b<<16|x}return new f(T,T[T.length-1]&-2147483648?-1:0)};function Re(M,E){return M.add(re(E))}r.j=function(M){if(te(this)||te(M))return N;if(fe(this))return fe(M)?re(this).j(re(M)):re(re(this).j(M));if(fe(M))return re(this.j(re(M)));if(0>this.l(Q)&&0>M.l(Q))return p(this.m()*M.m());for(var E=this.g.length+M.g.length,T=[],I=0;I<2*E;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<M.g.length;C++){var x=this.i(I)>>>16,b=this.i(I)&65535,$=M.i(C)>>>16,pe=M.i(C)&65535;T[2*I+2*C]+=b*pe,Ne(T,2*I+2*C),T[2*I+2*C+1]+=x*pe,Ne(T,2*I+2*C+1),T[2*I+2*C+1]+=b*$,Ne(T,2*I+2*C+1),T[2*I+2*C+2]+=x*$,Ne(T,2*I+2*C+2)}for(I=0;I<E;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=E;I<2*E;I++)T[I]=0;return new f(T,0)};function Ne(M,E){for(;(M[E]&65535)!=M[E];)M[E+1]+=M[E]>>>16,M[E]&=65535,E++}function _e(M,E){this.g=M,this.h=E}function Fe(M,E){if(te(E))throw Error("division by zero");if(te(M))return new _e(N,N);if(fe(M))return E=Fe(re(M),E),new _e(re(E.g),re(E.h));if(fe(E))return E=Fe(M,re(E)),new _e(re(E.g),E.h);if(30<M.g.length){if(fe(M)||fe(E))throw Error("slowDivide_ only works with positive integers.");for(var T=k,I=E;0>=I.l(M);)T=Ie(T),I=Ie(I);var C=Ce(T,1),x=Ce(I,1);for(I=Ce(I,2),T=Ce(T,2);!te(I);){var b=x.add(I);0>=b.l(M)&&(C=C.add(T),x=b),I=Ce(I,1),T=Ce(T,1)}return E=Re(M,C.j(E)),new _e(C,E)}for(C=N;0<=M.l(E);){for(T=Math.max(1,Math.floor(M.m()/E.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=p(T),b=x.j(E);fe(b)||0<b.l(M);)T-=I,x=p(T),b=x.j(E);te(x)&&(x=k),C=C.add(x),M=Re(M,b)}return new _e(C,M)}r.A=function(M){return Fe(this,M).h},r.and=function(M){for(var E=Math.max(this.g.length,M.g.length),T=[],I=0;I<E;I++)T[I]=this.i(I)&M.i(I);return new f(T,this.h&M.h)},r.or=function(M){for(var E=Math.max(this.g.length,M.g.length),T=[],I=0;I<E;I++)T[I]=this.i(I)|M.i(I);return new f(T,this.h|M.h)},r.xor=function(M){for(var E=Math.max(this.g.length,M.g.length),T=[],I=0;I<E;I++)T[I]=this.i(I)^M.i(I);return new f(T,this.h^M.h)};function Ie(M){for(var E=M.g.length+1,T=[],I=0;I<E;I++)T[I]=M.i(I)<<1|M.i(I-1)>>>31;return new f(T,M.h)}function Ce(M,E){var T=E>>5;E%=32;for(var I=M.g.length-T,C=[],x=0;x<I;x++)C[x]=0<E?M.i(x+T)>>>E|M.i(x+T+1)<<32-E:M.i(x+T);return new f(C,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,q0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=A,ns=f}).apply(typeof X_<"u"?X_:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var F0,gl,G0,Ac,Hd,K0,Q0,Y0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(c,m){if(m)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var j=c[w];if(!(j in _))break e;_=_[j]}c=c[c.length-1],w=_[c],m=m(w),m!=w&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function u(c,m){c instanceof String&&(c+="");var _=0,w=!1,j={next:function(){if(!w&&_<c.length){var Y=_++;return{value:m(Y,c[Y]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}l("Array.prototype.values",function(c){return c||function(){return u(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function y(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function A(c,m,_){return c.call.apply(c.bind,arguments)}function N(c,m,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),c.apply(m,j)}}return function(){return c.apply(m,arguments)}}function k(c,m,_){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:N,k.apply(null,arguments)}function Q(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function te(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,j,Y){for(var de=Array(arguments.length-2),at=2;at<arguments.length;at++)de[at-2]=arguments[at];return m.prototype[j].apply(w,de)}}function fe(c){const m=c.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=c[w];return _}return[]}function re(c,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(y(w)){const j=c.length||0,Y=w.length||0;c.length=j+Y;for(let de=0;de<Y;de++)c[j+de]=w[de]}else c.push(w)}}class Re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Ne(c){return/^[\s\xa0]*$/.test(c)}function _e(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function Fe(c){return Fe[" "](c),c}Fe[" "]=function(){};var Ie=_e().indexOf("Gecko")!=-1&&!(_e().toLowerCase().indexOf("webkit")!=-1&&_e().indexOf("Edge")==-1)&&!(_e().indexOf("Trident")!=-1||_e().indexOf("MSIE")!=-1)&&_e().indexOf("Edge")==-1;function Ce(c,m,_){for(const w in c)m.call(_,c[w],w,c)}function M(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function E(c){const m={};for(const _ in c)m[_]=c[_];return m}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,m){let _,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(_ in w)c[_]=w[_];for(let Y=0;Y<T.length;Y++)_=T[Y],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function C(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function x(c){g.setTimeout(()=>{throw c},0)}function b(){var c=Z;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ${constructor(){this.h=this.g=null}add(m,_){const w=pe.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var pe=new Re(()=>new V,c=>c.reset());class V{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let W,z=!1,Z=new $,D=()=>{const c=g.Promise.resolve(void 0);W=()=>{c.then(U)}};var U=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(_){x(_)}var m=pe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}z=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};g.addEventListener("test",_,m),g.removeEventListener("test",_,m)}catch{}return c}();function me(c,m){if(B.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(Ie){e:{try{Fe(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:K[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&me.aa.h.call(this)}}te(me,B);var K={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),J=0;function ae(c,m,_,w,j){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=j,this.key=++J,this.da=this.fa=!1}function Se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function he(c){this.src=c,this.g={},this.h=0}he.prototype.add=function(c,m,_,w,j){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var de=xe(c,m,w,j);return-1<de?(m=c[de],_||(m.fa=!1)):(m=new ae(m,this.src,Y,!!w,j),m.fa=_,c.push(m)),m};function ge(c,m){var _=m.type;if(_ in c.g){var w=c.g[_],j=Array.prototype.indexOf.call(w,m,void 0),Y;(Y=0<=j)&&Array.prototype.splice.call(w,j,1),Y&&(Se(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function xe(c,m,_,w){for(var j=0;j<c.length;++j){var Y=c[j];if(!Y.da&&Y.listener==m&&Y.capture==!!_&&Y.ha==w)return j}return-1}var ue="closure_lm_"+(1e6*Math.random()|0),be={};function ye(c,m,_,w,j){if(Array.isArray(m)){for(var Y=0;Y<m.length;Y++)ye(c,m[Y],_,w,j);return null}return _=ke(_),c&&c[se]?c.K(m,_,p(w)?!!w.capture:!1,j):De(c,m,_,!1,w,j)}function De(c,m,_,w,j,Y){if(!m)throw Error("Invalid event type");var de=p(j)?!!j.capture:!!j,at=Ve(c);if(at||(c[ue]=at=new he(c)),_=at.add(m,_,w,de,Y),_.proxy)return _;if(w=ze(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)ce||(j=de),j===void 0&&(j=!1),c.addEventListener(m.toString(),w,j);else if(c.attachEvent)c.attachEvent(ft(m.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ze(){function c(_){return m.call(c.src,c.listener,_)}const m=Et;return c}function je(c,m,_,w,j){if(Array.isArray(m))for(var Y=0;Y<m.length;Y++)je(c,m[Y],_,w,j);else w=p(w)?!!w.capture:!!w,_=ke(_),c&&c[se]?(c=c.i,m=String(m).toString(),m in c.g&&(Y=c.g[m],_=xe(Y,_,w,j),-1<_&&(Se(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ve(c))&&(m=c.g[m.toString()],c=-1,m&&(c=xe(m,_,w,j)),(_=-1<c?m[c]:null)&&Je(_))}function Je(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[se])ge(m.i,c);else{var _=c.type,w=c.proxy;m.removeEventListener?m.removeEventListener(_,w,c.capture):m.detachEvent?m.detachEvent(ft(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=Ve(m))?(ge(_,c),_.h==0&&(_.src=null,m[ue]=null)):Se(c)}}}function ft(c){return c in be?be[c]:be[c]="on"+c}function Et(c,m){if(c.da)c=!0;else{m=new me(m,this);var _=c.listener,w=c.ha||c.src;c.fa&&Je(c),c=_.call(w,m)}return c}function Ve(c){return c=c[ue],c instanceof he?c:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(c){return typeof c=="function"?c:(c[Pe]||(c[Pe]=function(m){return c.handleEvent(m)}),c[Pe])}function ve(){X.call(this),this.i=new he(this),this.M=this,this.F=null}te(ve,X),ve.prototype[se]=!0,ve.prototype.removeEventListener=function(c,m,_,w){je(this,c,m,_,w)};function Ee(c,m){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=m.type||m,typeof m=="string")m=new B(m,c);else if(m instanceof B)m.target=m.target||c;else{var j=m;m=new B(w,c),I(m,j)}if(j=!0,_)for(var Y=_.length-1;0<=Y;Y--){var de=m.g=_[Y];j=dt(de,w,!0,m)&&j}if(de=m.g=c,j=dt(de,w,!0,m)&&j,j=dt(de,w,!1,m)&&j,_)for(Y=0;Y<_.length;Y++)de=m.g=_[Y],j=dt(de,w,!1,m)&&j}ve.prototype.N=function(){if(ve.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],w=0;w<_.length;w++)Se(_[w]);delete c.g[m],c.h--}}this.F=null},ve.prototype.K=function(c,m,_,w){return this.i.add(String(c),m,!1,_,w)},ve.prototype.L=function(c,m,_,w){return this.i.add(String(c),m,!0,_,w)};function dt(c,m,_,w){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,Y=0;Y<m.length;++Y){var de=m[Y];if(de&&!de.da&&de.capture==_){var at=de.listener,Xt=de.ha||de.src;de.fa&&ge(c.i,de),j=at.call(Xt,w)!==!1&&j}}return j&&!w.defaultPrevented}function bt(c,m,_){if(typeof c=="function")_&&(c=k(c,_));else if(c&&typeof c.handleEvent=="function")c=k(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(c,m||0)}function He(c){c.g=bt(()=>{c.g=null,c.i&&(c.i=!1,He(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class ct extends X{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:He(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(c){X.call(this),this.h=c,this.g={}}te(Ke,X);var Ct=[];function xt(c){Ce(c.g,function(m,_){this.g.hasOwnProperty(_)&&Je(m)},c),c.g={}}Ke.prototype.N=function(){Ke.aa.N.call(this),xt(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=g.JSON.stringify,tn=g.JSON.parse,nn=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function Un(){}Un.prototype.h=null;function li(c){return c.h||(c.h=c.i())}function ui(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nn(){B.call(this,"d")}te(Nn,B);function ci(){B.call(this,"c")}te(ci,B);var En={},hi=null;function Ft(){return hi=hi||new ve}En.La="serverreachability";function Fi(c){B.call(this,En.La,c)}te(Fi,B);function fi(c){const m=Ft();Ee(m,new Fi(m))}En.STAT_EVENT="statevent";function ds(c,m){B.call(this,En.STAT_EVENT,c),this.stat=m}te(ds,B);function Rt(c){const m=Ft();Ee(m,new ds(m,c))}En.Ma="timingevent";function Pt(c,m){B.call(this,En.Ma,c),this.size=m}te(Pt,B);function kt(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},m)}function Cn(){this.g=!0}Cn.prototype.xa=function(){this.g=!1};function Tr(c,m,_,w,j,Y){c.info(function(){if(c.g)if(Y)for(var de="",at=Y.split("&"),Xt=0;Xt<at.length;Xt++){var ot=at[Xt].split("=");if(1<ot.length){var sn=ot[0];ot=ot[1];var Zt=sn.split("_");de=2<=Zt.length&&Zt[1]=="type"?de+(sn+"="+ot+"&"):de+(sn+"=redacted&")}}else de=null;else de=Y;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+m+`
`+_+`
`+de})}function ea(c,m,_,w,j,Y,de){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+m+`
`+_+`
`+Y+" "+de})}function di(c,m,_,w){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+ms(c,_)+(w?" "+w:"")})}function Kl(c,m){c.info(function(){return"TIMEOUT: "+m})}Cn.prototype.info=function(){};function ms(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var Y=j[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var de=1;de<j.length;de++)j[de]=""}}}}return tt(_)}catch{return m}}var Sr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Si;function Ai(){}te(Ai,Un),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},Si=new Ai;function Dn(c,m,_,w){this.j=c,this.i=m,this.l=_,this.R=w||1,this.U=new Ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jt}function jt(){this.i=null,this.g="",this.h=!1}var mo={},ta={};function mi(c,m,_){c.L=1,c.v=vs(jn(m)),c.m=_,c.P=!0,Ki(c,null)}function Ki(c,m){c.F=Date.now(),gs(c),c.A=jn(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Eo(_.i,"t",w),c.C=0,_=c.j.J,c.h=new jt,c.g=lu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new ct(k(c.Y,c,c.g),c.O)),m=c.U,_=c.g,w=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ct[0]=j.toString()),j=Ct);for(var Y=0;Y<j.length;Y++){var de=ye(_,j[Y],w||m.handleEvent,!1,m.h||m);if(!de)break;m.g[de.key]=de}m=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),fi(),Tr(c.i,c.u,c.A,c.l,c.R,c.m)}Dn.prototype.ca=function(c){c=c.target;const m=this.M;m&&Wn(c)==3?m.j():this.Y(c)},Dn.prototype.Y=function(c){try{if(c==this.g)e:{const Zt=Wn(this.g);var m=this.g.Ba();const er=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||eu(this.g)))){this.J||Zt!=4||m==7||(m==8||0>=er?fi(3):fi(2)),Ar(this);var _=this.g.Z();this.X=_;t:if(Ql(this)){var w=eu(this.g);c="";var j=w.length,Y=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),wi(this);var de="";break t}this.h.i=new g.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,c+=this.h.i.decode(w[m],{stream:!(Y&&m==j-1)});w.length=0,this.h.g+=c,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=_==200,ea(this.i,this.u,this.A,this.l,this.R,Zt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Xt=this.g;if((at=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ne(at)){var ot=at;break t}}ot=null}if(_=ot)di(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ps(this,_);else{this.o=!1,this.s=3,Rt(12),fn(this),wi(this);break e}}if(this.P){_=!0;let dn;for(;!this.J&&this.C<de.length;)if(dn=Yl(this,de),dn==ta){Zt==4&&(this.s=4,Rt(14),_=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==mo){this.s=4,Rt(15),di(this.i,this.l,de,"[Invalid Chunk]"),_=!1;break}else di(this.i,this.l,dn,null),ps(this,dn);if(Ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||de.length!=0||this.h.h||(this.s=1,Rt(16),_=!1),this.o=this.o&&_,!_)di(this.i,this.l,de,"[Invalid Chunked Response]"),fn(this),wi(this);else if(0<de.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Is(sn),sn.M=!0,Rt(11))}}else di(this.i,this.l,de,null),ps(this,de);Zt==4&&fn(this),this.o&&!this.J&&(Zt==4?su(this.j,this):(this.o=!1,gs(this)))}else Sh(this.g),_==400&&0<de.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),fn(this),wi(this)}}}catch{}finally{}};function Ql(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Yl(c,m){var _=c.C,w=m.indexOf(`
`,_);return w==-1?ta:(_=Number(m.substring(_,w)),isNaN(_)?mo:(w+=1,w+_>m.length?ta:(m=m.slice(w,w+_),c.C=w+_,m)))}Dn.prototype.cancel=function(){this.J=!0,fn(this)};function gs(c){c.S=Date.now()+c.I,$l(c,c.I)}function $l(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=kt(k(c.ba,c),m)}function Ar(c){c.B&&(g.clearTimeout(c.B),c.B=null)}Dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Kl(this.i,this.A),this.L!=2&&(fi(),Rt(17)),fn(this),this.s=2,wi(this)):$l(this,this.S-c)};function wi(c){c.j.G==0||c.J||su(c.j,c)}function fn(c){Ar(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,xt(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ps(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||go(_.h,c))){if(!c.K&&go(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)da(_),ha(_);else break e;wo(_),Rt(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=kt(k(_.Za,_),6e3));if(1>=ia(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ji(_,11)}else if((c.K||_.g==c)&&da(_),!Ne(m))for(j=_.Da.g.parse(m),m=0;m<j.length;m++){let ot=j[m];if(_.T=ot[0],ot=ot[1],_.G==2)if(ot[0]=="c"){_.K=ot[1],_.ia=ot[2];const sn=ot[3];sn!=null&&(_.la=sn,_.j.info("VER="+_.la));const Zt=ot[4];Zt!=null&&(_.Aa=Zt,_.j.info("SVER="+_.Aa));const er=ot[5];er!=null&&typeof er=="number"&&0<er&&(w=1.5*er,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const dn=c.g;if(dn){const Oi=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var Y=w.h;Y.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ra(Y,Y.h),Y.h=null))}if(w.D){const Io=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(w.ya=Io,Tt(w.I,w.D,Io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var de=c;if(w.qa=ou(w,w.J?w.ia:null,w.W),de.K){xn(w.h,de);var at=de,Xt=w.L;Xt&&(at.I=Xt),at.B&&(Ar(at),gs(at)),w.g=de}else iu(w);0<_.i.length&&fa(_)}else ot[0]!="stop"&&ot[0]!="close"||Ji(_,7);else _.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Ji(_,7):So(_):ot[0]!="noop"&&_.l&&_.l.ta(ot),_.v=0)}}fi(4)}catch{}}var Xl=class{constructor(c,m){this.g=c,this.map=m}};function Qi(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function na(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ia(c){return c.h?1:c.g?c.g.size:0}function go(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function ra(c,m){c.g?c.g.add(m):c.h=m}function xn(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Qi.prototype.cancel=function(){if(this.i=po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function po(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return fe(c.i)}function vh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var m=[],_=c.length,w=0;w<_;w++)m.push(c[w]);return m}m=[],_=0;for(w in c)m[_++]=c[w];return m}function sa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const w in c)m[_++]=w;return m}}}function yo(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=sa(c),w=vh(c),j=w.length,Y=0;Y<j;Y++)m.call(void 0,w[Y],_&&_[Y],c)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),j=null;if(0<=w){var Y=c[_].substring(0,w);j=c[_].substring(w+1)}else Y=c[_];m(Y,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Gt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Gt){this.h=c.h,_s(this,c.j),this.o=c.o,this.g=c.g,wr(this,c.s),this.l=c.l;var m=c.i,_=new $i;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Yi(this,_),this.m=c.m}else c&&(m=String(c).match(ys))?(this.h=!1,_s(this,m[1]||"",!0),this.o=$n(m[2]||""),this.g=$n(m[3]||"",!0),wr(this,m[4]),this.l=$n(m[5]||"",!0),Yi(this,m[6]||"",!0),this.m=$n(m[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Gt.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Es(m,_o,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Es(m,_o,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Es(_,_.charAt(0)=="/"?bh:vo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Es(_,aa)),c.join("")};function jn(c){return new Gt(c)}function _s(c,m,_){c.j=_?$n(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function wr(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Yi(c,m,_){m instanceof $i?(c.i=m,Wl(c.i,c.h)):(_||(m=Es(m,Th)),c.i=new $i(m,c.h))}function Tt(c,m,_){c.i.set(m,_)}function vs(c){return Tt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $n(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Es(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,Zl),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Zl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _o=/[#\/\?@]/g,vo=/[#\?:]/g,bh=/[#\?]/g,Th=/[#\?@]/g,aa=/#/g;function $i(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Xn(c){c.g||(c.g=new Map,c.h=0,c.i&&Eh(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=$i.prototype,r.add=function(c,m){Xn(this),this.i=null,c=Ri(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function Xi(c,m){Xn(c),m=Ri(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Zi(c,m){return Xn(c),m=Ri(c,m),c.g.has(m)}r.forEach=function(c,m){Xn(this),this.g.forEach(function(_,w){_.forEach(function(j){c.call(m,j,w,this)},this)},this)},r.na=function(){Xn(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const j=c[w];for(let Y=0;Y<j.length;Y++)_.push(m[w])}return _},r.V=function(c){Xn(this);let m=[];if(typeof c=="string")Zi(this,c)&&(m=m.concat(this.g.get(Ri(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},r.set=function(c,m){return Xn(this),this.i=null,c=Ri(this,c),Zi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Eo(c,m,_){Xi(c,m),0<_.length&&(c.i=null,c.g.set(Ri(c,m),fe(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const Y=encodeURIComponent(String(w)),de=this.V(w);for(w=0;w<de.length;w++){var j=Y;de[w]!==""&&(j+="="+encodeURIComponent(String(de[w]))),c.push(j)}}return this.i=c.join("&")};function Ri(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Wl(c,m){m&&!c.j&&(Xn(c),c.i=null,c.g.forEach(function(_,w){var j=w.toLowerCase();w!=j&&(Xi(this,w),Eo(this,j,_))},c)),c.j=m}function bs(c,m){const _=new Cn;if(g.Image){const w=new Image;w.onload=Q(Zn,_,"TestLoadImage: loaded",!0,m,w),w.onerror=Q(Zn,_,"TestLoadImage: error",!1,m,w),w.onabort=Q(Zn,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=Q(Zn,_,"TestLoadImage: timeout",!1,m,w),g.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else m(!1)}function gi(c,m){const _=new Cn,w=new AbortController,j=setTimeout(()=>{w.abort(),Zn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:w.signal}).then(Y=>{clearTimeout(j),Y.ok?Zn(_,"TestPingServer: ok",!0,m):Zn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Zn(_,"TestPingServer: error",!1,m)})}function Zn(c,m,_,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(_)}catch{}}function Ts(){this.g=new nn}function Ii(c,m,_){const w=_||"";try{yo(c,function(j,Y){let de=j;p(j)&&(de=tt(j)),m.push(w+Y+"="+encodeURIComponent(de))})}catch(j){throw m.push(w+"type="+encodeURIComponent("_badmap")),j}}function Rr(c){this.l=c.Ub||null,this.j=c.eb||!1}te(Rr,Un),Rr.prototype.g=function(){return new Wi(this.l,this.j)},Rr.prototype.i=function(c){return function(){return c}}({});function Wi(c,m){ve.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}te(Wi,ve),r=Wi.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Ci(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function bo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ni(this):Ci(this),this.readyState==3&&bo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Ni(this))},r.Qa=function(c){this.g&&(this.response=c,Ni(this))},r.ga=function(){this.g&&Ni(this)};function Ni(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ci(c)}r.setRequestHeader=function(c,m){this.u.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Ci(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function To(c){let m="";return Ce(c,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function rn(c,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=To(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Tt(c,m,_))}function gt(c){ve.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}te(gt,ve);var oa=/^https?$/i,Ss=["POST","PUT"];r=gt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Si.g(),this.v=this.o?li(this.o):li(Si),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(Y){Jl(this,Y);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)_.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Y of w.keys())_.set(Y,w.get(Y));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),j=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Ss,m,void 0))||w||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,de]of _)this.g.setRequestHeader(Y,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{As(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Jl(this,Y)}};function Jl(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,la(c),Di(c)}function la(c){c.A||(c.A=!0,Ee(c,"complete"),Ee(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ee(this,"complete"),Ee(this,"abort"),Di(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ua(this):this.bb())},r.bb=function(){ua(this)};function ua(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)bt(c.Ea,0,c);else if(Ee(c,"readystatechange"),Wn(c)==4){c.h=!1;try{const de=c.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=de===0){var j=String(c.D).match(ys)[1]||null;!j&&g.self&&g.self.location&&(j=g.self.location.protocol.slice(0,-1)),w=!oa.test(j?j.toLowerCase():"")}_=w}if(_)Ee(c,"complete"),Ee(c,"success");else{c.m=6;try{var Y=2<Wn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",la(c)}}finally{Di(c)}}}}function Di(c,m){if(c.g){As(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Ee(c,"ready");try{_.onreadystatechange=w}catch{}}}function As(c){c.I&&(g.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),tn(m)}};function eu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sh(c){const m={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(Ne(c[w]))continue;var _=C(c[w]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=m[j]||[];m[j]=Y,Y.push(_)}M(m,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function ca(c){this.Aa=0,this.i=[],this.j=new Cn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,c),this.cb=ws("retryDelaySeedMs",1e4,c),this.Wa=ws("forwardChannelMaxRetries",2,c),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(c&&c.concurrentRequestLimit),this.Da=new Ts,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ca.prototype,r.la=8,r.G=1,r.connect=function(c,m,_,w){Rt(0),this.W=c,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=ou(this,null,this.W),fa(this)};function So(c){if(tu(c),c.G==3){var m=c.U++,_=jn(c.I);if(Tt(_,"SID",c.K),Tt(_,"RID",m),Tt(_,"TYPE","terminate"),Rs(c,_),m=new Dn(c,c.j,m),m.L=2,m.v=vs(jn(_)),_=!1,g.navigator&&g.navigator.sendBeacon)try{_=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&g.Image&&(new Image().src=m.v,_=!0),_||(m.g=lu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),gs(m)}au(c)}function ha(c){c.g&&(Is(c),c.g.cancel(),c.g=null)}function tu(c){ha(c),c.u&&(g.clearTimeout(c.u),c.u=null),da(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function fa(c){if(!na(c.h)&&!c.s){c.s=!0;var m=c.Ga;W||D(),z||(W(),z=!0),Z.add(m,c),c.B=0}}function Ah(c,m){return ia(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=kt(k(c.Ga,c,m),Ro(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Dn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=E(Y),I(Y,this.S)):Y=this.S),this.m!==null||this.O||(j.H=Y,Y=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=nu(this,j,m),_=jn(this.I),Tt(_,"RID",c),Tt(_,"CVER",22),this.D&&Tt(_,"X-HTTP-Session-Id",this.D),Rs(this,_),Y&&(this.O?m="headers="+encodeURIComponent(String(To(Y)))+"&"+m:this.m&&rn(_,this.m,Y)),ra(this.h,j),this.Ua&&Tt(_,"TYPE","init"),this.P?(Tt(_,"$req",m),Tt(_,"SID","null"),j.T=!0,mi(j,_,null)):mi(j,_,m),this.G=2}}else this.G==3&&(c?Ao(this,c):this.i.length==0||na(this.h)||Ao(this))};function Ao(c,m){var _;m?_=m.l:_=c.U++;const w=jn(c.I);Tt(w,"SID",c.K),Tt(w,"RID",_),Tt(w,"AID",c.T),Rs(c,w),c.m&&c.o&&rn(w,c.m,c.o),_=new Dn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=nu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ra(c.h,_),mi(_,w,m)}function Rs(c,m){c.H&&Ce(c.H,function(_,w){Tt(m,w,_)}),c.l&&yo({},function(_,w){Tt(m,w,_)})}function nu(c,m,_){_=Math.min(c.i.length,_);var w=c.l?k(c.l.Na,c.l,c):null;e:{var j=c.i;let Y=-1;for(;;){const de=["count="+_];Y==-1?0<_?(Y=j[0].g,de.push("ofs="+Y)):Y=0:de.push("ofs="+Y);let at=!0;for(let Xt=0;Xt<_;Xt++){let ot=j[Xt].g;const sn=j[Xt].map;if(ot-=Y,0>ot)Y=Math.max(0,j[Xt].g-100),at=!1;else try{Ii(sn,de,"req"+ot+"_")}catch{w&&w(sn)}}if(at){w=de.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,w}function iu(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;W||D(),z||(W(),z=!0),Z.add(m,c),c.v=0}}function wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=kt(k(c.Fa,c),Ro(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=kt(k(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),ha(this),ru(this))};function Is(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function ru(c){c.g=new Dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=jn(c.qa);Tt(m,"RID","rpc"),Tt(m,"SID",c.K),Tt(m,"AID",c.T),Tt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Tt(m,"TO",c.ja),Tt(m,"TYPE","xmlhttp"),Rs(c,m),c.m&&c.o&&rn(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=vs(jn(m)),_.m=null,_.P=!0,Ki(_,c)}r.Za=function(){this.C!=null&&(this.C=null,ha(this),wo(this),Rt(19))};function da(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function su(c,m){var _=null;if(c.g==m){da(c),Is(c),c.g=null;var w=2}else if(go(c.h,m))_=m.D,xn(c.h,m),w=1;else return;if(c.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var j=c.B;w=Ft(),Ee(w,new Pt(w,_)),fa(c)}else iu(c);else if(j=m.s,j==3||j==0&&0<m.X||!(w==1&&Ah(c,m)||w==2&&wo(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),j){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function Ro(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function Ji(c,m){if(c.j.info("Error code "+m),m==2){var _=k(c.fb,c),w=c.Xa;const j=!w;w=new Gt(w||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||_s(w,"https"),vs(w),j?bs(w.toString(),_):gi(w.toString(),_)}else Rt(2);c.G=0,c.l&&c.l.sa(m),au(c),tu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function au(c){if(c.G=0,c.ka=[],c.l){const m=po(c.h);(m.length!=0||c.i.length!=0)&&(re(c.ka,m),re(c.ka,c.i),c.h.i.length=0,fe(c.i),c.i.length=0),c.l.ra()}}function ou(c,m,_){var w=_ instanceof Gt?jn(_):new Gt(_);if(w.g!="")m&&(w.g=m+"."+w.g),wr(w,w.s);else{var j=g.location;w=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var Y=new Gt(null);w&&_s(Y,w),m&&(Y.g=m),j&&wr(Y,j),_&&(Y.l=_),w=Y}return _=c.D,m=c.ya,_&&m&&Tt(w,_,m),Tt(w,"VER",c.la),Rs(c,w),w}function lu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new gt(new Rr({eb:_})):new gt(c.pa),m.Ha(c.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}r=uu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ma(){}ma.prototype.g=function(c,m){return new On(c,m)};function On(c,m){ve.call(this),this.g=new ca(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!Ne(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Ne(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new xi(this)}te(On,ve),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){So(this.g)},On.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=tt(c),c=_);m.i.push(new Xl(m.Ya++,c)),m.G==3&&fa(m)},On.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,On.aa.N.call(this)};function cu(c){Nn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}te(cu,Nn);function hu(){ci.call(this),this.status=1}te(hu,ci);function xi(c){this.g=c}te(xi,uu),xi.prototype.ua=function(){Ee(this.g,"a")},xi.prototype.ta=function(c){Ee(this.g,new cu(c))},xi.prototype.sa=function(c){Ee(this.g,new hu)},xi.prototype.ra=function(){Ee(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,Y0=function(){return new ma},Q0=function(){return Ft()},K0=En,Hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sr.NO_ERROR=0,Sr.TIMEOUT=8,Sr.HTTP_ERROR=6,Ac=Sr,Gi.COMPLETE="complete",G0=Gi,ui.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",ve.prototype.listen=ve.prototype.K,gl=ui,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,F0=gt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore",W_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new om("@firebase/firestore");function qa(){return Xs.logLevel}function Te(r,...e){if(Xs.logLevel<=rt.DEBUG){const n=e.map(bm);Xs.debug(`Firestore (${lo}): ${r}`,...n)}}function vr(r,...e){if(Xs.logLevel<=rt.ERROR){const n=e.map(bm);Xs.error(`Firestore (${lo}): ${r}`,...n)}}function Ja(r,...e){if(Xs.logLevel<=rt.WARN){const n=e.map(bm);Xs.warn(`Firestore (${lo}): ${r}`,...n)}}function bm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,$0(r,s,n)}function $0(r,e,n){let s=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw vr(s),new Error(s)}function yt(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||$0(e,l,s)}function Ye(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class Hw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qw{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){yt(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new is,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},g=y=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new is)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(yt(typeof s.accessToken=="string",31837,{l:s}),new X0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class Fw{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Gw{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Fw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kw{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){yt(this.o===void 0,3512);const s=u=>{u.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const l=u=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>l(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new J_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Qw(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=e.charAt(l[u]%62))}return s}}function We(r,e){return r<e?-1:r>e?1:0}function qd(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),l=e.codePointAt(n);if(s!==l){if(s<128&&l<128)return We(s,l);{const u=Z0(),f=Yw(u.encode(ev(r,n)),u.encode(ev(e,n)));return f!==0?f:We(s,l)}}n+=s>65535?2:1}return We(r.length,e.length)}function ev(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function Yw(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return We(r[n],e[n]);return We(r.length,e.length)}function eo(r,e,n){return r.length===e.length&&r.every((s,l)=>n(s,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-62135596800,nv=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*nv);return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tv)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nv}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-tv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new pt(0,0))}static max(){return new Qe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="__name__";class Li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Be(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const u=Li.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return We(e.length,n.length)}static compareSegments(e,n){const s=Li.isNumericId(e),l=Li.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?Li.extractNumericId(e).compare(Li.extractNumericId(n)):qd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class Dt extends Li{construct(e,n,s){return new Dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new Dt(n)}static emptyPath(){return new Dt([])}}const $w=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Li{construct(e,n,s){return new _n(e,n,s)}static isValidIdentifier(e){return $w.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iv}static keyField(){return new _n([iv])}static fromServerFormat(e){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new Ae(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new Ae(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ae(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(u(),l++)}if(u(),f)throw new Ae(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Dt.fromString(e))}static fromName(e){return new Me(Dt.fromString(e).popFirst(5))}static empty(){return new Me(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=-1;function Xw(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Qe.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new ss(l,Me.empty(),e)}function Zw(r){return new ss(r.readTime,r.key,Il)}class ss{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ss(Qe.min(),Me.empty(),Il)}static max(){return new ss(Qe.max(),Me.empty(),Il)}}function Ww(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(r.documentKey,e.documentKey),n!==0?n:We(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r){if(r.code!==le.FAILED_PRECONDITION||r.message!==Jw)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,s)=>{n(e)})}static reject(e){return new oe((n,s)=>{s(e)})}static waitFor(e){return new oe((n,s)=>{let l=0,u=0,f=!1;e.forEach(g=>{++l,g.next(()=>{++u,f&&u===l&&n()},y=>s(y))}),f=!0,u===l&&n()})}static or(e){let n=oe.resolve(!1);for(const s of e)n=n.next(l=>l?oe.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,u)=>{s.push(n.call(this,l,u))}),this.waitFor(s)}static mapArray(e,n){return new oe((s,l)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;n(e[p]).next(A=>{f[p]=A,++g,g===u&&s(f)},A=>l(A))}})}static doWhile(e,n){return new oe((s,l)=>{const u=()=>{e()===!0?n().next(()=>{u()},l):s()};u()})}}function tR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=-1;function ih(r){return r==null}function Uc(r){return r===0&&1/r==-1/0}function nR(r){return typeof r=="number"&&Number.isInteger(r)&&!Uc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="";function iR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=rv(e)),e=rR(r.get(n),e);return rv(e)}function rR(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const u=r.charAt(l);switch(u){case"\0":n+="";break;case J0:n+="";break;default:n+=u}}return n}function rv(r){return r+J0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function hs(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function eE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mc(this.root,e,this.comparator,!0)}}class mc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??yn.RED,this.left=l??yn.EMPTY,this.right=u??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,u){return new yn(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return yn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,s,l,u){return this}insert(e,n,s){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new en(_n.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tE("Invalid base64 string: "+u):u}}(e);return new vn(n)}static fromUint8Array(e){const n=function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(r){if(yt(!!r,39018),typeof r=="string"){let e=0;const n=sR.exec(r);if(yt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:qt(r.seconds),nanos:qt(r.nanos)}}function qt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function os(r){return typeof r=="string"?vn.fromBase64String(r):vn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="server_timestamp",iE="__type__",rE="__previous_value__",sE="__local_write_time__";function Sm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[iE])===null||n===void 0?void 0:n.stringValue)===nE}function rh(r){const e=r.mapValue.fields[rE];return Sm(e)?rh(e):e}function Nl(r){const e=as(r.mapValue.fields[sE].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,s,l,u,f,g,y,p,A){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=A}}const jc="(default)";class Cl{constructor(e,n){this.projectId=e,this.database=n||jc}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===jc}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__type__",oR="__max__",gc={mapValue:{}},oE="__vector__",Bc="value";function ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Sm(r)?4:uR(r)?9007199254740991:lR(r)?10:11:Be(28295,{value:r})}function qi(r,e){if(r===e)return!0;const n=ls(r);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Nl(r).isEqual(Nl(e));case 3:return function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=as(l.timestampValue),g=as(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(l,u){return os(l.bytesValue).isEqual(os(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(l,u){return qt(l.geoPointValue.latitude)===qt(u.geoPointValue.latitude)&&qt(l.geoPointValue.longitude)===qt(u.geoPointValue.longitude)}(r,e);case 2:return function(l,u){if("integerValue"in l&&"integerValue"in u)return qt(l.integerValue)===qt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=qt(l.doubleValue),g=qt(u.doubleValue);return f===g?Uc(f)===Uc(g):isNaN(f)&&isNaN(g)}return!1}(r,e);case 9:return eo(r.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(l,u){const f=l.mapValue.fields||{},g=u.mapValue.fields||{};if(sv(f)!==sv(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!qi(f[y],g[y])))return!1;return!0}(r,e);default:return Be(52216,{left:r})}}function Dl(r,e){return(r.values||[]).find(n=>qi(n,e))!==void 0}function to(r,e){if(r===e)return 0;const n=ls(r),s=ls(e);if(n!==s)return We(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return function(u,f){const g=qt(u.integerValue||u.doubleValue),y=qt(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(r,e);case 3:return ov(r.timestampValue,e.timestampValue);case 4:return ov(Nl(r),Nl(e));case 5:return qd(r.stringValue,e.stringValue);case 6:return function(u,f){const g=os(u),y=os(f);return g.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const g=u.split("/"),y=f.split("/");for(let p=0;p<g.length&&p<y.length;p++){const A=We(g[p],y[p]);if(A!==0)return A}return We(g.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const g=We(qt(u.latitude),qt(f.latitude));return g!==0?g:We(qt(u.longitude),qt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return lv(r.arrayValue,e.arrayValue);case 10:return function(u,f){var g,y,p,A;const N=u.fields||{},k=f.fields||{},Q=(g=N[Bc])===null||g===void 0?void 0:g.arrayValue,te=(y=k[Bc])===null||y===void 0?void 0:y.arrayValue,fe=We(((p=Q==null?void 0:Q.values)===null||p===void 0?void 0:p.length)||0,((A=te==null?void 0:te.values)===null||A===void 0?void 0:A.length)||0);return fe!==0?fe:lv(Q,te)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===gc.mapValue&&f===gc.mapValue)return 0;if(u===gc.mapValue)return 1;if(f===gc.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=f.fields||{},A=Object.keys(p);y.sort(),A.sort();for(let N=0;N<y.length&&N<A.length;++N){const k=qd(y[N],A[N]);if(k!==0)return k;const Q=to(g[y[N]],p[A[N]]);if(Q!==0)return Q}return We(y.length,A.length)}(r.mapValue,e.mapValue);default:throw Be(23264,{Pe:n})}}function ov(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const n=as(r),s=as(e),l=We(n.seconds,s.seconds);return l!==0?l:We(n.nanos,s.nanos)}function lv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=to(n[l],s[l]);if(u)return u}return We(n.length,s.length)}function no(r){return Fd(r)}function Fd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=as(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return os(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return Me.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Fd(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of s)u?u=!1:l+=",",l+=`${f}:${Fd(n.fields[f])}`;return l+"}"}(r.mapValue):Be(61005,{value:r})}function wc(r){switch(ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(r);return e?16+wc(e):16;case 5:return 2*r.stringValue.length;case 6:return os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,u)=>l+wc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return hs(s.fields,(u,f)=>{l+=u.length+wc(f)}),l}(r.mapValue);default:throw Be(13486,{value:r})}}function uv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gd(r){return!!r&&"integerValue"in r}function Am(r){return!!r&&"arrayValue"in r}function cv(r){return!!r&&"nullValue"in r}function hv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rc(r){return!!r&&"mapValue"in r}function lR(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[aE])===null||n===void 0?void 0:n.stringValue)===oE}function bl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return hs(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=bl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function uR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===oR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(n)}setAll(e){let n=_n.emptyPath(),s={},l=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=bl(f):l.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Rc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){hs(n,(l,u)=>e[l]=u);for(const l of s)delete e[l]}clone(){return new Ln(bl(this.value))}}function lE(r){const e=[];return hs(r.fields,(n,s)=>{const l=new _n([n]);if(Rc(s)){const u=lE(s.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,s,l,u,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new wn(e,0,Qe.min(),Qe.min(),Qe.min(),Ln.empty(),0)}static newFoundDocument(e,n,s,l){return new wn(e,1,n,Qe.min(),s,l,0)}static newNoDocument(e,n){return new wn(e,2,n,Qe.min(),Qe.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Qe.min(),Qe.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function fv(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const u=e[l],f=r.position[l];if(u.field.isKeyField()?s=Me.comparator(Me.fromName(f.referenceValue),n.key):s=to(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function dv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!qi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function cR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{}class $t extends uE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new fR(e,n,s):n==="array-contains"?new gR(e,s):n==="in"?new pR(e,s):n==="not-in"?new yR(e,s):n==="array-contains-any"?new _R(e,s):new $t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new dR(e,s):new mR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends uE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ti(e,n)}matches(e){return cE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function cE(r){return r.op==="and"}function hE(r){return hR(r)&&cE(r)}function hR(r){for(const e of r.filters)if(e instanceof Ti)return!1;return!0}function Kd(r){if(r instanceof $t)return r.field.canonicalString()+r.op.toString()+no(r.value);if(hE(r))return r.filters.map(e=>Kd(e)).join(",");{const e=r.filters.map(n=>Kd(n)).join(",");return`${r.op}(${e})`}}function fE(r,e){return r instanceof $t?function(s,l){return l instanceof $t&&s.op===l.op&&s.field.isEqual(l.field)&&qi(s.value,l.value)}(r,e):r instanceof Ti?function(s,l){return l instanceof Ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((u,f,g)=>u&&fE(f,l.filters[g]),!0):!1}(r,e):void Be(19439)}function dE(r){return r instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`}(r):r instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(dE).join(" ,")+"}"}(r):"Filter"}class fR extends $t{constructor(e,n,s){super(e,n,s),this.key=Me.fromName(s.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class dR extends $t{constructor(e,n){super(e,"in",n),this.keys=mE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mR extends $t{constructor(e,n){super(e,"not-in",n),this.keys=mE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mE(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Me.fromName(s.referenceValue))}class gR extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Am(n)&&Dl(n.arrayValue,this.value)}}class pR extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class yR extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dl(this.value.arrayValue,n)}}class _R extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Am(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Dl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n=null,s=[],l=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=f,this.endAt=g,this.Ie=null}}function mv(r,e=null,n=[],s=[],l=null,u=null,f=null){return new vR(r,e,n,s,l,u,f)}function wm(r){const e=Ye(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Kd(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>no(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>no(s)).join(",")),e.Ie=n}return e.Ie}function Rm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!cR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!fE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!dv(r.startAt,e.startAt)&&dv(r.endAt,e.endAt)}function Qd(r){return Me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n=null,s=[],l=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ER(r,e,n,s,l,u,f,g){return new jl(r,e,n,s,l,u,f,g)}function gE(r){return new jl(r)}function gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function pE(r){return r.collectionGroup!==null}function Tl(r){const e=Ye(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new en(_n.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new qc(u,s))}),n.has(_n.keyField().canonicalString())||e.Ee.push(new qc(_n.keyField(),s))}return e.Ee}function ji(r){const e=Ye(r);return e.de||(e.de=bR(e,Tl(r))),e.de}function bR(r,e){if(r.limitType==="F")return mv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(l=>{const u=l.dir==="desc"?"asc":"desc";return new qc(l.field,u)});const n=r.endAt?new Hc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Hc(r.startAt.position,r.startAt.inclusive):null;return mv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function Yd(r,e){const n=r.filters.concat([e]);return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function $d(r,e,n){return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function sh(r,e){return Rm(ji(r),ji(e))&&r.limitType===e.limitType}function yE(r){return`${wm(ji(r))}|lt:${r.limitType}`}function Fa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>dE(l)).join(", ")}]`),ih(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>no(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>no(l)).join(",")),`Target(${s})`}(ji(r))}; limitType=${r.limitType})`}function ah(r,e){return e.isFoundDocument()&&function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Me.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,l){for(const u of Tl(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0}(r,e)&&function(s,l){return!(s.startAt&&!function(f,g,y){const p=fv(f,g,y);return f.inclusive?p<=0:p<0}(s.startAt,Tl(s),l)||s.endAt&&!function(f,g,y){const p=fv(f,g,y);return f.inclusive?p>=0:p>0}(s.endAt,Tl(s),l))}(r,e)}function TR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _E(r){return(e,n)=>{let s=!1;for(const l of Tl(r)){const u=SR(l,e,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function SR(r,e,n){const s=r.field.isKeyField()?Me.comparator(e.key,n.key):function(u,f,g){const y=f.data.field(u),p=g.data.field(u);return y!==null&&p!==null?to(y,p):Be(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Be(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(n,s)=>{for(const[l,u]of s)e(l,u)})}isEmpty(){return eE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new Vt(Me.comparator);function Er(){return AR}const vE=new Vt(Me.comparator);function pl(...r){let e=vE;for(const n of r)e=e.insert(n.key,n);return e}function EE(r){let e=vE;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Gs(){return Sl()}function bE(){return Sl()}function Sl(){return new Ws(r=>r.toString(),(r,e)=>r.isEqual(e))}const wR=new Vt(Me.comparator),RR=new en(Me.comparator);function st(...r){let e=RR;for(const n of r)e=e.add(n);return e}const IR=new en(We);function NR(){return IR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function TE(r){return{integerValue:""+r}}function CR(r,e){return nR(e)?TE(e):Im(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function DR(r,e,n){return r instanceof Fc?function(l,u){const f={fields:{[iE]:{stringValue:nE},[sE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Sm(u)&&(u=rh(u)),u&&(f.fields[rE]=u),{mapValue:f}}(n,e):r instanceof xl?AE(r,e):r instanceof Ol?wE(r,e):function(l,u){const f=SE(l,u),g=pv(f)+pv(l.Re);return Gd(f)&&Gd(l.Re)?TE(g):Im(l.serializer,g)}(r,e)}function xR(r,e,n){return r instanceof xl?AE(r,e):r instanceof Ol?wE(r,e):n}function SE(r,e){return r instanceof Gc?function(s){return Gd(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Fc extends oh{}class xl extends oh{constructor(e){super(),this.elements=e}}function AE(r,e){const n=RE(e);for(const s of r.elements)n.some(l=>qi(l,s))||n.push(s);return{arrayValue:{values:n}}}class Ol extends oh{constructor(e){super(),this.elements=e}}function wE(r,e){let n=RE(e);for(const s of r.elements)n=n.filter(l=>!qi(l,s));return{arrayValue:{values:n}}}class Gc extends oh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function pv(r){return qt(r.integerValue||r.doubleValue)}function RE(r){return Am(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function OR(r,e){return r.field.isEqual(e.field)&&function(s,l){return s instanceof xl&&l instanceof xl||s instanceof Ol&&l instanceof Ol?eo(s.elements,l.elements,qi):s instanceof Gc&&l instanceof Gc?qi(s.Re,l.Re):s instanceof Fc&&l instanceof Fc}(r.transform,e.transform)}class kR{constructor(e,n){this.version=e,this.transformResults=n}}class ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lh{}function IE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Nm(r.key,ai.none()):new Bl(r.key,r.data,ai.none());{const n=r.data,s=Ln.empty();let l=new en(_n.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),l=l.add(u)}return new fs(r.key,s,new Yn(l.toArray()),ai.none())}}function MR(r,e,n){r instanceof Bl?function(l,u,f){const g=l.value.clone(),y=_v(l.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,n):r instanceof fs?function(l,u,f){if(!Ic(l.precondition,u))return void u.convertToUnknownDocument(f.version);const g=_v(l.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(NE(l)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(r,e,n):function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Al(r,e,n,s){return r instanceof Bl?function(u,f,g,y){if(!Ic(u.precondition,f))return g;const p=u.value.clone(),A=vv(u.fieldTransforms,y,f);return p.setAll(A),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(r,e,n,s):r instanceof fs?function(u,f,g,y){if(!Ic(u.precondition,f))return g;const p=vv(u.fieldTransforms,y,f),A=f.data;return A.setAll(NE(u)),A.setAll(p),f.convertToFoundDocument(f.version,A).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(N=>N.field))}(r,e,n,s):function(u,f,g){return Ic(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(r,e,n)}function VR(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),u=SE(s.transform,l||null);u!=null&&(n===null&&(n=Ln.empty()),n.set(s.field,u))}return n||null}function yv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&eo(s,l,(u,f)=>OR(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bl extends lh{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class fs extends lh{constructor(e,n,s,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function NE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function _v(r,e,n){const s=new Map;yt(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let l=0;l<n.length;l++){const u=r[l],f=u.transform,g=e.data.field(u.field);s.set(u.field,xR(f,g,n[l]))}return s}function vv(r,e,n){const s=new Map;for(const l of r){const u=l.transform,f=n.data.field(l.field);s.set(l.field,DR(u,f,e))}return s}class Nm extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&MR(u,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Al(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Al(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bE();return this.mutations.forEach(l=>{const u=e.get(l.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(l.key)?null:g;const y=IE(f,g);y!==null&&s.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Qe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),st())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(n,s)=>yv(n,s))&&eo(this.baseMutations,e.baseMutations,(n,s)=>yv(n,s))}}class Cm{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){yt(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let l=function(){return wR}();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,s[f].version);return new Cm(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,ut;function jR(r){switch(r){case le.OK:return Be(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Be(15467,{code:r})}}function CE(r){if(r===void 0)return vr("GRPC error has no .code"),le.UNKNOWN;switch(r){case Yt.OK:return le.OK;case Yt.CANCELLED:return le.CANCELLED;case Yt.UNKNOWN:return le.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return le.INTERNAL;case Yt.UNAVAILABLE:return le.UNAVAILABLE;case Yt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Yt.NOT_FOUND:return le.NOT_FOUND;case Yt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Yt.ABORTED:return le.ABORTED;case Yt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Yt.DATA_LOSS:return le.DATA_LOSS;default:return Be(39323,{code:r})}}(ut=Yt||(Yt={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new ns([4294967295,4294967295],0);function Ev(r){const e=Z0().encode(r),n=new q0;return n.update(e),new Uint8Array(n.digest())}function bv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ns([n,s],0),new ns([l,u],0)]}class Dm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(s<0)throw new yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ns.fromNumber(this.pe)}we(e,n,s){let l=e.add(n.multiply(ns.fromNumber(s)));return l.compare(BR)===1&&(l=new ns([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Ev(e),[s,l]=bv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,l,u);if(!this.be(f))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Dm(u,l,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=Ev(e),[s,l]=bv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,l,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,s,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new uh(Qe.min(),l,new Vt(We),Er(),st())}}class Hl{constructor(e,n,s,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Hl(s,n,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,s,l){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=l}}class DE{constructor(e,n){this.targetId=e,this.Ce=n}}class xE{constructor(e,n,s=vn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Tv{constructor(){this.Fe=0,this.Me=Sv(),this.xe=vn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=st(),n=st(),s=st();return this.Me.forEach((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Be(38017,{changeType:u})}}),new Hl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Sv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,yt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class HR{constructor(e){this.ze=e,this.je=new Map,this.He=Er(),this.Je=pc(),this.Ye=pc(),this.Ze=new Vt(We)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,s=e.Ce.count,l=this._t(n);if(l){const u=l.target;if(Qd(u))if(s===0){const f=new Me(u.path);this.tt(n,f,wn.newNoDocument(f,Qe.min()))}else yt(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const g=this.ct(e),y=g?this.lt(g,e,f):1;if(y!==0){this.st(n);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let f,g;try{f=os(s).toUint8Array()}catch(y){if(y instanceof tE)return Ja("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Dm(f,l,u)}catch(y){return Ja(y instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.pe===0?null:g}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let l=0;return s.forEach(u=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,u,null),l++)}),l}It(e){const n=new Map;this.je.forEach((u,f)=>{const g=this._t(f);if(g){if(u.current&&Qd(g.target)){const y=new Me(g.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,wn.newNoDocument(y,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let s=st();this.Ye.forEach((u,f)=>{let g=!0;f.forEachWhile(y=>{const p=this._t(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const l=new uh(e,n,this.Ze,this.He,s);return this.He=Er(),this.Je=pc(),this.Ye=pc(),this.Ze=new Vt(We),l}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Tv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new en(We),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new en(We),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Tv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function pc(){return new Vt(Me.comparator)}function Sv(){return new Vt(Me.comparator)}const qR={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GR={and:"AND",or:"OR"};class KR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xd(r,e){return r.useProto3Json||ih(e)?e:{value:e}}function Kc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function QR(r,e){return Kc(r,e.toTimestamp())}function Bi(r){return yt(!!r,49232),Qe.fromTimestamp(function(n){const s=as(n);return new pt(s.seconds,s.nanos)}(r))}function xm(r,e){return Zd(r,e).canonicalString()}function Zd(r,e){const n=function(l){return new Dt(["projects",l.projectId,"databases",l.database])}(r).child("documents");return e===void 0?n:n.child(e)}function kE(r){const e=Dt.fromString(r);return yt(LE(e),10190,{key:e.toString()}),e}function Wd(r,e){return xm(r.databaseId,e.path)}function Cd(r,e){const n=kE(e);if(n.get(1)!==r.databaseId.projectId)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Ae(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Me(VE(n))}function ME(r,e){return xm(r.databaseId,e)}function YR(r){const e=kE(r);return e.length===4?Dt.emptyPath():VE(e)}function Jd(r){return new Dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function VE(r){return yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Av(r,e,n){return{name:Wd(r,e),fields:n.value.mapValue.fields}}function $R(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=function(p,A){return p.useProto3Json?(yt(A===void 0||typeof A=="string",58123),vn.fromBase64String(A||"")):(yt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),vn.fromUint8Array(A||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(p){const A=p.code===void 0?le.UNKNOWN:CE(p.code);return new Ae(A,p.message||"")}(f);n=new xE(s,l,u,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Cd(r,s.document.name),u=Bi(s.document.updateTime),f=s.document.createTime?Bi(s.document.createTime):Qe.min(),g=new Ln({mapValue:{fields:s.document.fields}}),y=wn.newFoundDocument(l,u,f,g),p=s.targetIds||[],A=s.removedTargetIds||[];n=new Nc(p,A,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Cd(r,s.document),u=s.readTime?Bi(s.readTime):Qe.min(),f=wn.newNoDocument(l,u),g=s.removedTargetIds||[];n=new Nc([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Cd(r,s.document),u=s.removedTargetIds||[];n=new Nc([],u,l,null)}else{if(!("filter"in e))return Be(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,f=new UR(l,u),g=s.targetId;n=new DE(g,f)}}return n}function XR(r,e){let n;if(e instanceof Bl)n={update:Av(r,e.key,e.value)};else if(e instanceof Nm)n={delete:Wd(r,e.key)};else if(e instanceof fs)n={update:Av(r,e.key,e.data),updateMask:sI(e.fieldMask)};else{if(!(e instanceof PR))return Be(16599,{ft:e.type});n={verify:Wd(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const g=f.transform;if(g instanceof Fc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof xl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ol)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Gc)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Be(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(l,u){return u.updateTime!==void 0?{updateTime:QR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Be(27497)}(r,e.precondition)),n}function ZR(r,e){return r&&r.length>0?(yt(e!==void 0,14353),r.map(n=>function(l,u){let f=l.updateTime?Bi(l.updateTime):Bi(u);return f.isEqual(Qe.min())&&(f=Bi(u)),new kR(f,l.transformResults||[])}(n,e))):[]}function WR(r,e){return{documents:[ME(r,e.path)]}}function JR(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ME(r,l);const u=function(p){if(p.length!==0)return zE(Ti.create(p,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(p){if(p.length!==0)return p.map(A=>function(k){return{field:Ga(k.field),direction:nI(k.dir)}}(A))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Xd(r,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:l}}function eI(r){let e=YR(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){yt(s===1,65062);const A=n.from[0];A.allDescendants?l=A.collectionId:e=e.child(A.collectionId)}let u=[];n.where&&(u=function(N){const k=PE(N);return k instanceof Ti&&hE(k)?k.getFilters():[k]}(n.where));let f=[];n.orderBy&&(f=function(N){return N.map(k=>function(te){return new qc(Ka(te.field),function(re){switch(re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(te.direction))}(k))}(n.orderBy));let g=null;n.limit&&(g=function(N){let k;return k=typeof N=="object"?N.value:N,ih(k)?null:k}(n.limit));let y=null;n.startAt&&(y=function(N){const k=!!N.before,Q=N.values||[];return new Hc(Q,k)}(n.startAt));let p=null;return n.endAt&&(p=function(N){const k=!N.before,Q=N.values||[];return new Hc(Q,k)}(n.endAt)),ER(e,l,f,u,g,"F",y,p)}function tI(r,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ka(n.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ka(n.unaryFilter.field);return $t.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ka(n.unaryFilter.field);return $t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ka(n.unaryFilter.field);return $t.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(r):r.fieldFilter!==void 0?function(n){return $t.create(Ka(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(s=>PE(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(n.compositeFilter.op))}(r):Be(30097,{filter:r})}function nI(r){return qR[r]}function iI(r){return FR[r]}function rI(r){return GR[r]}function Ga(r){return{fieldPath:r.canonicalString()}}function Ka(r){return _n.fromServerFormat(r.fieldPath)}function zE(r){return r instanceof $t?function(n){if(n.op==="=="){if(hv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(cv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(cv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:iI(n.op),value:n.value}}}(r):r instanceof Ti?function(n){const s=n.getFilters().map(l=>zE(l));return s.length===1?s[0]:{compositeFilter:{op:rI(n.op),filters:s}}}(r):Be(54877,{filter:r})}function sI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,s,l,u=Qe.min(),f=Qe.min(),g=vn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.wt=e}}function oI(r){const e=eI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Cn=new uI}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(ss.min())}updateCollectionGroup(e,n,s){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class uI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new en(Dt.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new en(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UE=41943040;class zn{static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(UE,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new io(0)}static lr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LruGarbageCollector",cI=1048576;function Iv([r,e],[n,s]){const l=We(r,n);return l===0?We(e,s):l}class hI{constructor(e){this.Er=e,this.buffer=new en(Iv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Iv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Te(Rv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?Te(Rv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.mr(3e5)})}}class dI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(nh.le);const s=new hI(n);return this.gr.forEachTarget(e,l=>s.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>s.Rr(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(wv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,l,u,f,g,y,p;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),l=this.params.maximumSequenceNumbersToCollect):l=N,f=Date.now(),this.nthSequenceNumber(e,l))).next(N=>(s=N,g=Date.now(),this.removeTargets(e,s,n))).next(N=>(u=N,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(p=Date.now(),qa()<=rt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-A}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${N} documents in `+(p-y)+`ms
Total Duration: ${p-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:N})))}}function mI(r,e){return new dI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?oe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(s!==null&&Al(s.mutation,l,Yn.empty(),pt.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,st()).next(()=>s))}getLocalViewOfDocuments(e,n,s=st()){const l=Gs();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(u=>{let f=pl();return u.forEach((g,y)=>{f=f.insert(g,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,st()))}populateOverlays(e,n,s){const l=[];return s.forEach(u=>{n.has(u)||l.push(u)}),this.documentOverlayCache.getOverlays(e,l).next(u=>{u.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,l){let u=Er();const f=Sl(),g=function(){return Sl()}();return n.forEach((y,p)=>{const A=s.get(p.key);l.has(p.key)&&(A===void 0||A.mutation instanceof fs)?u=u.insert(p.key,p):A!==void 0?(f.set(p.key,A.mutation.getFieldMask()),Al(A.mutation,p,A.mutation.getFieldMask(),pt.now())):f.set(p.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((p,A)=>f.set(p,A)),n.forEach((p,A)=>{var N;return g.set(p,new pI(A,(N=f.get(p))!==null&&N!==void 0?N:null))}),g))}recalculateAndSaveOverlays(e,n){const s=Sl();let l=new Vt((f,g)=>f-g),u=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(y=>{const p=n.get(y);if(p===null)return;let A=s.get(y)||Yn.empty();A=g.applyToLocalView(p,A),s.set(y,A);const N=(l.get(g.batchId)||st()).add(y);l=l.insert(g.batchId,N)})}).next(()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,A=y.value,N=bE();A.forEach(k=>{if(!u.has(k)){const Q=IE(n.get(k),s.get(k));Q!==null&&N.set(k,Q),u=u.add(k)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,N))}return oe.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,l){return function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-u.size):oe.resolve(Gs());let g=Il,y=u;return f.next(p=>oe.forEach(p,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?oe.resolve():this.remoteDocumentCache.getEntry(e,A).next(k=>{y=y.insert(A,k)}))).next(()=>this.populateOverlays(e,p,u)).next(()=>this.computeViews(e,y,p,st())).next(A=>({batchId:g,changes:EE(A)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(s=>{let l=pl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const u=n.collectionGroup;let f=pl();return this.indexManager.getCollectionParents(e,u).next(g=>oe.forEach(g,y=>{const p=function(N,k){return new jl(k,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,l).next(A=>{A.forEach((N,k)=>{f=f.insert(N,k)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,l))).next(f=>{u.forEach((y,p)=>{const A=p.getKey();f.get(A)===null&&(f=f.insert(A,wn.newInvalidDocument(A)))});let g=pl();return f.forEach((y,p)=>{const A=u.get(y);A!==void 0&&Al(A.mutation,p,Yn.empty(),pt.now()),ah(n,p)&&(g=g.insert(y,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return oe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:Bi(l.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:oI(l.bundledQuery),readTime:Bi(l.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new Vt(Me.comparator),this.Qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Gs();return oe.forEach(n,l=>this.getOverlay(e,l).next(u=>{u!==null&&s.set(l,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,u)=>{this.St(e,n,u)}),oe.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.Qr.get(s);return l!==void 0&&(l.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,n,s){const l=Gs(),u=n.length+1,f=new Me(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>s&&l.set(y.getKey(),y)}return oe.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let u=new Vt((p,A)=>p-A);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let A=u.get(p.largestBatchId);A===null&&(A=Gs(),u=u.insert(p.largestBatchId,A)),A.set(p.getKey(),p)}}const g=Gs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((p,A)=>g.set(p,A)),!(g.size()>=l)););return oe.resolve(g)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(s.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new LR(n,s));let u=this.Qr.get(n);u===void 0&&(u=st(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.$r=new en(cn.Ur),this.Kr=new en(cn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new cn(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new cn(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Me(new Dt([])),s=new cn(n,e),l=new cn(n,e+1),u=[];return this.Kr.forEachInRange([s,l],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Me(new Dt([])),s=new cn(n,e),l=new cn(n,e+1);let u=st();return this.Kr.forEachInRange([s,l],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new cn(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class cn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Me.comparator(e.key,n.key)||We(e.Zr,n.Zr)}static Wr(e,n){return We(e.Zr,n.Zr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new en(cn.Ur)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new zR(u,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Xr=this.Xr.add(new cn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(f)}lookupMutationBatch(e,n){return oe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ti(s),u=l<0?0:l;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Tm:this.nr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new cn(n,0),l=new cn(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,l],f=>{const g=this.ei(f.Zr);u.push(g)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new en(We);return n.forEach(l=>{const u=new cn(l,0),f=new cn(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],g=>{s=s.add(g.Zr)})}),oe.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let u=s;Me.isDocumentKey(u)||(u=u.child(""));const f=new cn(new Me(u),0);let g=new en(We);return this.Xr.forEachWhile(y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===l&&(g=g.add(y.Zr)),!0)},f),oe.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(s=>{const l=this.ei(s);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){yt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return oe.forEach(n.mutations,l=>{const u=new cn(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new cn(n,0),l=this.Xr.firstAfterOrEqual(s);return oe.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.ii=e,this.docs=function(){return new Vt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return oe.resolve(s?s.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let s=Er();return n.forEach(l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():wn.newInvalidDocument(l))}),oe.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let u=Er();const f=n.path,g=new Me(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:A}}=y.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||Ww(Zw(A),s)<=0||(l.has(A.key)||ah(n,A))&&(u=u.insert(A.key,A.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,n,s,l){Be(9500)}si(e,n){return oe.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new SI(this)}getSize(e){return oe.resolve(this.size)}}class SI extends gI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(s)}),oe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.persistence=e,this.oi=new Ws(n=>wm(n),Rm),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this._i=0,this.ai=new Om,this.targetCount=0,this.ui=io.cr()}forEachTarget(e,n){return this.oi.forEach((s,l)=>n(l)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),oe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new io(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Tr(n),oe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,s){let l=0;const u=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),oe.waitFor(u).next(()=>l)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return oe.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),oe.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach(f=>{u.push(l.markPotentiallyOrphaned(e,f))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return oe.resolve(s)}containsKey(e,n){return oe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.ci={},this.overlays={},this.li=new nh(0),this.hi=!1,this.hi=!0,this.Pi=new EI,this.referenceDelegate=e(this),this.Ti=new AI(this),this.indexManager=new lI,this.remoteDocumentCache=function(l){return new TI(l)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new aI(n),this.Ei=new _I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new bI(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){Te("MemoryPersistence","Starting transaction:",e);const l=new wI(this.li.next());return this.referenceDelegate.di(),s(l).next(u=>this.referenceDelegate.Ai(l).next(()=>u)).toPromise().then(u=>(l.raiseOnCommittedEvent(),u))}Ri(e,n){return oe.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class wI extends eR{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Vi=new Om,this.mi=null}static fi(e){return new km(e)}get gi(){if(this.mi)return this.mi;throw Be(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),oe.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.gi,s=>{const l=Me.fromPath(s);return this.pi(e,l).next(u=>{u||n.removeEntry(l,Qe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return oe.or([()=>oe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Qc{constructor(e,n){this.persistence=e,this.yi=new Ws(s=>iR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=mI(this,n)}static fi(e,n){return new Qc(e,n)}di(){}Ai(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return oe.forEach(this.yi,(s,l)=>this.Dr(e,s,l).next(u=>u?oe.resolve():n(l)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.si(e,f=>this.Dr(e,f,n).next(g=>{g||(s++,u.removeEntry(f,Qe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),oe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wc(e.data.value)),n}Dr(e,n,s){return oe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return oe.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.ds=s,this.As=l}static Rs(e,n){let s=st(),l=st();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Mm(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ES()?8:tR(Rn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,l){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,l,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new RI;return this.Ss(e,n,f).next(g=>{if(u.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>u.result)}Ds(e,n,s,l){return s.documentReadCount<this.gs?(qa()<=rt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),oe.resolve()):(qa()<=rt.DEBUG&&Te("QueryEngine","Query:",Fa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ps*l?(qa()<=rt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(n))):oe.resolve())}ws(e,n){if(gv(n))return oe.resolve(null);let s=ji(n);return this.indexManager.getIndexType(e,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=$d(n,null,"F"),s=ji(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=st(...u);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(y=>{const p=this.vs(n,g);return this.Cs(n,p,f,y.readTime)?this.ws(e,$d(n,null,"F")):this.Fs(e,p,n,y)}))})))}bs(e,n,s,l){return gv(n)||l.isEqual(Qe.min())?oe.resolve(null):this.ys.getDocuments(e,s).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,s,l)?oe.resolve(null):(qa()<=rt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Fa(n)),this.Fs(e,f,n,Xw(l,Il)).next(g=>g))})}vs(e,n){let s=new en(_E(e));return n.forEach((l,u)=>{ah(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,s){return qa()<=rt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Fa(n)),this.ys.getDocumentsMatchingQuery(e,n,ss.min(),s)}Fs(e,n,s,l){return this.ys.getDocumentsMatchingQuery(e,s,l).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="LocalStore",NI=3e8;class CI{constructor(e,n,s,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new Vt(We),this.Os=new Ws(u=>wm(u),Rm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function DI(r,e,n,s){return new CI(r,e,n,s)}async function BE(r,e){const n=Ye(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(u=>(l=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],g=[];let y=st();for(const p of l){f.push(p.batchId);for(const A of p.mutations)y=y.add(A.key)}for(const p of u){g.push(p.batchId);for(const A of p.mutations)y=y.add(A.key)}return n.localDocuments.getDocuments(s,y).next(p=>({ks:p,removedBatchIds:f,addedBatchIds:g}))})})}function xI(r,e){const n=Ye(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,y,p,A){const N=p.batch,k=N.keys();let Q=oe.resolve();return k.forEach(te=>{Q=Q.next(()=>A.getEntry(y,te)).next(fe=>{const re=p.docVersions.get(te);yt(re!==null,48541),fe.version.compareTo(re)<0&&(N.applyToRemoteDocument(fe,p),fe.isValidDocument()&&(fe.setReadTime(p.commitVersion),A.addEntry(fe)))})}),Q.next(()=>g.mutationQueue.removeMutationBatch(y,N))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=st();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}function HE(r){const e=Ye(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function OI(r,e){const n=Ye(r),s=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const g=[];e.targetChanges.forEach((A,N)=>{const k=l.get(N);if(!k)return;g.push(n.Ti.removeMatchingKeys(u,A.removedDocuments,N).next(()=>n.Ti.addMatchingKeys(u,A.addedDocuments,N)));let Q=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(N)!==null?Q=Q.withResumeToken(vn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):A.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(A.resumeToken,s)),l=l.insert(N,Q),function(fe,re,Re){return fe.resumeToken.approximateByteSize()===0||re.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=NI?!0:Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0}(k,Q,A)&&g.push(n.Ti.updateTargetData(u,Q))});let y=Er(),p=st();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(kI(u,f,e.documentUpdates).next(A=>{y=A.qs,p=A.Qs})),!s.isEqual(Qe.min())){const A=n.Ti.getLastRemoteSnapshotVersion(u).next(N=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));g.push(A)}return oe.waitFor(g).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,p)).next(()=>y)}).then(u=>(n.xs=l,u))}function kI(r,e,n){let s=st(),l=st();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=Er();return n.forEach((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(Qe.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):Te(Vm,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)}),{qs:f,Qs:l}})}function MI(r,e){const n=Ye(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Tm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function VI(r,e){const n=Ye(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Ti.getTargetData(s,e).next(u=>u?(l=u,oe.resolve(l)):n.Ti.allocateTargetId(s).next(f=>(l=new Wr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.xs.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function em(r,e,n){const s=Ye(r),l=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!co(f))throw f;Te(Vm,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(l.target)}function Nv(r,e,n){const s=Ye(r);let l=Qe.min(),u=st();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,p,A){const N=Ye(y),k=N.Os.get(A);return k!==void 0?oe.resolve(N.xs.get(k)):N.Ti.getTargetData(p,A)}(s,f,ji(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,g.targetId).next(y=>{u=y})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?l:Qe.min(),n?u:st())).next(g=>(PI(s,TR(e),g),{documents:g,$s:u})))}function PI(r,e,n){let s=r.Ns.get(e)||Qe.min();n.forEach((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class Cv{constructor(){this.activeTargetIds=NR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zI{constructor(){this.xo=new Cv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Cv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="ConnectivityMonitor";class xv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Te(Dv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Te(Dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function tm(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="RestConnection",UI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jI{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${l}`,this.Go=this.databaseId.database===jc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}zo(e,n,s,l,u){const f=tm(),g=this.jo(e,n.toUriEncodedString());Te(Dd,`Sending RPC '${e}' ${f}:`,g,s);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,l,u);const{host:p}=new URL(g),A=Ml(p);return this.Jo(e,g,y,s,A).then(N=>(Te(Dd,`Received RPC '${e}' ${f}: `,N),N),N=>{throw Ja(Dd,`RPC '${e}' ${f} failed with error: `,N,"url: ",g,"request:",s),N})}Yo(e,n,s,l,u,f){return this.zo(e,n,s,l,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,u)=>e[u]=l),s&&s.headers.forEach((l,u)=>e[u]=l)}jo(e,n){const s=UI[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class HI extends jI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,u){const f=tm();return new Promise((g,y)=>{const p=new F0;p.setWithCredentials(!0),p.listenOnce(G0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ac.NO_ERROR:const N=p.getResponseJson();Te(Sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(N)),g(N);break;case Ac.TIMEOUT:Te(Sn,`RPC '${e}' ${f} timed out`),y(new Ae(le.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:const k=p.getStatus();if(Te(Sn,`RPC '${e}' ${f} failed with status:`,k,"response text:",p.getResponseText()),k>0){let Q=p.getResponseJson();Array.isArray(Q)&&(Q=Q[0]);const te=Q==null?void 0:Q.error;if(te&&te.status&&te.message){const fe=function(Re){const Ne=Re.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Ne)>=0?Ne:le.UNKNOWN}(te.status);y(new Ae(fe,te.message))}else y(new Ae(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new Ae(le.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{h_:e,streamId:f,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Te(Sn,`RPC '${e}' ${f} completed.`)}});const A=JSON.stringify(l);Te(Sn,`RPC '${e}' ${f} sending request:`,l),p.send(n,"POST",A,s,15)})}I_(e,n,s){const l=tm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Y0(),g=Q0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const A=u.join("");Te(Sn,`Creating RPC '${e}' stream ${l}: ${A}`,y);const N=f.createWebChannel(A,y);this.E_(N);let k=!1,Q=!1;const te=new BI({Zo:re=>{Q?Te(Sn,`Not sending because RPC '${e}' stream ${l} is closed:`,re):(k||(Te(Sn,`Opening RPC '${e}' stream ${l} transport.`),N.open(),k=!0),Te(Sn,`RPC '${e}' stream ${l} sending:`,re),N.send(re))},Xo:()=>N.close()}),fe=(re,Re,Ne)=>{re.listen(Re,_e=>{try{Ne(_e)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return fe(N,gl.EventType.OPEN,()=>{Q||(Te(Sn,`RPC '${e}' stream ${l} transport opened.`),te.__())}),fe(N,gl.EventType.CLOSE,()=>{Q||(Q=!0,Te(Sn,`RPC '${e}' stream ${l} transport closed`),te.u_(),this.d_(N))}),fe(N,gl.EventType.ERROR,re=>{Q||(Q=!0,Ja(Sn,`RPC '${e}' stream ${l} transport errored. Name:`,re.name,"Message:",re.message),te.u_(new Ae(le.UNAVAILABLE,"The operation could not be completed")))}),fe(N,gl.EventType.MESSAGE,re=>{var Re;if(!Q){const Ne=re.data[0];yt(!!Ne,16349);const _e=Ne,Fe=(_e==null?void 0:_e.error)||((Re=_e[0])===null||Re===void 0?void 0:Re.error);if(Fe){Te(Sn,`RPC '${e}' stream ${l} received error:`,Fe);const Ie=Fe.status;let Ce=function(T){const I=Yt[T];if(I!==void 0)return CE(I)}(Ie),M=Fe.message;Ce===void 0&&(Ce=le.INTERNAL,M="Unknown error status: "+Ie+" with message "+Fe.message),Q=!0,te.u_(new Ae(Ce,M)),N.close()}else Te(Sn,`RPC '${e}' stream ${l} received:`,Ne),te.c_(Ne)}}),fe(g,K0.STAT_EVENT,re=>{re.stat===Hd.PROXY?Te(Sn,`RPC '${e}' stream ${l} detected buffering proxy`):re.stat===Hd.NOPROXY&&Te(Sn,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{te.a_()},0),te}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(r){return new KR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,s=1e3,l=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=l,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),l=Math.max(0,n-s);l>0&&Te("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="PersistentStream";class FE{constructor(e,n,s,l,u,f,g,y){this.xi=e,this.S_=s,this.D_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new qE(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.v_===n&&this.z_(s,l)},s=>{e(()=>{const l=new Ae(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(l)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{s(()=>this.j_(l))}),this.stream.onMessage(l=>{s(()=>++this.M_==1?this.J_(l):this.onNext(l))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Te(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Te(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qI extends FE{constructor(e,n,s,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=$R(this.serializer,e),s=function(u){if(!("targetChange"in u))return Qe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Qe.min():f.readTime?Bi(f.readTime):Qe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=Jd(this.serializer),n.addTarget=function(u,f){let g;const y=f.target;if(g=Qd(y)?{documents:WR(u,y)}:{query:JR(u,y).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=OE(u,f.resumeToken);const p=Xd(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Qe.min())>0){g.readTime=Kc(u,f.snapshotVersion.toTimestamp());const p=Xd(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,e);const s=tI(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=Jd(this.serializer),n.removeTarget=e,this.Q_(n)}}class FI extends FE{constructor(e,n,s,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=ZR(e.writeResults,e.commitTime),s=Bi(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=Jd(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>XR(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{}class KI extends GI{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.sa=!1}oa(){if(this.sa)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,Zd(n,s),l,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(le.UNKNOWN,u.toString())})}Yo(e,n,s,l,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,Zd(n,s),l,f,g,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ae(le.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class QI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vr(n),this.ua=!1):Te("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class YI{constructor(e,n,s,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{s.enqueueAndForget(async()=>{Js(this)&&(Te(Zs,"Restarting streams for network reachability change."),await async function(y){const p=Ye(y);p.da.add(4),await ql(p),p.Va.set("Unknown"),p.da.delete(4),await hh(p)}(this))})}),this.Va=new QI(s,l)}}async function hh(r){if(Js(r))for(const e of r.Aa)await e(!0)}async function ql(r){for(const e of r.Aa)await e(!1)}function GE(r,e){const n=Ye(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Um(n)?Lm(n):ho(n).N_()&&zm(n,e))}function Pm(r,e){const n=Ye(r),s=ho(n);n.Ea.delete(e),s.N_()&&KE(n,e),n.Ea.size===0&&(s.N_()?s.k_():Js(n)&&n.Va.set("Unknown"))}function zm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ho(r).Z_(e)}function KE(r,e){r.ma.Ke(e),ho(r).X_(e)}function Lm(r){r.ma=new HR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ho(r).start(),r.Va.ca()}function Um(r){return Js(r)&&!ho(r).O_()&&r.Ea.size>0}function Js(r){return Ye(r).da.size===0}function QE(r){r.ma=void 0}async function $I(r){r.Va.set("Online")}async function XI(r){r.Ea.forEach((e,n)=>{zm(r,e)})}async function ZI(r,e){QE(r),Um(r)?(r.Va.Pa(e),Lm(r)):r.Va.set("Unknown")}async function WI(r,e,n){if(r.Va.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await async function(l,u){const f=u.cause;for(const g of u.targetIds)l.Ea.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ea.delete(g),l.ma.removeTarget(g))}(r,e)}catch(s){Te(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yc(r,s)}else if(e instanceof Nc?r.ma.Xe(e):e instanceof DE?r.ma.ot(e):r.ma.nt(e),!n.isEqual(Qe.min()))try{const s=await HE(r.localStore);n.compareTo(s)>=0&&await function(u,f){const g=u.ma.It(f);return g.targetChanges.forEach((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const A=u.Ea.get(p);A&&u.Ea.set(p,A.withResumeToken(y.resumeToken,f))}}),g.targetMismatches.forEach((y,p)=>{const A=u.Ea.get(y);if(!A)return;u.Ea.set(y,A.withResumeToken(vn.EMPTY_BYTE_STRING,A.snapshotVersion)),KE(u,y);const N=new Wr(A.target,y,p,A.sequenceNumber);zm(u,N)}),u.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){Te(Zs,"Failed to raise snapshot:",s),await Yc(r,s)}}async function Yc(r,e,n){if(!co(e))throw e;r.da.add(1),await ql(r),r.Va.set("Offline"),n||(n=()=>HE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Te(Zs,"Retrying IndexedDB access"),await n(),r.da.delete(1),await hh(r)})}function YE(r,e){return e().catch(n=>Yc(r,n,e))}async function fh(r){const e=Ye(r),n=us(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Tm;for(;JI(e);)try{const l=await MI(e.localStore,s);if(l===null){e.Ia.length===0&&n.k_();break}s=l.batchId,e2(e,l)}catch(l){await Yc(e,l)}$E(e)&&XE(e)}function JI(r){return Js(r)&&r.Ia.length<10}function e2(r,e){r.Ia.push(e);const n=us(r);n.N_()&&n.ea&&n.ta(e.mutations)}function $E(r){return Js(r)&&!us(r).O_()&&r.Ia.length>0}function XE(r){us(r).start()}async function t2(r){us(r).ia()}async function n2(r){const e=us(r);for(const n of r.Ia)e.ta(n.mutations)}async function i2(r,e,n){const s=r.Ia.shift(),l=Cm.from(s,e,n);await YE(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await fh(r)}async function r2(r,e){e&&us(r).ea&&await async function(s,l){if(function(f){return jR(f)&&f!==le.ABORTED}(l.code)){const u=s.Ia.shift();us(s).L_(),await YE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l)),await fh(s)}}(r,e),$E(r)&&XE(r)}async function kv(r,e){const n=Ye(r);n.asyncQueue.verifyOperationInProgress(),Te(Zs,"RemoteStore received new credentials");const s=Js(n);n.da.add(3),await ql(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await hh(n)}async function s2(r,e){const n=Ye(r);e?(n.da.delete(2),await hh(n)):e||(n.da.add(2),await ql(n),n.Va.set("Unknown"))}function ho(r){return r.fa||(r.fa=function(n,s,l){const u=Ye(n);return u.oa(),new qI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(r.datastore,r.asyncQueue,{e_:$I.bind(null,r),n_:XI.bind(null,r),i_:ZI.bind(null,r),Y_:WI.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Um(r)?Lm(r):r.Va.set("Unknown")):(await r.fa.stop(),QE(r))})),r.fa}function us(r){return r.ga||(r.ga=function(n,s,l){const u=Ye(n);return u.oa(),new FI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:t2.bind(null,r),i_:r2.bind(null,r),na:n2.bind(null,r),ra:i2.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await fh(r)):(await r.ga.stop(),r.Ia.length>0&&(Te(Zs,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,s,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,u){const f=Date.now()+s,g=new jm(e,n,f,l,u);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(r,e){if(vr("AsyncQueue",`${e}: ${r}`),co(r))return new Ae(le.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(e){return new Xa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Me.comparator(n.key,s.key):(n,s)=>Me.comparator(n.key,s.key),this.keyedMap=pl(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Xa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.pa=new Vt(Me.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Be(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class ro{constructor(e,n,s,l,u,f,g,y,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,l,u){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new ro(e,n,Xa.emptySet(n),f,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class o2{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=Ye(n),u=l.queries;l.queries=Vv(),u.forEach((f,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new Ae(le.ABORTED,"Firestore shutting down"))}}function Vv(){return new Ws(r=>yE(r),sh)}async function l2(r,e){const n=Ye(r);let s=3;const l=e.query;let u=n.queries.get(l);u?!u.Da()&&e.va()&&(s=2):(u=new a2,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(l,!0);break;case 1:u.ba=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=Bm(f,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Hm(n)}async function u2(r,e){const n=Ye(r),s=e.query;let l=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=e.va()?0:1:!u.Da()&&e.va()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function c2(r,e){const n=Ye(r);let s=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Ma(l)&&(s=!0);f.ba=l}}s&&Hm(n)}function h2(r,e,n){const s=Ye(r),l=s.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);s.queries.delete(e)}function Hm(r){r.Ca.forEach(e=>{e.next()})}var nm,Pv;(Pv=nm||(nm={})).xa="default",Pv.Cache="cache";class f2{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class d2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=st(),this.mutatedKeys=st(),this.Za=_E(e),this.Xa=new Xa(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new Mv,l=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,p=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((A,N)=>{const k=l.get(A),Q=ah(this.query,N)?N:null,te=!!k&&this.mutatedKeys.has(k.key),fe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let re=!1;k&&Q?k.data.isEqual(Q.data)?te!==fe&&(s.track({type:3,doc:Q}),re=!0):this.ru(k,Q)||(s.track({type:2,doc:Q}),re=!0,(y&&this.Za(Q,y)>0||p&&this.Za(Q,p)<0)&&(g=!0)):!k&&Q?(s.track({type:0,doc:Q}),re=!0):k&&!Q&&(s.track({type:1,doc:k}),re=!0,(y||p)&&(g=!0)),re&&(Q?(f=f.add(Q),u=fe?u.add(A):u.delete(A)):(f=f.delete(A),u=u.delete(A)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const A=this.query.limitType==="F"?f.last():f.first();f=f.delete(A.key),u=u.delete(A.key),s.track({type:1,doc:A})}return{Xa:f,nu:s,Cs:g,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((A,N)=>function(Q,te){const fe=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Vt:re})}};return fe(Q)-fe(te)}(A.type,N.type)||this.Za(A.doc,N.doc)),this.iu(s),l=l!=null&&l;const g=n&&!l?this.su():[],y=this.Ya.size===0&&this.current&&!l?1:0,p=y!==this.Ja;return this.Ja=y,f.length!==0||p?{snapshot:new ro(this.query,e.Xa,u,f,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Mv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=st(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new WE(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new ZE(s))}),n}au(e){this.Ha=e.$s,this.Ya=st();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return ro.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const qm="SyncEngine";class m2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class g2{constructor(e){this.key=e,this.cu=!1}}class p2{constructor(e,n,s,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Ws(g=>yE(g),sh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Vt(Me.comparator),this.Eu=new Map,this.du=new Om,this.Au={},this.Ru=new Map,this.Vu=io.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function y2(r,e,n=!0){const s=rb(r);let l;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.uu()):l=await JE(s,e,n,!0),l}async function _2(r,e){const n=rb(r);await JE(n,e,!0,!1)}async function JE(r,e,n,s){const l=await VI(r.localStore,ji(e)),u=l.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await v2(r,e,u,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&GE(r.remoteStore,l),g}async function v2(r,e,n,s,l){r.fu=(N,k,Q)=>async function(fe,re,Re,Ne){let _e=re.view.tu(Re);_e.Cs&&(_e=await Nv(fe.localStore,re.query,!1).then(({documents:M})=>re.view.tu(M,_e)));const Fe=Ne&&Ne.targetChanges.get(re.targetId),Ie=Ne&&Ne.targetMismatches.get(re.targetId)!=null,Ce=re.view.applyChanges(_e,fe.isPrimaryClient,Fe,Ie);return Lv(fe,re.targetId,Ce.ou),Ce.snapshot}(r,N,k,Q);const u=await Nv(r.localStore,e,!0),f=new d2(e,u.$s),g=f.tu(u.documents),y=Hl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),p=f.applyChanges(g,r.isPrimaryClient,y);Lv(r,n,p.ou);const A=new m2(e,n,f);return r.hu.set(e,A),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),p.snapshot}async function E2(r,e,n){const s=Ye(r),l=s.hu.get(e),u=s.Pu.get(l.targetId);if(u.length>1)return s.Pu.set(l.targetId,u.filter(f=>!sh(f,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await em(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Pm(s.remoteStore,l.targetId),im(s,l.targetId)}).catch(uo)):(im(s,l.targetId),await em(s.localStore,l.targetId,!0))}async function b2(r,e){const n=Ye(r),s=n.hu.get(e),l=n.Pu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Pm(n.remoteStore,s.targetId))}async function T2(r,e,n){const s=C2(r);try{const l=await function(f,g){const y=Ye(f),p=pt.now(),A=g.reduce((Q,te)=>Q.add(te.key),st());let N,k;return y.persistence.runTransaction("Locally write mutations","readwrite",Q=>{let te=Er(),fe=st();return y.Bs.getEntries(Q,A).next(re=>{te=re,te.forEach((Re,Ne)=>{Ne.isValidDocument()||(fe=fe.add(Re))})}).next(()=>y.localDocuments.getOverlayedDocuments(Q,te)).next(re=>{N=re;const Re=[];for(const Ne of g){const _e=VR(Ne,N.get(Ne.key).overlayedDocument);_e!=null&&Re.push(new fs(Ne.key,_e,lE(_e.value.mapValue),ai.exists(!0)))}return y.mutationQueue.addMutationBatch(Q,p,Re,g)}).next(re=>{k=re;const Re=re.applyToLocalDocumentSet(N,fe);return y.documentOverlayCache.saveOverlays(Q,re.batchId,Re)})}).then(()=>({batchId:k.batchId,changes:EE(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),function(f,g,y){let p=f.Au[f.currentUser.toKey()];p||(p=new Vt(We)),p=p.insert(g,y),f.Au[f.currentUser.toKey()]=p}(s,l.batchId,n),await Fl(s,l.changes),await fh(s.remoteStore)}catch(l){const u=Bm(l,"Failed to persist write");n.reject(u)}}async function eb(r,e){const n=Ye(r);try{const s=await OI(n.localStore,e);e.targetChanges.forEach((l,u)=>{const f=n.Eu.get(u);f&&(yt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.cu=!0:l.modifiedDocuments.size>0?yt(f.cu,14607):l.removedDocuments.size>0&&(yt(f.cu,42227),f.cu=!1))}),await Fl(n,s,e)}catch(s){await uo(s)}}function zv(r,e,n){const s=Ye(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.hu.forEach((u,f)=>{const g=f.view.Fa(e);g.snapshot&&l.push(g.snapshot)}),function(f,g){const y=Ye(f);y.onlineState=g;let p=!1;y.queries.forEach((A,N)=>{for(const k of N.Sa)k.Fa(g)&&(p=!0)}),p&&Hm(y)}(s.eventManager,e),l.length&&s.lu.Y_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function S2(r,e,n){const s=Ye(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Eu.get(e),u=l&&l.key;if(u){let f=new Vt(Me.comparator);f=f.insert(u,wn.newNoDocument(u,Qe.min()));const g=st().add(u),y=new uh(Qe.min(),new Map,new Vt(We),f,g);await eb(s,y),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Fm(s)}else await em(s.localStore,e,!1).then(()=>im(s,e,n)).catch(uo)}async function A2(r,e){const n=Ye(r),s=e.batch.batchId;try{const l=await xI(n.localStore,e);nb(n,s,null),tb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fl(n,l)}catch(l){await uo(l)}}async function w2(r,e,n){const s=Ye(r);try{const l=await function(f,g){const y=Ye(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let A;return y.mutationQueue.lookupMutationBatch(p,g).next(N=>(yt(N!==null,37113),A=N.keys(),y.mutationQueue.removeMutationBatch(p,N))).next(()=>y.mutationQueue.performConsistencyCheck(p)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(p,A,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,A)).next(()=>y.localDocuments.getDocuments(p,A))})}(s.localStore,e);nb(s,e,n),tb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Fl(s,l)}catch(l){await uo(l)}}function tb(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function nb(r,e,n){const s=Ye(r);let l=s.Au[s.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),s.Au[s.currentUser.toKey()]=l}}function im(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||ib(r,s)})}function ib(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Pm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Fm(r))}function Lv(r,e,n){for(const s of n)s instanceof ZE?(r.du.addReference(s.key,e),R2(r,s)):s instanceof WE?(Te(qm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||ib(r,s.key)):Be(19791,{pu:s})}function R2(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(Te(qm,"New document in limbo: "+n),r.Tu.add(s),Fm(r))}function Fm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new Me(Dt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new g2(n)),r.Iu=r.Iu.insert(n,s),GE(r.remoteStore,new Wr(ji(gE(n.path)),s,"TargetPurposeLimboResolution",nh.le))}}async function Fl(r,e,n){const s=Ye(r),l=[],u=[],f=[];s.hu.isEmpty()||(s.hu.forEach((g,y)=>{f.push(s.fu(y,e,n).then(p=>{var A;if((p||n)&&s.isPrimaryClient){const N=p?!p.fromCache:(A=n==null?void 0:n.targetChanges.get(y.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(y.targetId,N?"current":"not-current")}if(p){l.push(p);const N=Mm.Rs(y.targetId,p);u.push(N)}}))}),await Promise.all(f),s.lu.Y_(l),await async function(y,p){const A=Ye(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>oe.forEach(p,k=>oe.forEach(k.ds,Q=>A.persistence.referenceDelegate.addReference(N,k.targetId,Q)).next(()=>oe.forEach(k.As,Q=>A.persistence.referenceDelegate.removeReference(N,k.targetId,Q)))))}catch(N){if(!co(N))throw N;Te(Vm,"Failed to update sequence numbers: "+N)}for(const N of p){const k=N.targetId;if(!N.fromCache){const Q=A.xs.get(k),te=Q.snapshotVersion,fe=Q.withLastLimboFreeSnapshotVersion(te);A.xs=A.xs.insert(k,fe)}}}(s.localStore,u))}async function I2(r,e){const n=Ye(r);if(!n.currentUser.isEqual(e)){Te(qm,"User change. New user:",e.toKey());const s=await BE(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(g=>{g.forEach(y=>{y.reject(new Ae(le.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Fl(n,s.ks)}}function N2(r,e){const n=Ye(r),s=n.Eu.get(e);if(s&&s.cu)return st().add(s.key);{let l=st();const u=n.Pu.get(e);if(!u)return l;for(const f of u){const g=n.hu.get(f);l=l.unionWith(g.view.eu)}return l}}function rb(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=eb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S2.bind(null,e),e.lu.Y_=c2.bind(null,e.eventManager),e.lu.gu=h2.bind(null,e.eventManager),e}function C2(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w2.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return DI(this.persistence,new II,e.initialUser,this.serializer)}Su(e){return new jE(km.fi,this.serializer)}bu(e){return new zI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class D2 extends $c{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){yt(this.persistence.referenceDelegate instanceof Qc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fI(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new jE(s=>Qc.fi(s,n),this.serializer)}}class rm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=I2.bind(null,this.syncEngine),await s2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o2}()}createDatastore(e){const n=ch(e.databaseInfo.databaseId),s=function(u){return new HI(u)}(e.databaseInfo);return function(u,f,g,y){return new KI(u,f,g,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,l,u,f,g){return new YI(s,l,u,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>zv(this.syncEngine,n,0),function(){return xv.C()?new xv:new LI}())}createSyncEngine(e,n){return function(l,u,f,g,y,p,A){const N=new p2(l,u,f,g,y,p);return A&&(N.mu=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const u=Ye(l);Te(Zs,"RemoteStore shutting down."),u.da.add(5),await ql(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rm.provider={build:()=>new rm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class O2{constructor(e,n,s,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=An.UNAUTHENTICATED,this.clientId=W0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{Te(cs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(Te(cs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Bm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Od(r,e){r.asyncQueue.verifyOperationInProgress(),Te(cs,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await BE(e.localStore,l),s=l)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Uv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await k2(r);Te(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>kv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>kv(e.remoteStore,l)),r._onlineComponents=e}async function k2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(cs,"Using user provided OfflineComponentProvider");try{await Od(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Ja("Error using user provided cache. Falling back to memory cache: "+n),await Od(r,new $c)}}else Te(cs,"Using default OfflineComponentProvider"),await Od(r,new D2(void 0));return r._offlineComponents}async function sb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(cs,"Using user provided OnlineComponentProvider"),await Uv(r,r._uninitializedComponentsProvider._online)):(Te(cs,"Using default OnlineComponentProvider"),await Uv(r,new rm))),r._onlineComponents}function M2(r){return sb(r).then(e=>e.syncEngine)}async function V2(r){const e=await sb(r),n=e.eventManager;return n.onListen=y2.bind(null,e.syncEngine),n.onUnlisten=E2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b2.bind(null,e.syncEngine),n}function P2(r,e,n={}){const s=new is;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,g,y,p){const A=new x2({next:k=>{A.xu(),f.enqueueAndForget(()=>u2(u,N)),k.fromCache&&y.source==="server"?p.reject(new Ae(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(k)},error:k=>p.reject(k)}),N=new f2(g,A,{includeMetadataChanges:!0,Qa:!0});return l2(u,N)}(await V2(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(r,e,n){if(!n)throw new Ae(le.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function z2(r,e,n,s){if(e===!0&&s===!0)throw new Ae(le.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Bv(r){if(!Me.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Hv(r){if(Me.isDocumentKey(r))throw new Ae(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Be(12329,{type:typeof r})}function kl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ae(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(r);throw new Ae(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="firestore.googleapis.com",qv=!0;class Fv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lb,this.ssl=qv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cI)throw new Ae(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ab((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ae(le.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Bw;switch(s.type){case"firstParty":return new Gw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ae(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=jv.get(n);s&&(Te("ComponentProvider","Removing Datastore"),jv.delete(n),s.terminate())}(this),Promise.resolve()}}function L2(r,e,n,s={}){var l;r=kl(r,mh);const u=Ml(e),f=r._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${n}`;u&&(s0(`https://${y}`),a0("Firestore",!0)),f.host!==lb&&f.host!==y&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:s});if(!Qs(p,g)&&(r._setSettings(p),s.mockUserToken)){let A,N;if(typeof s.mockUserToken=="string")A=s.mockUserToken,N=An.MOCK_USER;else{A=hS(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new Ae(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new An(k)}r._authCredentials=new Hw(new X0(A,N))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class oi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}}class rs extends fo{constructor(e,n,s){super(e,n,gE(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new Me(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function Xc(r,e,...n){if(r=hn(r),ob("collection","path",e),r instanceof mh){const s=Dt.fromString(e,...n);return Hv(s),new rs(r,null,s)}{if(!(r instanceof oi||r instanceof rs))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Dt.fromString(e,...n));return Hv(s),new rs(r.firestore,null,s)}}function _l(r,e,...n){if(r=hn(r),arguments.length===1&&(e=W0.newId()),ob("doc","path",e),r instanceof mh){const s=Dt.fromString(e,...n);return Bv(s),new oi(r,null,new Me(s))}{if(!(r instanceof oi||r instanceof rs))throw new Ae(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Dt.fromString(e,...n));return Bv(s),new oi(r.firestore,r instanceof rs?r.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="AsyncQueue";class Kv{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new qE(this,"async_queue_retry"),this.rc=()=>{const s=xd();s&&Te(Gv,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new is;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!co(e))throw e;Te(Gv,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,vr("INTERNAL UNHANDLED ERROR: ",Qv(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const l=jm.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(l),l}oc(){this.Xu&&Be(47125,{cc:Qv(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Qv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class gh extends mh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new Kv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kv(e),this._firestoreClient=void 0,await e}}}function U2(r,e){const n=typeof r=="object"?r:c0(),s=typeof r=="string"?r:jc,l=um(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=uS("firestore");u&&L2(l,...u)}return l}function Gm(r){if(r._terminated)throw new Ae(le.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||j2(r),r._firestoreClient}function j2(r){var e,n,s;const l=r._freezeSettings(),u=function(g,y,p,A){return new aR(g,y,p,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,ab(A.experimentalLongPollingOptions),A.useFetchStreams,A.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new O2(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(vn.fromBase64String(e))}catch(n){throw new Ae(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new so(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^__.*__$/;class H2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bl(e,this.data,n,this.fieldTransforms)}}class ub{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ic:r})}}class $m{constructor(e,n,s,l,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new $m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Vc(e),l}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.dc({path:s,Rc:!1});return l.Ec(),l}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Zc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(cb(this.Ic)&&B2.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class q2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ch(e)}bc(e,n,s,l=!1){return new $m({Ic:e,methodName:n,wc:s,path:_n.emptyPath(),Rc:!1,yc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xm(r){const e=r._freezeSettings(),n=ch(r._databaseId);return new q2(r._databaseId,!!e.ignoreUndefinedProperties,n)}function hb(r,e,n,s,l,u={}){const f=r.bc(u.merge||u.mergeFields?2:0,e,n,l);Zm("Data must be an object, but it was:",f,s);const g=fb(s,f);let y,p;if(u.merge)y=new Yn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const k=sm(e,N,n);if(!f.contains(k))throw new Ae(le.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);mb(A,k)||A.push(k)}y=new Yn(A),p=f.fieldTransforms.filter(N=>y.covers(N.field))}else y=null,p=f.fieldTransforms;return new H2(new Ln(g),y,p)}class yh extends Km{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}function F2(r,e,n,s){const l=r.bc(1,e,n);Zm("Data must be an object, but it was:",l,s);const u=[],f=Ln.empty();hs(s,(y,p)=>{const A=Wm(e,y,n);p=hn(p);const N=l.mc(A);if(p instanceof yh)u.push(A);else{const k=Gl(p,N);k!=null&&(u.push(A),f.set(A,k))}});const g=new Yn(u);return new ub(f,g,l.fieldTransforms)}function G2(r,e,n,s,l,u){const f=r.bc(1,e,n),g=[sm(e,s,n)],y=[l];if(u.length%2!=0)throw new Ae(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)g.push(sm(e,u[k])),y.push(u[k+1]);const p=[],A=Ln.empty();for(let k=g.length-1;k>=0;--k)if(!mb(p,g[k])){const Q=g[k];let te=y[k];te=hn(te);const fe=f.mc(Q);if(te instanceof yh)p.push(Q);else{const re=Gl(te,fe);re!=null&&(p.push(Q),A.set(Q,re))}}const N=new Yn(p);return new ub(A,N,f.fieldTransforms)}function K2(r,e,n,s=!1){return Gl(n,r.bc(s?4:3,e))}function Gl(r,e){if(db(r=hn(r)))return Zm("Unsupported field value:",e,r),fb(r,e);if(r instanceof Km)return function(s,l){if(!cb(l.Ic))throw l.gc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,l){const u=[];let f=0;for(const g of s){let y=Gl(g,l.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,l){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=pt.fromDate(s);return{timestampValue:Kc(l.serializer,u)}}if(s instanceof pt){const u=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Kc(l.serializer,u)}}if(s instanceof Qm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof so)return{bytesValue:OE(l.serializer,s._byteString)};if(s instanceof oi){const u=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw l.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ym)return function(f,g){return{mapValue:{fields:{[aE]:{stringValue:oE},[Bc]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw g.gc("VectorValues must only contain numeric values.");return Im(g.serializer,p)})}}}}}}(s,l);throw l.gc(`Unsupported field value: ${dh(s)}`)}(r,e)}function fb(r,e){const n={};return eE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(r,(s,l)=>{const u=Gl(l,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function db(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof pt||r instanceof Qm||r instanceof so||r instanceof oi||r instanceof Km||r instanceof Ym)}function Zm(r,e,n){if(!db(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=dh(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function sm(r,e,n){if((e=hn(e))instanceof ph)return e._internalPath;if(typeof e=="string")return Wm(r,e);throw Zc("Field path arguments must be of type string or ",r,!1,void 0,n)}const Q2=new RegExp("[~\\*/\\[\\]]");function Wm(r,e,n){if(e.search(Q2)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new ph(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Zc(r,e,n,s,l){const u=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${l}`),y+=")"),new Ae(le.INVALID_ARGUMENT,g+r+y)}function mb(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,s,l,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y2 extends gb{data(){return super.data()}}function Jm(r,e){return typeof e=="string"?Wm(r,e):e instanceof ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ae(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class X2 extends eg{}function Z2(r,e,...n){let s=[];e instanceof eg&&s.push(e),s=s.concat(n),function(u){const f=u.filter(y=>y instanceof tg).length,g=u.filter(y=>y instanceof _h).length;if(f>1||f>0&&g>0)throw new Ae(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)r=l._apply(r);return r}class _h extends X2{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new _h(e,n,s)}_apply(e){const n=this._parse(e);return pb(e._query,n),new fo(e.firestore,e.converter,Yd(e._query,n))}_parse(e){const n=Xm(e.firestore);return function(u,f,g,y,p,A,N){let k;if(p.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){$v(N,A);const te=[];for(const fe of N)te.push(Yv(y,u,fe));k={arrayValue:{values:te}}}else k=Yv(y,u,N)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||$v(N,A),k=K2(g,f,N,A==="in"||A==="not-in");return $t.create(p,A,k)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function W2(r,e,n){const s=e,l=Jm("where",r);return _h._create(l,s,n)}class tg extends eg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(l,u){let f=l;const g=u.getFlattenedFilters();for(const y of g)pb(f,y),f=Yd(f,y)}(e._query,n),new fo(e.firestore,e.converter,Yd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Yv(r,e,n){if(typeof(n=hn(n))=="string"){if(n==="")throw new Ae(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pE(e)&&n.indexOf("/")!==-1)throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Dt.fromString(n));if(!Me.isDocumentKey(s))throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uv(r,new Me(s))}if(n instanceof oi)return uv(r,n._key);throw new Ae(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function $v(r,e){if(!Array.isArray(r)||r.length===0)throw new Ae(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pb(r,e){const n=function(l,u){for(const f of l)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ae(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J2{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return hs(e,(l,u)=>{s[l]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,l;const u=(l=(s=(n=e.fields)===null||n===void 0?void 0:n[Bc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(f=>qt(f.doubleValue));return new Ym(u)}convertGeoPoint(e){return new Qm(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const n=as(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Dt.fromString(e);yt(LE(s),9688,{name:e});const l=new Cl(s.get(1),s.get(3)),u=new Me(s.popFirst(5));return l.isEqual(n)||vr(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eN extends gb{constructor(e,n,s,l,u,f){super(e,n,s,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Jm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Cc extends eN{data(e={}){return super.data(e)}}class tN{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new _c(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Cc(this._firestore,this._userDataWriter,s.key,s,new _c(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map(g=>{const y=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _c(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>u||g.type!==3).map(g=>{const y=new Cc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new _c(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let p=-1,A=-1;return g.type!==0&&(p=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),A=f.indexOf(g.doc.key)),{type:nN(g.type),doc:y,oldIndex:p,newIndex:A}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:r})}}class iN extends J2{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,n)}}function rN(r){r=kl(r,fo);const e=kl(r.firestore,gh),n=Gm(e),s=new iN(e);return $2(r._query),P2(n,r._query).then(l=>new tN(e,s,r,l))}function sN(r,e){const n=kl(r.firestore,gh),s=_l(r),l=yb(r.converter,e);return _b(n,[hb(Xm(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,ai.exists(!1))]).then(()=>s)}function _b(r,e){return function(s,l){const u=new is;return s.asyncQueue.enqueueAndForget(async()=>T2(await M2(s),l,u)),u.promise}(Gm(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xm(e)}set(e,n,s){this._verifyNotCommitted();const l=kd(e,this._firestore),u=yb(l.converter,n,s),f=hb(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,s);return this._mutations.push(f.toMutation(l._key,ai.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const u=kd(e,this._firestore);let f;return f=typeof(n=hn(n))=="string"||n instanceof ph?G2(this._dataReader,"WriteBatch.update",u._key,n,s,l):F2(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,ai.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=kd(e,this._firestore);return this._mutations=this._mutations.concat(new Nm(n._key,ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kd(r,e){if((r=hn(r)).firestore!==e)throw new Ae(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(r){return Gm(r=kl(r,gh)),new aN(r,e=>_b(r,e))}(function(e,n=!0){(function(l){lo=l})(ao),Za(new Ys("firestore",(s,{instanceIdentifier:l,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new gh(new qw(s.getProvider("auth-internal")),new Kw(f,s.getProvider("app-check-internal")),function(p,A){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(p.options.projectId,A)}(f,l),f);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),ts(Z_,W_,e),ts(Z_,W_,"esm2017")})();function Ut(r){if(!r&&r!==0)return"";const e=typeof r=="string"?parseFloat(r.replace(/\./g,"").replace(",",".")):r;return isNaN(e)?"":new Intl.NumberFormat("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function un(r){if(!r)return 0;const e=r.replace(/\./g,"").replace(",",".");return parseFloat(e)||0}const vb={WE01:{wasserzaehlerNrDigital:"D-1001",wasserzaehlerNrAnalog:"A-1001",heizungNr:"H-1001",stromNr:"S-1001"},WE02:{wasserzaehlerNrDigital:"D-1002",wasserzaehlerNrAnalog:"A-1002",heizungNr:"H-1002",stromNr:"S-1002"},"1a":{wasserzaehlerNrDigital:"D-2001",wasserzaehlerNrAnalog:"A-2001",heizungNr:"H-2001",stromNr:"S-2001"}};function oN(r){return/^([1-9]|1[0-9])$/.test(r)?`WE${r.padStart(2,"0")}`:r}function lN(r,e,n,s,l){const u=/^([1-9]|1[0-9])$/.test(e)?`WE${e.padStart(2,"0")}`:e,f=(n||"").replace(/[^a-zA-Z0-9]/g,"");return(r||"")+(u||"")+f+(s||"").replace(/[^a-zA-Z]/g,"")+(l||"").replace(/[^a-zA-Z]/g,"")}function uN(r,e,n,s){if(!s)return"";switch(r){case"TRI":return`Triftstrae ${n}, 13127 Berlin`;case"PAS":return/^([1-9]|10)$/.test(e)?"Pasewalker Str. 67, 13127 Berlin":/^1[a-f]$/.test(e)?`Rosenthaler Str. ${e}, 13127 Berlin`:"";case"RITA":return"Rosenthaler Strae 1, 13127 Berlin";default:return""}}function Zv(r){if(!r)return{salutation:"Herr",firstName:"",lastName:""};const e=r.trim().split(/\s+/);return e.length===1?{salutation:"Herr",firstName:e[0],lastName:""}:e.length===2?{salutation:"Herr",firstName:e[1],lastName:e[0]}:{salutation:"Herr",firstName:e.slice(1).join(" "),lastName:e[0]}}const cN=({selectedProperty:r,onCancel:e,recordToUpdate:n,isTenantChangeMode:s,onSave:l})=>{const[u,f]=Xe.useState({formApartmentId:"",formEffectiveDate:new Date().toISOString().split("T")[0],formMoveOutDate:"",formArea:"",formFloor:"",formPosition:"",formPersons:"",formHouseNumber:"",formContractDate:"",formMoveInDate:"",formTerminationDate:"",formContractEndDate:"",formIban:"",formDirectDebitMandateDate:"",formMandateReference:"",formRentBase:"",formRentUtilities:"",formRentHeating:"",formRentParking:"",formNotes:"",isLoading:!1,formStellplatz1:"",formStellplatz2:"",formStellplatz3:"",formStellplatz4:"",formWasserzaehlerNrDigital:"",formWasserzaehlerStandDigital:"",formWasserzaehlerNrAnalog:"",formWasserzaehlerStandAnalog:"",formHeizungNr:"",formHeizungStand:"",formStromNr:"",formStromStand:"",formKautionHoehe:"",formKautionszahlungen:[{betrag:"",datum:""}],formKautionsauszahlungen:[{betrag:"",datum:""}],isParkingOnly:!1,customRentPerSqm:"",parkingCount:1,tenant1Salutation:"Herr",tenant1FirstName:"",tenant1LastName:"",tenant1BirthDate:"",tenant1Address:"",tenant1Email:"",tenant1Phone:"",tenant2Salutation:"Herr",tenant2FirstName:"",tenant2LastName:"",tenant2BirthDate:"",tenant2Address:"",tenant2Email:"",tenant2Phone:""}),[g,y]=Xe.useState([]),[p,A]=Xe.useState([]);function N(b,$){y([...g,u]),f({...u,[b]:$}),A([])}function k(){g.length!==0&&(A([u,...p]),f(g[g.length-1]),y(g.slice(0,-1)))}function Q(){p.length!==0&&(y([...g,u]),f(p[0]),A(p.slice(1)))}Xe.useEffect(()=>{if(!n){const b=lN(r,u.formApartmentId,u.formPosition,u.tenant1LastName,u.tenant1FirstName);f($=>({...$,formMandateReference:b}))}},[r,u.formApartmentId,u.formPosition,u.tenant1LastName,u.tenant1FirstName]),Xe.useEffect(()=>{const b=oN(u.formApartmentId),$=vb[b];$&&f(pe=>({...pe,formWasserzaehlerNrDigital:pe.formWasserzaehlerNrDigital||$.wasserzaehlerNrDigital||"",formWasserzaehlerNrAnalog:pe.formWasserzaehlerNrAnalog||$.wasserzaehlerNrAnalog||"",formHeizungNr:pe.formHeizungNr||$.heizungNr||"",formStromNr:pe.formStromNr||$.stromNr||""}))},[u.formApartmentId]),Xe.useEffect(()=>{if(u.customRentPerSqm&&u.formArea){const b=un(u.customRentPerSqm),$=parseFloat(u.formArea),pe=(b*$).toFixed(2);f(V=>({...V,formRentBase:Ut(pe)}))}},[u.customRentPerSqm]),Xe.useEffect(()=>{if(!n&&u.formRentBase&&!u.formKautionHoehe){const $=un(u.formRentBase)*3;f(pe=>({...pe,formKautionHoehe:Ut($)}))}},[u.formRentBase]);const te=()=>{if(u.formRentBase){const $=un(u.formRentBase)*3;f(pe=>({...pe,formKautionHoehe:Ut($)}))}};Xe.useEffect(()=>{const b=!u.formContractEndDate||new Date(u.formContractEndDate)>new Date,$=uN(r,u.formApartmentId,u.formHouseNumber,b);f(pe=>({...pe,tenant1Address:$,tenant2Address:$}))},[r,u.formApartmentId,u.formHouseNumber,u.formContractEndDate]),Xe.useEffect(()=>{var b,$,pe;if(n){const V=n.data,W=Zv((($=(b=V.tenants)==null?void 0:b.tenant1)==null?void 0:$.name)||""),z=(pe=V.tenants)!=null&&pe.tenant2?Zv(V.tenants.tenant2.name||""):{salutation:"Herr",firstName:"",lastName:""};f(Z=>{var D,U,X,B,ce,me,K,se,J,ae,Se,he,ge,xe,ue,be,ye,De,ze,je,Je,ft,Et,Ve,Pe,ke,ve,Ee,dt,bt,He,ct,Ke,Ct,xt,tt,tn,nn,Un,li,ui,In,Nn,ci,En,hi;return{...Z,formApartmentId:n.apartmentId||"",formArea:((U=(D=V.details)==null?void 0:D.area)==null?void 0:U.toString())||"",formHouseNumber:((X=V.details)==null?void 0:X.houseNumber)||"",formFloor:((ce=(B=V.details)==null?void 0:B.location)==null?void 0:ce.split(" ")[0])||"",formPosition:((K=(me=V.details)==null?void 0:me.location)==null?void 0:K.split(" ")[1])||"",formPersons:((J=(se=V.details)==null?void 0:se.persons)==null?void 0:J.toString())||"",formStellplatz1:((ae=V.details)==null?void 0:ae.stellplatz1)||"",formStellplatz2:((Se=V.details)==null?void 0:Se.stellplatz2)||"",formStellplatz3:((he=V.details)==null?void 0:he.stellplatz3)||"",formStellplatz4:((ge=V.details)==null?void 0:ge.stellplatz4)||"",formContractDate:((xe=V.contract)==null?void 0:xe.contractDate)||"",formMoveInDate:((ue=V.contract)==null?void 0:ue.moveInDate)||"",formTerminationDate:((be=V.contract)==null?void 0:be.terminationDate)||"",formContractEndDate:((ye=V.contract)==null?void 0:ye.contractEndDate)||"",formKautionHoehe:(De=V.contract)!=null&&De.kautionHoehe?Ut(V.contract.kautionHoehe):"",formKautionszahlungen:Array.isArray((ze=V.contract)==null?void 0:ze.kautionszahlungen)&&V.contract.kautionszahlungen.length>0?V.contract.kautionszahlungen.map(Ft=>typeof Ft=="object"&&Ft!==null?{betrag:Ft.betrag?Ut(Ft.betrag):"",datum:Ft.datum||""}:typeof Ft=="number"||typeof Ft=="string"?{betrag:Ut(Ft),datum:""}:{betrag:"",datum:""}):[{betrag:"",datum:""}],formKautionsauszahlungen:[{betrag:"",datum:""}],formIban:((je=V.payment)==null?void 0:je.iban)||"",formDirectDebitMandateDate:((Je=V.payment)==null?void 0:Je.directDebitMandateDate)||"",formMandateReference:((ft=V.payment)==null?void 0:ft.mandateReference)||"",formRentBase:(Et=V.rent)!=null&&Et.base?Ut(V.rent.base):"",formRentUtilities:(Ve=V.rent)!=null&&Ve.utilities?Ut(V.rent.utilities):"",formRentHeating:(Pe=V.rent)!=null&&Pe.heating?Ut(V.rent.heating):"",formRentParking:(ke=V.rent)!=null&&ke.parking?Ut(V.rent.parking):"",formNotes:V.notes||"",formWasserzaehlerNrDigital:((ve=V.meterReadings)==null?void 0:ve.wasserzaehlerNrDigital)||"",formWasserzaehlerStandDigital:((dt=(Ee=V.meterReadings)==null?void 0:Ee.wasserzaehlerStandDigital)==null?void 0:dt.toString())||"",formWasserzaehlerNrAnalog:((bt=V.meterReadings)==null?void 0:bt.wasserzaehlerNrAnalog)||"",formWasserzaehlerStandAnalog:((ct=(He=V.meterReadings)==null?void 0:He.wasserzaehlerStandAnalog)==null?void 0:ct.toString())||"",formHeizungNr:((Ke=V.meterReadings)==null?void 0:Ke.heizungNr)||"",formHeizungStand:((xt=(Ct=V.meterReadings)==null?void 0:Ct.heizungStand)==null?void 0:xt.toString())||"",formStromNr:((tt=V.meterReadings)==null?void 0:tt.stromNr)||"",formStromStand:((nn=(tn=V.meterReadings)==null?void 0:tn.stromStand)==null?void 0:nn.toString())||"",tenant1Salutation:W.salutation,tenant1FirstName:W.firstName,tenant1LastName:W.lastName,tenant1BirthDate:"",tenant1Address:"",tenant1Email:((li=(Un=V.tenants)==null?void 0:Un.tenant1)==null?void 0:li.email)||"",tenant1Phone:((In=(ui=V.tenants)==null?void 0:ui.tenant1)==null?void 0:In.phone)||"",tenant2Salutation:z.salutation,tenant2FirstName:z.firstName,tenant2LastName:z.lastName,tenant2BirthDate:"",tenant2Address:"",tenant2Email:((ci=(Nn=V.tenants)==null?void 0:Nn.tenant2)==null?void 0:ci.email)||"",tenant2Phone:((hi=(En=V.tenants)==null?void 0:En.tenant2)==null?void 0:hi.phone)||""}})}else f({formApartmentId:"",formEffectiveDate:new Date().toISOString().split("T")[0],formMoveOutDate:"",formArea:"",formFloor:"",formPosition:"",formPersons:"",formHouseNumber:"",formContractDate:"",formMoveInDate:"",formTerminationDate:"",formContractEndDate:"",formIban:"",formDirectDebitMandateDate:"",formMandateReference:"",formRentBase:"",formRentUtilities:"",formRentHeating:"",formRentParking:"",formNotes:"",isLoading:!1,formStellplatz1:"",formStellplatz2:"",formStellplatz3:"",formStellplatz4:"",formWasserzaehlerNrDigital:"",formWasserzaehlerStandDigital:"",formWasserzaehlerNrAnalog:"",formWasserzaehlerStandAnalog:"",formHeizungNr:"",formHeizungStand:"",formStromNr:"",formStromStand:"",formKautionHoehe:"",formKautionszahlungen:[{betrag:"",datum:""}],formKautionsauszahlungen:[{betrag:"",datum:""}],isParkingOnly:!1,customRentPerSqm:"",parkingCount:1,tenant1Salutation:"Herr",tenant1FirstName:"",tenant1LastName:"",tenant1BirthDate:"",tenant1Address:"",tenant1Email:"",tenant1Phone:"",tenant2Salutation:"Herr",tenant2FirstName:"",tenant2LastName:"",tenant2BirthDate:"",tenant2Address:"",tenant2Email:"",tenant2Phone:""})},[n,r]);const fe=parseFloat(u.formArea)||0,re=un(u.formRentBase),Re=fe>0?(re/fe).toFixed(2):"",Ne=[u.formStellplatz1,u.formStellplatz2,u.formStellplatz3,u.formStellplatz4].filter(b=>typeof b=="string"?b.trim()!=="":String(b||"").trim()!=="").length,_e=u.formRentParking!==""?un(u.formRentParking):Ne*40,Fe=re+un(u.formRentUtilities)+un(u.formRentHeating)+_e,Ie=u.formKautionszahlungen.reduce((b,$)=>b+un($.betrag),0),Ce=u.formKautionsauszahlungen.reduce((b,$)=>b+un($.betrag),0),M=un(u.formKautionHoehe),E=M>0?M-Ie:0,T=Ie-Ce,I=(b,$,pe)=>{const V=[...u.formKautionszahlungen];V[b][$]=pe,N("formKautionszahlungen",V)},C=(b,$,pe)=>{const V=[...u.formKautionsauszahlungen];V[b][$]=pe,N("formKautionsauszahlungen",V)};async function x(b){b.preventDefault(),f($=>({...$,isLoading:!0}));try{await l(u)}finally{f($=>({...$,isLoading:!1})),e&&e()}}return R.jsxs("div",{className:"mb-10 p-8 bg-gray-800 rounded-xl shadow-2xl border",children:[R.jsxs("div",{className:"flex items-center justify-between mb-8 border-b pb-4",children:[R.jsx("h2",{className:"text-3xl font-semibold text-gray-200",children:s?"Mieterwechsel durchfhren":n?"Datensatz aktualisieren":"Neuen Datensatz erstellen"}),R.jsxs("div",{className:"flex gap-4",children:[R.jsx("button",{type:"button",className:"btn btn-special",onClick:()=>N("isParkingOnly",!u.isParkingOnly),children:u.isParkingOnly?"Vollstndige Eingabe":"Nur Parkplatz"}),R.jsx("button",{type:"button",onClick:k,className:"btn btn-edit",disabled:g.length===0,children:"Rckgngig"}),R.jsx("button",{type:"button",onClick:Q,className:"btn btn-edit",disabled:p.length===0,children:"Wiederholen"}),R.jsx("button",{type:"submit",disabled:u.isLoading,className:"btn btn-success",form:"record-form",children:u.isLoading?"Speichern...":"Speichern"}),R.jsx("button",{type:"button",onClick:e,className:"btn btn-danger",children:"Abbrechen"})]})]}),R.jsxs("form",{id:"record-form",onSubmit:x,className:"space-y-10",children:["        ",!u.isParkingOnly&&R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Stammdaten & Details"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Datensatz-Datum"}),R.jsx("input",{type:"date",value:u.formEffectiveDate,onChange:b=>N("formEffectiveDate",b.target.value),className:"p-2 border rounded w-full",required:!0})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Wohnungs-ID"}),R.jsx("input",{value:u.formApartmentId,onChange:b=>N("formApartmentId",b.target.value),className:"p-2 border rounded w-full",required:!0})]}),r==="TRI"&&R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Hausnummer"}),R.jsx("input",{value:u.formHouseNumber,onChange:b=>N("formHouseNumber",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Flche in m"}),R.jsx("input",{type:"number",value:u.formArea,onChange:b=>N("formArea",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Lage"}),R.jsx("input",{value:u.formPosition,onChange:b=>N("formPosition",b.target.value),className:"p-2 border rounded w-full"})]}),r==="TRI"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Stellplatz 1"}),R.jsx("input",{value:u.formStellplatz1,onChange:b=>N("formStellplatz1",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Stellplatz 2"}),R.jsx("input",{value:u.formStellplatz2,onChange:b=>N("formStellplatz2",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Stellplatz 3"}),R.jsx("input",{value:u.formStellplatz3,onChange:b=>N("formStellplatz3",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Stellplatz 4"}),R.jsx("input",{value:u.formStellplatz4,onChange:b=>N("formStellplatz4",b.target.value),className:"p-2 border rounded w-full"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Personen"}),R.jsx("input",{type:"number",value:u.formPersons,onChange:b=>N("formPersons",b.target.value),className:"p-2 border rounded w-full"})]})]})]}),R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Mieter 1"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Anrede"}),R.jsxs("select",{value:u.tenant1Salutation,onChange:b=>N("tenant1Salutation",b.target.value),className:"p-2 border rounded w-full",children:[R.jsx("option",{value:"Herr",children:"Herr"}),R.jsx("option",{value:"Frau",children:"Frau"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Vorname"}),R.jsx("input",{value:u.tenant1FirstName,onChange:b=>N("tenant1FirstName",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Nachname"}),R.jsx("input",{value:u.tenant1LastName,onChange:b=>N("tenant1LastName",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Geburtsdatum"}),R.jsx("input",{type:"date",value:u.tenant1BirthDate,onChange:b=>N("tenant1BirthDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"E-Mail"}),R.jsx("input",{type:"email",value:u.tenant1Email,onChange:b=>N("tenant1Email",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Telefon"}),R.jsx("input",{value:u.tenant1Phone,onChange:b=>N("tenant1Phone",b.target.value),className:"p-2 border rounded w-full"})]}),"            ",R.jsxs("div",{className:"md:col-span-3",children:[R.jsx("label",{className:"block mb-1",children:"Adresse"}),R.jsx("input",{value:u.tenant1Address,onChange:b=>N("tenant1Address",b.target.value),className:`p-2 border rounded w-full ${!u.tenant1Address&&u.formContractEndDate&&new Date(u.formContractEndDate)<=new Date?"border-red-500 border-2":""}`,placeholder:"Adresse (wird automatisch befllt bei aktivem Vertrag)"})]})]})]}),R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Mieter 2"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Anrede"}),R.jsxs("select",{value:u.tenant2Salutation,onChange:b=>N("tenant2Salutation",b.target.value),className:"p-2 border rounded w-full",children:[R.jsx("option",{value:"Herr",children:"Herr"}),R.jsx("option",{value:"Frau",children:"Frau"})]})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Vorname"}),R.jsx("input",{value:u.tenant2FirstName,onChange:b=>N("tenant2FirstName",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Nachname"}),R.jsx("input",{value:u.tenant2LastName,onChange:b=>N("tenant2LastName",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Geburtsdatum"}),R.jsx("input",{type:"date",value:u.tenant2BirthDate,onChange:b=>N("tenant2BirthDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"E-Mail"}),R.jsx("input",{type:"email",value:u.tenant2Email,onChange:b=>N("tenant2Email",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Telefon"}),R.jsx("input",{value:u.tenant2Phone,onChange:b=>N("tenant2Phone",b.target.value),className:"p-2 border rounded w-full"})]}),"            ",R.jsxs("div",{className:"md:col-span-3",children:[R.jsx("label",{className:"block mb-1",children:"Adresse"}),R.jsx("input",{value:u.tenant2Address,onChange:b=>N("tenant2Address",b.target.value),className:`p-2 border rounded w-full ${!u.tenant2Address&&u.formContractEndDate&&new Date(u.formContractEndDate)<=new Date?"border-red-500":""}`,placeholder:"Adresse"})]})]})]}),!u.isParkingOnly&&R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Miete"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-2",children:["              ",R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Kaltmiete ()"}),R.jsx("input",{type:"text",value:u.formRentBase,onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("formRentBase",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("formRentBase",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"})]}),"              ",R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Kaltmiete/m ()"}),R.jsx("input",{type:"text",value:u.customRentPerSqm||Re,onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("customRentPerSqm",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("customRentPerSqm",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Nebenkosten ()"}),R.jsx("input",{type:"text",value:u.formRentUtilities,onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("formRentUtilities",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("formRentUtilities",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Heizkosten ()"}),R.jsx("input",{type:"text",value:u.formRentHeating,onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("formRentHeating",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("formRentHeating",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"})]}),"              ",R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Stellplatzmiete ()"}),R.jsx("input",{type:"text",value:u.formRentParking||Ut(_e),onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("formRentParking",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("formRentParking",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"})]}),"              ",R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Gesamtmiete ()"}),R.jsx("input",{type:"text",value:Ut(Fe),readOnly:!0,className:"p-2 border rounded w-full bg-gray-700"})]})]})]}),R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Vertragsdaten"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Mietvertrag vom"}),R.jsx("input",{type:"date",value:u.formContractDate,onChange:b=>N("formContractDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Einzug am"}),R.jsx("input",{type:"date",value:u.formMoveInDate,onChange:b=>N("formMoveInDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Gekndigt zum"}),R.jsx("input",{type:"date",value:u.formTerminationDate,onChange:b=>N("formTerminationDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Vertragsende"}),R.jsx("input",{type:"date",value:u.formContractEndDate,onChange:b=>N("formContractEndDate",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"IBAN"}),R.jsx("input",{value:u.formIban,onChange:b=>N("formIban",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Mandatsreferenz"}),R.jsx("input",{value:u.formMandateReference,onChange:b=>N("formMandateReference",b.target.value),className:"p-2 border rounded w-full"})]}),"            ",R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Kaution ()"}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("input",{type:"text",value:u.formKautionHoehe,onChange:b=>{const $=b.target.value;(/^[\d.,]*$/.test($)||$==="")&&N("formKautionHoehe",$)},onBlur:b=>{const $=un(b.target.value);$>0&&N("formKautionHoehe",Ut($))},className:"p-2 border rounded w-full",placeholder:"0,00"}),R.jsx("button",{type:"button",onClick:te,disabled:!u.formRentBase,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 whitespace-nowrap",title:"Setze Kaution auf 3x Kaltmiete",children:"3xKaltmiete"})]})]})]}),R.jsxs("div",{className:"mt-4",children:[R.jsx("label",{className:"block text-sm font-medium",children:"Kautionszahlungen:"}),u.formKautionszahlungen.map((b,$)=>R.jsxs("div",{className:"flex gap-2 mb-2",children:["                ",R.jsx("input",{type:"text",placeholder:"0,00",value:b.betrag,onChange:pe=>{const V=pe.target.value;(/^[\d.,]*$/.test(V)||V==="")&&I($,"betrag",V)},onBlur:pe=>{const V=un(pe.target.value);V>0&&I($,"betrag",Ut(V))},className:"p-2 border rounded"}),R.jsx("input",{type:"date",placeholder:"Datum",value:b.datum,onChange:pe=>I($,"datum",pe.target.value),className:"p-2 border rounded"}),R.jsx("button",{type:"button",onClick:()=>{const pe=u.formKautionszahlungen.filter((V,W)=>W!==$);N("formKautionszahlungen",pe)},children:"Entfernen"})]},$)),R.jsx("button",{type:"button",onClick:()=>N("formKautionszahlungen",[...u.formKautionszahlungen,{betrag:"",datum:""}]),children:"Zahlung hinzufgen"})]}),R.jsxs("div",{className:"mt-4",children:[R.jsx("label",{className:"block text-sm font-medium",children:"Kautionsauszahlungen:"}),u.formKautionsauszahlungen.map((b,$)=>R.jsxs("div",{className:"flex gap-2 mb-2",children:["                ",R.jsx("input",{type:"text",placeholder:"0,00",value:b.betrag,onChange:pe=>{const V=pe.target.value;(/^[\d.,]*$/.test(V)||V==="")&&C($,"betrag",V)},onBlur:pe=>{const V=un(pe.target.value);V>0&&C($,"betrag",Ut(V))},className:"p-2 border rounded"}),R.jsx("input",{type:"date",placeholder:"Datum",value:b.datum,onChange:pe=>C($,"datum",pe.target.value),className:"p-2 border rounded"}),R.jsx("button",{type:"button",onClick:()=>{const pe=u.formKautionsauszahlungen.filter((V,W)=>W!==$);N("formKautionsauszahlungen",pe)},children:"Entfernen"})]},$)),R.jsx("button",{type:"button",onClick:()=>N("formKautionsauszahlungen",[...u.formKautionsauszahlungen,{betrag:"",datum:""}]),children:"Auszahlung hinzufgen"})]}),"          ",M>0&&R.jsxs("div",{className:"mt-2",children:[R.jsxs("span",{className:E>0?"text-red-600 font-bold":"",children:["Offene Kaution: ",Ut(E)," "]}),u.formContractEndDate&&R.jsxs("span",{className:T>0?"text-red-600 font-bold ml-4":"ml-4",children:["Noch nicht ausgezahlt: ",Ut(T)," "]})]})]}),!u.isParkingOnly&&R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Abrechnungsdaten (Zhlerstnde)"}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Wasserzhler digital Nr."}),R.jsx("input",{value:u.formWasserzaehlerNrDigital,onChange:b=>N("formWasserzaehlerNrDigital",b.target.value),className:"p-2 border rounded w-full"}),R.jsx("label",{className:"block mb-1 mt-2",children:"Wasserzhler digital Stand"}),R.jsx("input",{type:"number",value:u.formWasserzaehlerStandDigital,onChange:b=>N("formWasserzaehlerStandDigital",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Wasserzhler analog Nr."}),R.jsx("input",{value:u.formWasserzaehlerNrAnalog,onChange:b=>N("formWasserzaehlerNrAnalog",b.target.value),className:"p-2 border rounded w-full"}),R.jsx("label",{className:"block mb-1 mt-2",children:"Wasserzhler analog Stand"}),R.jsx("input",{type:"number",value:u.formWasserzaehlerStandAnalog,onChange:b=>N("formWasserzaehlerStandAnalog",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Heizung Nr."}),R.jsx("input",{value:u.formHeizungNr,onChange:b=>N("formHeizungNr",b.target.value),className:"p-2 border rounded w-full"}),R.jsx("label",{className:"block mb-1 mt-2",children:"Heizung Stand"}),R.jsx("input",{type:"number",value:u.formHeizungStand,onChange:b=>N("formHeizungStand",b.target.value),className:"p-2 border rounded w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block mb-1",children:"Strom Nr."}),R.jsx("input",{value:u.formStromNr,onChange:b=>N("formStromNr",b.target.value),className:"p-2 border rounded w-full"}),R.jsx("label",{className:"block mb-1 mt-2",children:"Strom Stand"}),R.jsx("input",{type:"number",value:u.formStromStand,onChange:b=>N("formStromStand",b.target.value),className:"p-2 border rounded w-full"})]})]})]}),!u.isParkingOnly&&R.jsxs("fieldset",{className:"p-5 border rounded-lg",children:[R.jsx("legend",{className:"text-xl font-semibold px-2 mb-2",children:"Notizen / Zustzliche Informationen"}),R.jsx("textarea",{value:u.formNotes,onChange:b=>N("formNotes",b.target.value),rows:4,className:"mt-1 block w-full p-2 border rounded-md",placeholder:"Besondere Vereinbarungen..."})]}),R.jsxs("div",{className:"flex gap-4 justify-end mt-8",children:[R.jsx("button",{type:"submit",disabled:u.isLoading,className:"btn btn-success",children:u.isLoading?"Speichern...":"Speichern"}),R.jsx("button",{type:"button",onClick:e,className:"btn btn-danger",children:"Abbrechen"})]})]})]})};var Dc={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var hN=Dc.exports,Wv;function fN(){return Wv||(Wv=1,function(r,e){((n,s)=>{r.exports=s()})(hN,function n(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},l,u=!s.document&&!!s.postMessage,f=s.IS_PAPA_WORKER||!1,g={},y=0,p={};function A(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var I=Ie(T);I.chunkSize=parseInt(I.chunkSize),T.step||T.chunk||(I.chunkSize=null),this._handle=new fe(I),(this._handle.streamer=this)._config=I}).call(this,E),this.parseChunk=function(T,I){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let b=this._config.newline;b||(x=this._config.quoteChar||'"',b=this._handle.guessLineEndings(T,x)),T=[...T.split(b).slice(C)].join(b)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(T))!==void 0&&(T=x),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+T,x=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=x.meta.cursor,C=(this._finished||(this._partialLine=C.substring(T-this._baseIndex),this._baseIndex=T),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)s.postMessage({results:x,workerId:p.WORKER_ID,finished:C});else if(M(this._config.chunk)&&!I){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!C||!M(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(T){M(this._config.error)?this._config.error(T):f&&this._config.error&&s.postMessage({workerId:p.WORKER_ID,error:T,finished:!1})}}function N(E){var T;(E=E||{}).chunkSize||(E.chunkSize=p.RemoteChunkSize),A.call(this,E),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),u||(T.onload=Ce(this._chunkLoaded,this),T.onerror=Ce(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var I,C=this._config.downloadRequestHeaders;for(I in C)T.setRequestHeader(I,C[I])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+x));try{T.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}u&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(I){I=T.statusText||I,this._sendError(new Error(I))}}function k(E){(E=E||{}).chunkSize||(E.chunkSize=p.LocalChunkSize),A.call(this,E);var T,I,C=typeof FileReader<"u";this.stream=function(x){this._input=x,I=x.slice||x.webkitSlice||x.mozSlice,C?((T=new FileReader).onload=Ce(this._chunkLoaded,this),T.onerror=Ce(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,b=(this._config.chunkSize&&(b=Math.min(this._start+this._config.chunkSize,this._input.size),x=I.call(x,this._start,b)),T.readAsText(x,this._config.encoding));C||this._chunkLoaded({target:{result:b}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(T.error)}}function Q(E){var T;A.call(this,E=E||{}),this.stream=function(I){return T=I,this._nextChunk()},this._nextChunk=function(){var I,C;if(!this._finished)return I=this._config.chunkSize,T=I?(C=T.substring(0,I),T.substring(I)):(C=T,""),this._finished=!T,this.parseChunk(C)}}function te(E){A.call(this,E=E||{});var T=[],I=!0,C=!1;this.pause=function(){A.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){A.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):I=!0},this._streamData=Ce(function(x){try{T.push(typeof x=="string"?x:x.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(b){this._streamError(b)}},this),this._streamError=Ce(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=Ce(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=Ce(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function fe(E){var T,I,C,x,b=Math.pow(2,53),$=-b,pe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,W=this,z=0,Z=0,D=!1,U=!1,X=[],B={data:[],errors:[],meta:{}};function ce(J){return E.skipEmptyLines==="greedy"?J.join("").trim()==="":J.length===1&&J[0].length===0}function me(){if(B&&C&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),C=!1),E.skipEmptyLines&&(B.data=B.data.filter(function(ge){return!ce(ge)})),K()){let ge=function(xe,ue){M(E.transformHeader)&&(xe=E.transformHeader(xe,ue)),X.push(xe)};var he=ge;if(B)if(Array.isArray(B.data[0])){for(var J=0;K()&&J<B.data.length;J++)B.data[J].forEach(ge);B.data.splice(0,1)}else B.data.forEach(ge)}function ae(ge,xe){for(var ue=E.header?{}:[],be=0;be<ge.length;be++){var ye=be,De=ge[be],De=((ze,je)=>(Je=>(E.dynamicTypingFunction&&E.dynamicTyping[Je]===void 0&&(E.dynamicTyping[Je]=E.dynamicTypingFunction(Je)),(E.dynamicTyping[Je]||E.dynamicTyping)===!0))(ze)?je==="true"||je==="TRUE"||je!=="false"&&je!=="FALSE"&&((Je=>{if(pe.test(Je)&&(Je=parseFloat(Je),$<Je&&Je<b))return 1})(je)?parseFloat(je):V.test(je)?new Date(je):je===""?null:je):je)(ye=E.header?be>=X.length?"__parsed_extra":X[be]:ye,De=E.transform?E.transform(De,ye):De);ye==="__parsed_extra"?(ue[ye]=ue[ye]||[],ue[ye].push(De)):ue[ye]=De}return E.header&&(be>X.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+X.length+" fields but parsed "+be,Z+xe):be<X.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+X.length+" fields but parsed "+be,Z+xe)),ue}var Se;B&&(E.header||E.dynamicTyping||E.transform)&&(Se=1,!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(ae),Se=B.data.length):B.data=ae(B.data,0),E.header&&B.meta&&(B.meta.fields=X),Z+=Se)}function K(){return E.header&&X.length===0}function se(J,ae,Se,he){J={type:J,code:ae,message:Se},he!==void 0&&(J.row=he),B.errors.push(J)}M(E.step)&&(x=E.step,E.step=function(J){B=J,K()?me():(me(),B.data.length!==0&&(z+=J.data.length,E.preview&&z>E.preview?I.abort():(B.data=B.data[0],x(B,W))))}),this.parse=function(J,ae,Se){var he=E.quoteChar||'"',he=(E.newline||(E.newline=this.guessLineEndings(J,he)),C=!1,E.delimiter?M(E.delimiter)&&(E.delimiter=E.delimiter(J),B.meta.delimiter=E.delimiter):((he=((ge,xe,ue,be,ye)=>{var De,ze,je,Je;ye=ye||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var ft=0;ft<ye.length;ft++){for(var Et,Ve=ye[ft],Pe=0,ke=0,ve=0,Ee=(je=void 0,new Re({comments:be,delimiter:Ve,newline:xe,preview:10}).parse(ge)),dt=0;dt<Ee.data.length;dt++)ue&&ce(Ee.data[dt])?ve++:(Et=Ee.data[dt].length,ke+=Et,je===void 0?je=Et:0<Et&&(Pe+=Math.abs(Et-je),je=Et));0<Ee.data.length&&(ke/=Ee.data.length-ve),(ze===void 0||Pe<=ze)&&(Je===void 0||Je<ke)&&1.99<ke&&(ze=Pe,De=Ve,Je=ke)}return{successful:!!(E.delimiter=De),bestDelimiter:De}})(J,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=he.bestDelimiter:(C=!0,E.delimiter=p.DefaultDelimiter),B.meta.delimiter=E.delimiter),Ie(E));return E.preview&&E.header&&he.preview++,T=J,I=new Re(he),B=I.parse(T,ae,Se),me(),D?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return D},this.pause=function(){D=!0,I.abort(),T=M(E.chunk)?"":T.substring(I.getCharIndex())},this.resume=function(){W.streamer._halted?(D=!1,W.streamer.parseChunk(T,!0)):setTimeout(W.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,I.abort(),B.meta.aborted=!0,M(E.complete)&&E.complete(B),T=""},this.guessLineEndings=function(ge,he){ge=ge.substring(0,1048576);var he=new RegExp(re(he)+"([^]*?)"+re(he),"gm"),Se=(ge=ge.replace(he,"")).split("\r"),he=ge.split(`
`),ge=1<he.length&&he[0].length<Se[0].length;if(Se.length===1||ge)return`
`;for(var xe=0,ue=0;ue<Se.length;ue++)Se[ue][0]===`
`&&xe++;return xe>=Se.length/2?`\r
`:"\r"}}function re(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Re(E){var T=(E=E||{}).delimiter,I=E.newline,C=E.comments,x=E.step,b=E.preview,$=E.fastMode,pe=null,V=!1,W=E.quoteChar==null?'"':E.quoteChar,z=W;if(E.escapeChar!==void 0&&(z=E.escapeChar),(typeof T!="string"||-1<p.BAD_DELIMITERS.indexOf(T))&&(T=","),C===T)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<p.BAD_DELIMITERS.indexOf(C))&&(C=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var Z=0,D=!1;this.parse=function(U,X,B){if(typeof U!="string")throw new Error("Input must be a string");var ce=U.length,me=T.length,K=I.length,se=C.length,J=M(x),ae=[],Se=[],he=[],ge=Z=0;if(!U)return Pe();if($||$!==!1&&U.indexOf(W)===-1){for(var xe=U.split(I),ue=0;ue<xe.length;ue++){if(he=xe[ue],Z+=he.length,ue!==xe.length-1)Z+=I.length;else if(B)return Pe();if(!C||he.substring(0,se)!==C){if(J){if(ae=[],Je(he.split(T)),ke(),D)return Pe()}else Je(he.split(T));if(b&&b<=ue)return ae=ae.slice(0,b),Pe(!0)}}return Pe()}for(var be=U.indexOf(T,Z),ye=U.indexOf(I,Z),De=new RegExp(re(z)+re(W),"g"),ze=U.indexOf(W,Z);;)if(U[Z]===W)for(ze=Z,Z++;;){if((ze=U.indexOf(W,ze+1))===-1)return B||Se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ae.length,index:Z}),Et();if(ze===ce-1)return Et(U.substring(Z,ze).replace(De,W));if(W===z&&U[ze+1]===z)ze++;else if(W===z||ze===0||U[ze-1]!==z){be!==-1&&be<ze+1&&(be=U.indexOf(T,ze+1));var je=ft((ye=ye!==-1&&ye<ze+1?U.indexOf(I,ze+1):ye)===-1?be:Math.min(be,ye));if(U.substr(ze+1+je,me)===T){he.push(U.substring(Z,ze).replace(De,W)),U[Z=ze+1+je+me]!==W&&(ze=U.indexOf(W,Z)),be=U.indexOf(T,Z),ye=U.indexOf(I,Z);break}if(je=ft(ye),U.substring(ze+1+je,ze+1+je+K)===I){if(he.push(U.substring(Z,ze).replace(De,W)),Ve(ze+1+je+K),be=U.indexOf(T,Z),ze=U.indexOf(W,Z),J&&(ke(),D))return Pe();if(b&&ae.length>=b)return Pe(!0);break}Se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ae.length,index:Z}),ze++}}else if(C&&he.length===0&&U.substring(Z,Z+se)===C){if(ye===-1)return Pe();Z=ye+K,ye=U.indexOf(I,Z),be=U.indexOf(T,Z)}else if(be!==-1&&(be<ye||ye===-1))he.push(U.substring(Z,be)),Z=be+me,be=U.indexOf(T,Z);else{if(ye===-1)break;if(he.push(U.substring(Z,ye)),Ve(ye+K),J&&(ke(),D))return Pe();if(b&&ae.length>=b)return Pe(!0)}return Et();function Je(ve){ae.push(ve),ge=Z}function ft(ve){var Ee=0;return Ee=ve!==-1&&(ve=U.substring(ze+1,ve))&&ve.trim()===""?ve.length:Ee}function Et(ve){return B||(ve===void 0&&(ve=U.substring(Z)),he.push(ve),Z=ce,Je(he),J&&ke()),Pe()}function Ve(ve){Z=ve,Je(he),he=[],ye=U.indexOf(I,Z)}function Pe(ve){if(E.header&&!X&&ae.length&&!V){var Ee=ae[0],dt=Object.create(null),bt=new Set(Ee);let He=!1;for(let ct=0;ct<Ee.length;ct++){let Ke=Ee[ct];if(dt[Ke=M(E.transformHeader)?E.transformHeader(Ke,ct):Ke]){let Ct,xt=dt[Ke];for(;Ct=Ke+"_"+xt,xt++,bt.has(Ct););bt.add(Ct),Ee[ct]=Ct,dt[Ke]++,He=!0,(pe=pe===null?{}:pe)[Ct]=Ke}else dt[Ke]=1,Ee[ct]=Ke;bt.add(Ke)}He&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:ae,errors:Se,meta:{delimiter:T,linebreak:I,aborted:D,truncated:!!ve,cursor:ge+(X||0),renamedHeaders:pe}}}function ke(){x(Pe()),ae=[],Se=[]}},this.abort=function(){D=!0},this.getCharIndex=function(){return Z}}function Ne(E){var T=E.data,I=g[T.workerId],C=!1;if(T.error)I.userError(T.error,T.file);else if(T.results&&T.results.data){var x={abort:function(){C=!0,_e(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Fe,resume:Fe};if(M(I.userStep)){for(var b=0;b<T.results.data.length&&(I.userStep({data:T.results.data[b],errors:T.results.errors,meta:T.results.meta},x),!C);b++);delete T.results}else M(I.userChunk)&&(I.userChunk(T.results,x,T.file),delete T.results)}T.finished&&!C&&_e(T.workerId,T.results)}function _e(E,T){var I=g[E];M(I.userComplete)&&I.userComplete(T),I.terminate(),delete g[E]}function Fe(){throw new Error("Not implemented.")}function Ie(E){if(typeof E!="object"||E===null)return E;var T,I=Array.isArray(E)?[]:{};for(T in E)I[T]=Ie(E[T]);return I}function Ce(E,T){return function(){E.apply(T,arguments)}}function M(E){return typeof E=="function"}return p.parse=function(E,T){var I=(T=T||{}).dynamicTyping||!1;if(M(I)&&(T.dynamicTypingFunction=I,I={}),T.dynamicTyping=I,T.transform=!!M(T.transform)&&T.transform,!T.worker||!p.WORKERS_SUPPORTED)return I=null,p.NODE_STREAM_INPUT,typeof E=="string"?(E=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(E),I=new(T.download?N:Q)(T)):E.readable===!0&&M(E.read)&&M(E.on)?I=new te(T):(s.File&&E instanceof File||E instanceof Object)&&(I=new k(T)),I.stream(E);(I=(()=>{var C;return!!p.WORKERS_SUPPORTED&&(C=(()=>{var x=s.URL||s.webkitURL||null,b=n.toString();return p.BLOB_URL||(p.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",b,")();"],{type:"text/javascript"})))})(),(C=new s.Worker(C)).onmessage=Ne,C.id=y++,g[C.id]=C)})()).userStep=T.step,I.userChunk=T.chunk,I.userComplete=T.complete,I.userError=T.error,T.step=M(T.step),T.chunk=M(T.chunk),T.complete=M(T.complete),T.error=M(T.error),delete T.worker,I.postMessage({input:E,config:T,workerId:I.id})},p.unparse=function(E,T){var I=!1,C=!0,x=",",b=`\r
`,$='"',pe=$+$,V=!1,W=null,z=!1,Z=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||p.BAD_DELIMITERS.filter(function(X){return T.delimiter.indexOf(X)!==-1}).length||(x=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(I=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(V=T.skipEmptyLines),typeof T.newline=="string"&&(b=T.newline),typeof T.quoteChar=="string"&&($=T.quoteChar),typeof T.header=="boolean"&&(C=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");W=T.columns}T.escapeChar!==void 0&&(pe=T.escapeChar+$),T.escapeFormulae instanceof RegExp?z=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(re($),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return D(null,E,V);if(typeof E[0]=="object")return D(W||Object.keys(E[0]),E,V)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||W),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),D(E.fields||[],E.data||[],V);throw new Error("Unable to serialize unrecognized input");function D(X,B,ce){var me="",K=(typeof X=="string"&&(X=JSON.parse(X)),typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(X)&&0<X.length),se=!Array.isArray(B[0]);if(K&&C){for(var J=0;J<X.length;J++)0<J&&(me+=x),me+=U(X[J],J);0<B.length&&(me+=b)}for(var ae=0;ae<B.length;ae++){var Se=(K?X:B[ae]).length,he=!1,ge=K?Object.keys(B[ae]).length===0:B[ae].length===0;if(ce&&!K&&(he=ce==="greedy"?B[ae].join("").trim()==="":B[ae].length===1&&B[ae][0].length===0),ce==="greedy"&&K){for(var xe=[],ue=0;ue<Se;ue++){var be=se?X[ue]:ue;xe.push(B[ae][be])}he=xe.join("").trim()===""}if(!he){for(var ye=0;ye<Se;ye++){0<ye&&!ge&&(me+=x);var De=K&&se?X[ye]:ye;me+=U(B[ae][De],ye)}ae<B.length-1&&(!ce||0<Se&&!ge)&&(me+=b)}}return me}function U(X,B){var ce,me;return X==null?"":X.constructor===Date?JSON.stringify(X).slice(1,25):(me=!1,z&&typeof X=="string"&&z.test(X)&&(X="'"+X,me=!0),ce=X.toString().replace(Z,pe),(me=me||I===!0||typeof I=="function"&&I(X,B)||Array.isArray(I)&&I[B]||((K,se)=>{for(var J=0;J<se.length;J++)if(-1<K.indexOf(se[J]))return!0;return!1})(ce,p.BAD_DELIMITERS)||-1<ce.indexOf(x)||ce.charAt(0)===" "||ce.charAt(ce.length-1)===" ")?$+ce+$:ce)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!u&&!!s.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=Re,p.ParserHandle=fe,p.NetworkStreamer=N,p.FileStreamer=k,p.StringStreamer=Q,p.ReadableStreamStreamer=te,s.jQuery&&((l=s.jQuery).fn.parse=function(E){var T=E.config||{},I=[];return this.each(function(b){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)I.push({file:this.files[$],inputElem:this,instanceConfig:l.extend({},T)})}),C(),this;function C(){if(I.length===0)M(E.complete)&&E.complete();else{var b,$,pe,V,W=I[0];if(M(E.before)){var z=E.before(W.file,W.inputElem);if(typeof z=="object"){if(z.action==="abort")return b="AbortError",$=W.file,pe=W.inputElem,V=z.reason,void(M(E.error)&&E.error({name:b},$,pe,V));if(z.action==="skip")return void x();typeof z.config=="object"&&(W.instanceConfig=l.extend(W.instanceConfig,z.config))}else if(z==="skip")return void x()}var Z=W.instanceConfig.complete;W.instanceConfig.complete=function(D){M(Z)&&Z(D,W.file,W.inputElem),x()},p.parse(W.file,W.instanceConfig)}}function x(){I.splice(0,1),C()}}),f&&(s.onmessage=function(E){E=E.data,p.WORKER_ID===void 0&&E&&(p.WORKER_ID=E.workerId),typeof E.input=="string"?s.postMessage({workerId:p.WORKER_ID,results:p.parse(E.input,E.config),finished:!0}):(s.File&&E.input instanceof File||E.input instanceof Object)&&(E=p.parse(E.input,E.config))&&s.postMessage({workerId:p.WORKER_ID,results:E,finished:!0})}),(N.prototype=Object.create(A.prototype)).constructor=N,(k.prototype=Object.create(A.prototype)).constructor=k,(Q.prototype=Object.create(Q.prototype)).constructor=Q,(te.prototype=Object.create(A.prototype)).constructor=te,p})}(Dc)),Dc.exports}var dN=fN();const mN=FT(dN),gN=[{key:"apartmentId",label:"Wohnungs-ID (Pflichtfeld!)"},{key:"details.area",label:"Details: Flche (m)"},{key:"details.location",label:"Details: Lage"},{key:"details.persons",label:"Details: Personenanzahl"},{key:"details.houseNumber",label:"Details: Hausnummer"},{key:"details.stellplatz1",label:"Details: Stellplatz 1"},{key:"details.stellplatz2",label:"Details: Stellplatz 2"},{key:"details.stellplatz3",label:"Details: Stellplatz 3"},{key:"tenants.tenant1.name",label:"Mieter 1: Name"},{key:"tenants.tenant1.phone",label:"Mieter 1: Telefon"},{key:"tenants.tenant1.email",label:"Mieter 1: E-Mail"},{key:"tenants.tenant2.name",label:"Mieter 2: Name"},{key:"tenants.tenant2.phone",label:"Mieter 2: Telefon"},{key:"tenants.tenant2.email",label:"Mieter 2: E-Mail"},{key:"contract.contractDate",label:"Vertrag: Datum"},{key:"contract.moveInDate",label:"Vertrag: Einzug"},{key:"contract.terminationDate",label:"Vertrag: Gekndigt zum"},{key:"contract.contractEndDate",label:"Vertrag: Ende"},{key:"contract.kautionHoehe",label:"Kaution Hhe ()"},{key:"contract.kautionszahlungen",label:"Kautionszahlungen (JSON)"},{key:"rent.base",label:"Miete: Kaltmiete"},{key:"rent.utilities",label:"Miete: Nebenkosten"},{key:"rent.heating",label:"Miete: Heizkosten"},{key:"rent.parking",label:"Miete: Parkplatz"},{key:"payment.iban",label:"Zahlung: IBAN"},{key:"payment.directDebitMandateDate",label:"Zahlung: Datum Lastschrift"},{key:"payment.mandateReference",label:"Zahlung: Mandatsreferenz"},{key:"meterReadings.wasserzaehlerNrDigital",label:"Zhler: Wasser-Nr Digital"},{key:"meterReadings.wasserzaehlerStandDigital",label:"Zhler: Wasser-Stand Digital"},{key:"meterReadings.wasserzaehlerNrAnalog",label:"Zhler: Wasser-Nr Analog"},{key:"meterReadings.wasserzaehlerStandAnalog",label:"Zhler: Wasser-Stand Analog"},{key:"meterReadings.heizungNr",label:"Zhler: Heizung-Nr"},{key:"meterReadings.heizungStand",label:"Zhler: Heizung-Stand"},{key:"meterReadings.stromNr",label:"Zhler: Strom-Nr"},{key:"meterReadings.stromStand",label:"Zhler: Strom-Stand"},{key:"notes",label:"Notizen"}],pN={TRI:"Triftstrae",PAS:"Pasewalker Str.",RITA:"Rosenthaler Str."},yN=({db:r,userId:e,appId:n,onImportComplete:s})=>{const[l]=Xe.useState("AIzaSyDjQrJmmSRjnd47WeEMIm7qXQQde68LI4w"),[u]=Xe.useState("1bqt-gnTwS0_zk6jGA_phat_v1pxNtSHYblPJVNbgDGY"),[f,g]=Xe.useState([]),[y,p]=Xe.useState(""),[A,N]=Xe.useState([]),[k,Q]=Xe.useState([]),[te,fe]=Xe.useState({}),[re,Re]=Xe.useState(!1),[Ne,_e]=Xe.useState(""),[Fe,Ie]=Xe.useState(""),[Ce,M]=Xe.useState(""),[E,T]=Xe.useState(""),[I,C]=Xe.useState(!1),[x,b]=Xe.useState([]),$=async()=>{Ie(""),Re(!0),_e("Lade Tabellenbltter...");try{const se=await(await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${u}?key=${l}`)).json();if(se.error)throw new Error(se.error.message||"Unbekannter Fehler");g(se.sheets.map(J=>({title:J.properties.title}))),_e("Tabellenbltter geladen. Bitte whlen Sie eines aus.")}catch(K){Ie(`Fehler: ${K.message}.`)}finally{Re(!1)}},pe=()=>{if(!y)return;Re(!0),_e("Lade Daten aus Tabellenblatt..."),Ie("");const K=`https://docs.google.com/spreadsheets/d/${u}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(y)}`;mN.parse(K,{download:!0,header:!1,skipEmptyLines:!1,complete:se=>{const J=se.data;let ae=-1;for(let ye=0;ye<J.length;ye++)if(J[ye].filter(ze=>String(ze).trim()).length>=5){ae=ye;break}if(ae===-1){Ie("Keine Kopfzeile mit ausreichend Spalten gefunden!"),Re(!1);return}const Se=J[ae].map((ye,De)=>ye||`Spalte ${De+1}`);N(Se);let he=Ce;if(!he&&y){const ye=y.match(/\d{4}-\d{2}-\d{2}/);ye&&(he=ye[0])}let ge={0:"details.houseNumber",1:"details.location",2:"apartmentId",3:"tenants.tenant1.name",4:"tenants.tenant2.name",5:"details.area",6:"rent.base",8:"rent.utilities",9:"rent.heating",11:"details.stellplatz1",12:"details.stellplatz2",13:"details.stellplatz3",15:"details.persons",17:"tenants.tenant1.email",18:"tenants.tenant1.phone",19:"tenants.tenant2.email",20:"tenants.tenant2.phone",21:"contract.contractDate",22:"contract.moveInDate",23:"contract.kautionHoehe",24:"contract.kautionszahlungen",27:"meterReadings.wasserzaehlerNrAnalog",28:"meterReadings.wasserzaehlerStandAnalog",29:"meterReadings.wasserzaehlerNrDigital",30:"meterReadings.wasserzaehlerStandDigital",31:"meterReadings.heizungNr",32:"meterReadings.heizungStand",33:"meterReadings.stromNr",34:"meterReadings.stromStand"};he&&he<"2024-11-01"&&(ge={0:"details.houseNumber",1:"details.location",2:"apartmentId",3:"tenants.tenant1.name",4:"tenants.tenant2.name",5:"details.area",6:"rent.base",8:"rent.utilities",9:"rent.heating",11:"details.stellplatz1",12:"details.stellplatz2",14:"details.persons",16:"tenants.tenant1.email",17:"tenants.tenant1.phone",18:"tenants.tenant2.email",19:"tenants.tenant2.phone",20:"contract.contractDate",21:"contract.moveInDate",22:"contract.kautionHoehe",23:"contract.kautionszahlungen",26:"meterReadings.wasserzaehlerNrAnalog",27:"meterReadings.wasserzaehlerStandAnalog",28:"meterReadings.wasserzaehlerNrDigital",29:"meterReadings.wasserzaehlerStandDigital",30:"meterReadings.heizungNr",31:"meterReadings.heizungStand",32:"meterReadings.stromNr",33:"meterReadings.stromStand"}),fe(ge);const xe=J.slice(ae+1),ue=[];let be=!1;for(let ye=0;ye<xe.length;ye++){const De=xe[ye],ze=(De[0]||"").toString().trim().toUpperCase();if((ze==="P"||(De[1]||"").toString().trim().toLowerCase().includes("parkplatz"))&&(be=!0,console.log(`Debug: Parkplatz-Sektion gefunden bei Zeile ${ae+2+ye} (${ze==="P"?"Hausnummer=P":"Lage=Parkplatz"})`)),De.some(je=>String(je).trim())){const je=(De[1]||"").toString().trim().toLowerCase();if(je.includes("summe")||je.includes("gesamt")){console.log(`Debug: Summenzeile erkannt und bersprungen bei Zeile ${ae+2+ye}`);continue}if(ze==="P"||(De[1]||"").toString().trim().toLowerCase().includes("parkplatz"))console.log(`Debug: Parkplatz-Zeile hinzugefgt (${ze==="P"?"Hausnummer=P":"Lage=Parkplatz"})`),ue.push(De);else if(be)ze&&ue.push(De);else if(E==="TRI"&&!ze){console.log(`Debug: Potentielles Datenende bei leerer Hausnummer, Zeile ${ae+2+ye}`);let Je=!1;console.log(`Debug: Starte Vorausschau ab Index ${ye+1}, maximal bis ${xe.length-1} (insgesamt ${xe.length} Zeilen)`);for(let ft=ye+1;ft<xe.length;ft++){const Et=xe[ft],Ve=(Et[0]||"").toString().trim().toUpperCase(),Pe=(Et[1]||"").toString().trim(),ke=(Et[2]||"").toString().trim();if(console.log(`Debug: Prfe Zeile ${ae+2+ft}: Hausnummer="${Ve}", Lage="${Pe}", ApartmentId="${ke}"`),Pe.toLowerCase().includes("summe")||Pe.toLowerCase().includes("gesamt")){console.log("Debug: berspringe Summenzeile in Vorausschau");continue}if((Ve==="P"||Pe.toLowerCase().includes("parkplatz"))&&Et.some(ve=>String(ve).trim())){Je=!0,console.log(`Debug:  Parkplatz-Zeilen gefunden ab Zeile ${ae+2+ft} (${Ve==="P"?"Hausnummer=P":"Lage=Parkplatz"}), setze Verarbeitung fort`);break}}if(Je)console.log("Debug: Fge Zeile hinzu trotz leerer Hausnummer (Parkplatz-Daten folgen)"),ue.push(De);else{console.log("Debug: Keine weiteren Parkplatz-Zeilen gefunden, beende Verarbeitung");break}}else if((E==="PAS"||E==="RITA")&&!(De[2]||"").toString().trim()){console.log(`Debug: Datenende bei leerer apartmentId, Zeile ${ae+2+ye}`);break}else ue.push(De)}}console.log(`Debug: ${ue.length} Datenzeilen nach verbessertem Filter geladen`),Q(ue),_e(`${ue.length} Datenzeilen geladen (mit verbesserter End-of-Data-Erkennung). Bitte Spalten zuordnen.`),Re(!1)},error:se=>{Ie(`Fehler beim Verarbeiten der Sheet-Daten: ${se.message}`),console.error(se),Re(!1)}})},V=(K,se)=>{fe(J=>({...J,[K]:se}))};function W(K){const se=["Anna","Maria","Sabine","Petra","Julia","Laura","Lisa","Sophie","Claudia","Katrin","Monika","Susanne","Sandra","Nicole","Andrea","Christina","Stefanie","Nina","Sarah","Jessica","Katharina","Carina","Lena","Lea","Michaela","Vanessa","Carolin","Melanie","Jana","Tina","Birgit","Heike","Ute","Silke","Martina","Anja","Sonja","Daniela","Angela","Cornelia","Renate","Gabriele","Elisabeth","Theresa","Helga","Ingrid","Marina","Franziska","Johanna","Pauline","Luisa","Emilia","Clara","Helene","Charlotte","Emma","Mia","Hannah","Sofia","Lina","Leonie","Amelie","Marie","Emily","Ella","Anna-Lena","Annika"];return K&&se.some(J=>J.toLowerCase()===K.toLowerCase())?"Frau":"Herr"}function z(K){if(!K)return 0;let se=String(K).replace(/[^0-9,.-]/g,"");se=se.replace(/\.(?=\d{3}(,|$))/,""),se=se.replace(",",".");const J=parseFloat(se);return isNaN(J)?0:J}function Z(K){if(!K)return 0;let se=String(K).replace(/[^0-9,.,-]/g,"");se=se.replace(",",".");const J=parseFloat(se);return isNaN(J)?0:J}function D(K){if(/^\d{4}-\d{2}-\d{2}$/.test(K))return K;const se=K.match(/^(\d{2})\.(\d{2})\.(\d{4})$/);if(se){const[,J,ae,Se]=se;return`${Se}-${ae}-${J}`}return K}function U(K){if(!K||typeof K!="string")return[];console.log(`Debug: Parkplatz-Wert verarbeiten: "${K}"`);let se=K.toString().trim();const J=/[\s,;+]+/;let ae=se.split(J);ae=ae.map(he=>he.replace(/^P/i,"").trim()).filter(he=>he.length>0),console.log("Debug: Geteilte Parkplatz-Teile:",ae);const Se=ae.filter(he=>/^[0-9]+[a-zA-Z]*$/.test(he));return console.log("Debug: Gltige Parkplatz-IDs:",Se),Se}function X(K){if(!K||K.length===0)return!1;const se=(K[0]||"").toString().trim().toUpperCase(),J=(K[1]||"").toString().trim().toLowerCase(),ae=(K[2]||"").toString().trim();return!!((se==="P"||J.includes("parkplatz"))&&ae)}function B(K,se){const J=[];return Object.entries(se).filter(([Se,he])=>he&&he.startsWith("details.stellplatz")).map(([Se,he])=>parseInt(Se)).forEach(Se=>{const he=(K[Se]||"").toString().trim();if(he){const ge=U(he);J.push(...ge)}}),J}const ce=async()=>{const K=[];if(k.length===0){alert("Keine Daten zum Importieren vorhanden.");return}if(!E||!Ce){alert("Fehler: Objekt oder Datum konnten nicht aus dem Tabellenblattnamen extrahiert werden.");return}const se=D(Ce),J=new Date(se);if(isNaN(J.getTime())){alert(`Fehler: Das gewhlte Stichtagsdatum ('${Ce}') ist ungltig. Bitte im Format JJJJ-MM-TT oder TT.MM.JJJJ eingeben.`);return}Re(!0),_e(`Importiere ${k.length} Datenstze...`);const ae=Xv(r),Se=`propertyManagement/${n}/users/${e}/tenantRecords`,he=Xc(r,Se);if(k.forEach((ge,xe)=>{if(console.log(`Debug: Verarbeite Zeile ${xe+4}:`,ge),X(ge)){console.log(`Debug: Parkplatz-Zeile erkannt in Zeile ${xe+4}`);const Ve=(ge[2]||"").toString().trim(),Pe=U(Ve);if(Pe.length===0&&Ve){const ke=Ve.replace(/^P/i,"").trim();/^[0-9]+[a-zA-Z]*$/.test(ke)&&Pe.push(ke)}console.log("Debug: Verarbeite Parkplatz-IDs:",Pe),Pe.forEach(ke=>{console.log(`Debug: Erstelle Parkplatz-Datensatz fr ID: P${ke}`);let ve={details:{},tenants:{},contract:{},payment:{},rent:{},meterReadings:{},notes:""},Ee={};ge.forEach((He,ct)=>{const Ke=te[ct];Ke&&(Ee[Ke]=He??"")});for(const He in Ee){if(He==="apartmentId")continue;const ct=He.split(".");let Ke=ve;for(let tt=0;tt<ct.length-1;tt++)(typeof Ke[ct[tt]]!="object"||Ke[ct[tt]]===null)&&(Ke[ct[tt]]={}),Ke=Ke[ct[tt]];const Ct=ct[ct.length-1],xt=Ee[He];if(He==="tenants.tenant1.name"||He==="tenants.tenant2.name"){const tt=xt?xt.trim().split(/\s+/):[];let tn="",nn="";tt.length===2?(nn=tt[0],tn=tt[1]):tt.length>2?(nn=tt[0],tn=tt.slice(1).join(" ")):tt.length===1&&(tn=tt[0],nn="");const Un=W(tn.split(" ")[0]||"");Ke.name=xt,Ke.firstName=tn,Ke.lastName=nn,Ke.salutation=Un;continue}if(He.startsWith("rent.")||He==="contract.kautionHoehe"){Ke[Ct]=z(xt);continue}if(He.startsWith("contract.")&&He.toLowerCase().includes("date")){const tt=xt?new Date(xt):null;Ke[Ct]=tt&&!isNaN(tt.getTime())?tt.toISOString().slice(0,10):"";continue}Ke[Ct]=xt??""}ve.apartmentId=`P${ke}`,ve.details.stellplatz1=ke,ve.details.stellplatz2="",ve.details.stellplatz3="",ve.details.stellplatz4="",ve.notes=`Aufgeteilt aus kombinierter Parkplatz-ID "${Ve}" in Zeile ${xe+4}`,console.log("Debug: Parkplatz-Datensatz erstellt:",ve);const dt={propertyCode:E+"-P",apartmentId:ve.apartmentId,effectiveDate:pt.fromDate(J),createdAt:pt.now(),changeType:"Importiert (Parkplatz aufgeteilt)",data:ve},bt=_l(he);ae.set(bt,dt)});return}let ue={details:{},tenants:{},contract:{},payment:{},rent:{},meterReadings:{},notes:""},be={};if(ge.forEach((Ve,Pe)=>{const ke=te[Pe];ke&&(be[ke]=Ve??"")}),E==="PAS"){const Ve=be["details.location"]||"",Pe=be.apartmentId||"";Ve.toLowerCase().includes("rosenthaler")?(ue.apartmentId=Ve.slice(-3).trim(),ue.details.location=""):(ue.apartmentId=Pe,ue.details.location=Ve)}else ue.apartmentId=be.apartmentId,be["details.location"]&&(ue.details.location=be["details.location"]);for(const Ve in be){if(Ve==="apartmentId"||Ve==="details.location")continue;const Pe=Ve.split(".");let ke=ue;for(let He=0;He<Pe.length-1;He++)(typeof ke[Pe[He]]!="object"||ke[Pe[He]]===null)&&(ke[Pe[He]]={}),ke=ke[Pe[He]];const ve=Pe[Pe.length-1],Ee=be[Ve];if(Ve==="tenants.tenant1.name"||Ve==="tenants.tenant2.name"){const He=Ee?Ee.trim().split(/\s+/):[];let ct="",Ke="";He.length===2?(Ke=He[0],ct=He[1]):He.length>2?(Ke=He[0],ct=He.slice(1).join(" ")):He.length===1&&(ct=He[0],Ke="");const Ct=W(ct.split(" ")[0]||"");ke.name=Ee,ke.firstName=ct,ke.lastName=Ke,ke.salutation=Ct;continue}if(Ve==="details.area"){ke[ve]=Z(Ee);continue}if(Ve.startsWith("rent.")||Ve==="contract.kautionHoehe"){ke[ve]=z(Ee);continue}if(Ve==="contract.kautionszahlungen"){try{if(Ee&&Ee.trim().startsWith("["))ke[ve]=JSON.parse(Ee);else if(Ee&&Ee.trim()){const He=z(Ee);He>0?ke[ve]=[{betrag:He,datum:""}]:ke[ve]=[]}else ke[ve]=[]}catch{ke[ve]=[]}continue}if(Ve.startsWith("contract.")&&Ve.toLowerCase().includes("date")){const He=Ee?new Date(Ee):null;ke[ve]=He&&!isNaN(He.getTime())?He.toISOString().slice(0,10):"";continue}if(["meterReadings.wasserzaehlerNrDigital","meterReadings.wasserzaehlerNrAnalog","meterReadings.heizungNr","meterReadings.stromNr"].includes(Ve)){ke[ve]=Ee||"";continue}if(["meterReadings.wasserzaehlerStandDigital","meterReadings.wasserzaehlerStandAnalog","meterReadings.heizungStand","meterReadings.stromStand"].includes(Ve)){ke[ve]=z(Ee);continue}ke[ve]=Ee??""}const ye=be["details.houseNumber"]||"";let De=(ue.apartmentId||"").toString().trim();if(!De){console.log(`Debug: Leere apartmentId in Zeile ${xe+4}, suche in Stellplatz-Spalten...`);const Ve=B(ge,te);if(Ve.length>0)console.log("Debug: Gefundene Parkplatz-IDs in Spalten:",Ve),De=Ve[0];else{console.log(`Debug: berspringe Zeile ${xe+4} - keine apartmentId und keine Stellpltze gefunden`);return}}ye.trim().toUpperCase()==="P"&&!De.startsWith("P")&&(De="P"+De),ue.apartmentId=De,console.log(`Debug: Finale apartmentId fr Zeile ${xe+4}: "${De}"`);const ze=ue.apartmentId,je=vb[ze];je&&(ue.meterReadings.wasserzaehlerNrDigital||(ue.meterReadings.wasserzaehlerNrDigital=je.wasserzaehlerNrDigital||""),ue.meterReadings.wasserzaehlerNrAnalog||(ue.meterReadings.wasserzaehlerNrAnalog=je.wasserzaehlerNrAnalog||""),ue.meterReadings.heizungNr||(ue.meterReadings.heizungNr=je.heizungNr||""),ue.meterReadings.stromNr||(ue.meterReadings.stromNr=je.stromNr||""));const Je={propertyCode:E,apartmentId:ue.apartmentId,effectiveDate:pt.fromDate(J),createdAt:pt.now(),changeType:"Importiert",data:ue},ft=_l(he);ae.set(ft,Je),["details.stellplatz1","details.stellplatz2","details.stellplatz3"].forEach(Ve=>{const Pe=be[Ve];if(Pe&&Pe.toString().trim()!==""){console.log(`Debug: Verarbeite Stellplatz-Feld ${Ve} mit Wert: "${Pe}"`);const ke=U(Pe.toString());ke.forEach(ve=>{var He,ct,Ke,Ct,xt,tt,tn,nn,Un,li,ui,In,Nn,ci,En,hi,Ft,Fi,fi,ds,Rt,Pt,kt,Cn,Tr,ea,di;console.log(`Debug: Erstelle Parkplatz-Datensatz fr ID: P${ve} aus Feld ${Ve}`);const Ee={details:{stellplatz1:be["details.stellplatz1"]||"",stellplatz2:be["details.stellplatz2"]||"",stellplatz3:be["details.stellplatz3"]||"",stellplatz4:be["details.stellplatz4"]||""},tenants:{tenant1:{name:((ct=(He=ue.tenants)==null?void 0:He.tenant1)==null?void 0:ct.name)||"",firstName:((Ct=(Ke=ue.tenants)==null?void 0:Ke.tenant1)==null?void 0:Ct.firstName)||"",lastName:((tt=(xt=ue.tenants)==null?void 0:xt.tenant1)==null?void 0:tt.lastName)||"",salutation:((nn=(tn=ue.tenants)==null?void 0:tn.tenant1)==null?void 0:nn.salutation)||"",email:((li=(Un=ue.tenants)==null?void 0:Un.tenant1)==null?void 0:li.email)||"",phone:((In=(ui=ue.tenants)==null?void 0:ui.tenant1)==null?void 0:In.phone)||""}},contract:{contractDate:((Nn=ue.contract)==null?void 0:Nn.contractDate)||"",moveInDate:((ci=ue.contract)==null?void 0:ci.moveInDate)||"",terminationDate:((En=ue.contract)==null?void 0:En.terminationDate)||"",contractEndDate:((hi=ue.contract)==null?void 0:hi.contractEndDate)||""},payment:{iban:((Ft=ue.payment)==null?void 0:Ft.iban)||"",directDebitMandateDate:((Fi=ue.payment)==null?void 0:Fi.directDebitMandateDate)||"",mandateReference:((fi=ue.payment)==null?void 0:fi.mandateReference)||""},rent:{base:((ds=ue.rent)==null?void 0:ds.base)||0,utilities:((Rt=ue.rent)==null?void 0:Rt.utilities)||0,heating:((Pt=ue.rent)==null?void 0:Pt.heating)||0,parking:((kt=ue.rent)==null?void 0:kt.parking)||0,total:(((Cn=ue.rent)==null?void 0:Cn.base)||0)+(((Tr=ue.rent)==null?void 0:Tr.utilities)||0)+(((ea=ue.rent)==null?void 0:ea.heating)||0)+(((di=ue.rent)==null?void 0:di.parking)||0)},meterReadings:ue.meterReadings||{},notes:`Importiert aus Zeile ${xe+4}, zu Wohnung ${ue.apartmentId}${ke.length>1?`, aufgeteilt aus "${Pe}"`:""}`};Ee.apartmentId="P"+ve;const dt={propertyCode:E+"-P",apartmentId:Ee.apartmentId,effectiveDate:pt.fromDate(J),createdAt:pt.now(),changeType:ke.length>1?"Importiert (aufgeteilt)":"Importiert",data:Ee},bt=_l(he);ae.set(bt,dt)})}})}),K.length>0){b(K.map(ge=>({...ge}))),C(!0),Re(!1),_e("Es wurden fehlerhafte Zeilen gefunden. Bitte korrigieren.");return}try{await ae.commit();let ge=0,xe=0,ue=0;k.forEach(De=>{if(X(De)){const ze=(De[2]||"").toString().trim(),je=U(ze);ue+=je.length}else{ge++;const ze=["details.stellplatz1","details.stellplatz2","details.stellplatz3"];let je={};De.forEach((Je,ft)=>{const Et=te[ft];Et&&(je[Et]=Je??"")}),ze.forEach(Je=>{const ft=je[Je];if(ft&&ft.toString().trim()!==""){const Et=U(ft.toString());xe+=Et.length}})}});const be=xe+ue;let ye=`Import erfolgreich! ${ge} Wohnungen`;be>0&&(ye+=` und ${be} Parkpltze`,ue>0&&(ye+=` (${ue} davon aus kombinierten IDs aufgeteilt)`)),ye+=" wurden importiert.",_e(ye),alert(ye),s(Ce)}catch(ge){Ie("Fehler beim Schreiben in die Datenbank: "+ge.message)}finally{Re(!1)}K.length>0&&(b(K.map(ge=>({...ge}))),C(!0))},me=async()=>{C(!1),Re(!0);const K=Xv(r),se=`propertyManagement/${n}/users/${e}/tenantRecords`,J=Xc(r,se);let ae=0;for(const Se of x){let he={details:{},tenants:{},contract:{},payment:{},rent:{},meterReadings:{},notes:""};if(Object.entries(Se.originalMappedData).forEach(([ue,be])=>{ue==="apartmentId"&&(he.apartmentId=be),ue==="details.location"&&(he.details.location=be)}),!he.apartmentId)continue;const ge={propertyCode:E,apartmentId:he.apartmentId,effectiveDate:pt.fromDate(new Date(D(Ce))),createdAt:pt.now(),changeType:"Importiert (manuell korrigiert)",data:he},xe=_l(J);K.set(xe,ge),ae++}await K.commit(),Re(!1),_e(`${ae} korrigierte Datenstze wurden importiert.`),b([]),C(!1)};return Xe.useEffect(()=>{if(y){const K=y.match(/^\d{4}-\d{2}-\d{2}/);K&&M(K[0]);const se=y.match(/\b(TRI|PAS|RITA)\b$/i);se&&T(se[1].toUpperCase())}else M(""),T("")},[y]),R.jsxs("div",{className:"mb-10 p-6 sm:p-8 bg-gray-800 text-gray-200 rounded-xl shadow-2xl border border-gray-700",children:[R.jsxs("div",{className:"flex justify-between items-center border-b border-gray-600 pb-4 mb-6",children:[R.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Google Sheet Import"}),R.jsxs("div",{className:"flex gap-4",children:[R.jsx("button",{onClick:ce,disabled:re||k.length===0,className:"px-5 py-2 text-sm bg-emerald-700 hover:bg-emerald-600 text-white font-semibold rounded-lg disabled:bg-gray-500",children:re?"Importiere...":"Daten importieren"}),R.jsx("button",{onClick:()=>s(Ce||new Date().toISOString().split("T")[0]),className:"px-5 py-2 text-sm bg-rose-700 hover:bg-rose-600 text-white font-semibold rounded-lg",children:"Abbrechen"})]})]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[R.jsx("button",{onClick:$,disabled:re,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-700 w-full sm:w-auto",children:re?"Lade...":"1. Tabellenbltter laden"}),f.length>0&&R.jsxs("select",{value:y,onChange:K=>p(K.target.value),className:"block w-full p-2 border border-gray-600 bg-gray-700 rounded-md shadow-sm",children:[R.jsx("option",{value:"",children:"-- 2. Tabellenblatt auswhlen --"}),f.map(K=>R.jsx("option",{value:K.title,children:K.title},K.title))]}),y&&R.jsx("button",{onClick:pe,disabled:!y||re,className:"px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-gray-700 w-full sm:w-auto",children:"3. Daten fr Mapping laden"})]}),Fe&&R.jsx("p",{className:"text-red-400 text-sm mt-1",children:Fe}),y&&R.jsx("div",{className:"p-3 bg-gray-700 border border-gray-600 rounded-lg",children:R.jsxs("p",{className:"text-sm text-gray-300",children:["Erkannt aus dem Blattnamen:",R.jsx("span",{className:"font-bold text-blue-400 ml-2",children:pN[E]||"..."}),R.jsxs("span",{className:"font-bold text-blue-400 ml-2",children:["(",Ce||"Kein Datum erkannt",")"]})]})}),A.length>0&&k.length>0&&R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"mb-2",children:[R.jsx("label",{className:"block text-base font-medium text-gray-300 mb-1",children:"Stichtagsdatum fr Import"}),R.jsx("input",{type:"date",className:"bg-gray-800 border border-gray-600 rounded px-3 py-2 text-gray-200",value:Ce,onChange:K=>M(K.target.value)}),R.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Wird fr alle importierten Datenstze verwendet)"})]}),R.jsx("label",{className:"block text-base font-medium text-gray-300",children:"4. Spalten zuordnen"}),R.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:A.map((K,se)=>{if(!K.trim()&&k.every(ae=>!ae[se]))return null;const J=Object.entries(te).filter(([ae,Se])=>Se&&Number(ae)!==se).map(([ae,Se])=>Se);return R.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg border border-gray-600 flex items-center justify-between gap-6",children:[R.jsxs("div",{style:{width:"280px"},className:"flex-shrink-0",children:[R.jsx("p",{className:"font-bold text-blue-400 truncate",title:K||`Spalte ${se+1}`,children:K&&K.trim()?K:`Spalte ${se+1}`}),R.jsx("div",{className:"mt-1 text-xs text-gray-400 bg-gray-900 p-2 rounded border border-dashed border-gray-500 h-16 overflow-y-auto",children:k.slice(0,3).map((ae,Se)=>R.jsx("p",{className:"truncate",children:ae[se]||R.jsx("span",{className:"italic text-gray-500",children:"leer"})},Se))})]}),R.jsx("div",{style:{width:"280px"},className:"flex-shrink-0",children:R.jsxs("select",{value:te[se]||"",onChange:ae=>V(se,ae.target.value),className:"block w-full p-2 border border-gray-600 bg-gray-900 text-gray-200 rounded-md shadow-sm",children:[R.jsx("option",{value:"",children:"-- Nicht importieren --"}),gN.filter(ae=>!J.includes(ae.key)||te[se]===ae.key).map(ae=>R.jsx("option",{value:ae.key,children:ae.label},ae.key))]})})]},se)})})]}),Ne&&R.jsx("p",{className:"mt-2 text-sm font-medium",children:Ne}),R.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-600",children:[R.jsx("button",{onClick:ce,disabled:re||k.length===0,className:"px-8 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 disabled:bg-gray-700 disabled:cursor-not-allowed",children:re?"Importiere...":"Daten importieren"}),R.jsx("button",{onClick:()=>s(Ce||new Date().toISOString().split("T")[0]),className:"px-8 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700",children:"Abbrechen"})]})]}),I&&R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:R.jsxs("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-8 w-full max-w-2xl",children:[R.jsx("h3",{className:"text-lg font-bold text-red-400 mb-4",children:"Fehlerhafte Zeilen  bitte korrigieren"}),R.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:x.map((K,se)=>R.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded p-4 flex flex-col gap-2",children:[R.jsxs("div",{className:"text-xs text-gray-400",children:["Zeile im Sheet: ",K.rowIndex,"  Grund: ",K.reason]}),R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("label",{className:"text-sm",children:"Wohnungs-ID:"}),R.jsx("input",{type:"text",value:K.originalMappedData.apartmentId||"",onChange:J=>{const ae=[...x];ae[se].originalMappedData.apartmentId=J.target.value,b(ae)},className:"bg-gray-700 border border-gray-500 rounded px-2 py-1 text-gray-200"})]}),R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("label",{className:"text-sm",children:"Lage:"}),R.jsx("input",{type:"text",value:K.originalMappedData["details.location"]||"",onChange:J=>{const ae=[...x];ae[se].originalMappedData["details.location"]=J.target.value,b(ae)},className:"bg-gray-700 border border-gray-500 rounded px-2 py-1 text-gray-200"})]}),R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("label",{className:"text-sm",children:"Mieter 1 Name:"}),R.jsx("input",{type:"text",value:K.originalMappedData["tenants.tenant1.name"]||"",readOnly:!0,className:"bg-gray-700 border border-gray-500 rounded px-2 py-1 text-gray-400 cursor-not-allowed"})]}),R.jsxs("div",{className:"flex gap-2 items-center",children:[R.jsx("label",{className:"text-sm",children:"Kaltmiete:"}),R.jsx("input",{type:"text",value:K.originalMappedData["rent.base"]||"",readOnly:!0,className:"bg-gray-700 border border-gray-500 rounded px-2 py-1 text-gray-400 cursor-not-allowed"})]}),R.jsx("div",{className:"flex justify-end mt-2",children:R.jsx("button",{onClick:()=>{const J=x.filter((ae,Se)=>Se!==se);b(J)},className:"btn btn-danger text-xs",children:"Datensatz verwerfen"})})]},se))}),R.jsxs("div",{className:"flex gap-4 mt-6",children:[R.jsx("button",{onClick:me,className:"btn btn-success",children:"Korrigierte Zeilen importieren"}),R.jsx("button",{onClick:()=>C(!1),className:"btn btn-danger",children:"Abbrechen"})]})]})})]})},_N={apiKey:"AIzaSyDKCUfRQAldZXFjF6PT_qcInBewvHmnKFU",authDomain:"immobiliendaten-9ce02.firebaseapp.com",projectId:"immobiliendaten-9ce02",storageBucket:"immobiliendaten-9ce02.firebasestorage.app",messagingSenderId:"260402835458",appId:"1:260402835458:web:617a310f512c6779d2f71b"},vc={TRI:{name:"Triftstrae",hasHouseNumbers:!0},PAS:{name:"Pasewalker Str.",hasHouseNumbers:!1},RITA:{name:"Rosenthaler Str.",hasHouseNumbers:!1},"TRI-P":{name:"Parkpltze Triftstrae",hasHouseNumbers:!1}},vN=(r,e)=>r.sort((n,s)=>{if(e==="TRI"){const f=parseInt(n.data.details.houseNumber||"0"),g=parseInt(s.data.details.houseNumber||"0");if(f!==g)return f-g}const l=(n.data.details.location||"").replace("EG","0").replace("OG",""),u=(s.data.details.location||"").replace("EG","0").replace("OG","");return l.localeCompare(u)});function EN(){const[r,e]=Xe.useState(null),[n,s]=Xe.useState(null),[l,u]=Xe.useState(null),[f,g]=Xe.useState({}),[y,p]=Xe.useState(!0),[A,N]=Xe.useState(new Date().toISOString().split("T")[0]),[k,Q]=Xe.useState(!1),[te,fe]=Xe.useState(void 0),[re,Re]=Xe.useState(!1),[Ne,_e]=Xe.useState(!1);Xe.useEffect(()=>{const z=u0(_N);e(Uw(z)),s(U2(z))},[]),Xe.useEffect(()=>{if(r){const z=I1(r,Z=>{u(Z)});return()=>z()}},[r]);const Fe=Xe.useCallback(async()=>{if(!n||!l)return;p(!0);const z=`propertyManagement/${n.app.options.appId}/users/${l.uid}/tenantRecords`,Z=Xc(n,z),D=pt.fromDate(new Date(A)),U=Z2(Z,W2("effectiveDate","<=",D)),X=await rN(U),B=[];X.forEach(se=>{B.push({id:se.id,...se.data()})});const ce=new Map;for(const se of B){const J=`${se.propertyCode}-${se.apartmentId}`,ae=ce.get(J);(!ae||se.effectiveDate.toMillis()>ae.effectiveDate.toMillis())&&ce.set(J,se)}const me=Array.from(ce.values()),K={};for(const se of Object.keys(vc)){const J=me.filter(ae=>ae.propertyCode===se);K[se]=vN(J,se)}g(K),p(!1)},[n,l,A]);Xe.useEffect(()=>{l&&n&&Fe()},[l,n,A,Fe]);const Ie=async()=>{if(!r)return;const z=new mr;await Y1(r,z).catch(Z=>console.error(Z))},Ce=async()=>{r&&await N1(r)},M=()=>{fe(void 0),Re(!1),_e(!1),Q(!0)},E=z=>{fe(z),Re(!1),Q(!0)},T=z=>{fe(z),Re(!0),Q(!0)},I=z=>{N(z),_e(!1)},C=async z=>{if(!n||!l)return;const Z=ge=>{if(!ge)return 0;const xe=ge.replace(/\./g,"").replace(",",".");return parseFloat(xe)||0},D={area:Z(z.formArea),houseNumber:z.formHouseNumber||"",location:z.formPosition||"",persons:parseInt(z.formPersons)||0,stellplatz1:z.formStellplatz1||"",stellplatz2:z.formStellplatz2||"",stellplatz3:z.formStellplatz3||"",stellplatz4:z.formStellplatz4||""},U={tenant1:{name:`${z.tenant1Salutation} ${z.tenant1FirstName} ${z.tenant1LastName}`.trim(),phone:z.tenant1Phone||"",email:z.tenant1Email||""},tenant2:z.tenant2FirstName||z.tenant2LastName?{name:`${z.tenant2Salutation} ${z.tenant2FirstName} ${z.tenant2LastName}`.trim(),phone:z.tenant2Phone||"",email:z.tenant2Email||""}:void 0},X={contractDate:z.formContractDate||"",moveInDate:z.formMoveInDate||"",terminationDate:z.formTerminationDate||"",contractEndDate:z.formContractEndDate||"",kautionHoehe:Z(z.formKautionHoehe),kautionszahlungen:(z.formKautionszahlungen||[]).map(ge=>({betrag:Z(ge.betrag),datum:ge.datum||""}))},B={iban:z.formIban||"",directDebitMandateDate:z.formDirectDebitMandateDate||"",mandateReference:z.formMandateReference||""},ce={base:Z(z.formRentBase),utilities:Z(z.formRentUtilities),heating:Z(z.formRentHeating),parking:Z(z.formRentParking),total:Z(z.formRentBase)+Z(z.formRentUtilities)+Z(z.formRentHeating)+Z(z.formRentParking)},me={wasserzaehlerNrDigital:z.formWasserzaehlerNrDigital||"",wasserzaehlerStandDigital:Z(z.formWasserzaehlerStandDigital),wasserzaehlerNrAnalog:z.formWasserzaehlerNrAnalog||"",wasserzaehlerStandAnalog:Z(z.formWasserzaehlerStandAnalog),heizungNr:z.formHeizungNr||"",heizungStand:Z(z.formHeizungStand),stromNr:z.formStromNr||"",stromStand:Z(z.formStromStand)},K=z.formNotes||"",se={details:D,tenants:U,contract:X,payment:B,rent:ce,meterReadings:me,notes:K},J=`propertyManagement/${n.app.options.appId}/users/${l.uid}/tenantRecords`,ae=Xc(n,J),Se=z.formEffectiveDate?pt.fromDate(new Date(z.formEffectiveDate)):pt.now(),he={propertyCode:z.selectedProperty||"TRI",apartmentId:z.formApartmentId,effectiveDate:Se,data:se};await sN(ae,he),await Fe()},[x,b]=Xe.useState({}),$=(z,Z)=>{b(D=>{const U=D[z];return U&&U.key===Z?{...D,[z]:{key:Z,direction:U.direction==="asc"?"desc":"asc"}}:{...D,[z]:{key:Z,direction:"asc"}}})};function pe(z){if(!z)return"";const Z=z.trim().split(/\s+/);return Z.length===1?Z[0]:Z[Z.length-1]}function V(z,Z){var D,U,X;if(Z==="tenants.tenant1.name"){const B=((X=(U=(D=z==null?void 0:z.data)==null?void 0:D.tenants)==null?void 0:U.tenant1)==null?void 0:X.name)||"";return pe(B).toLowerCase()}return Z.split(".").reduce((B,ce)=>B&&B[ce],(z==null?void 0:z.data)??z)}const W=(z,Z)=>{const D=x[z];let U=[...Z];return D&&U.sort((X,B)=>{if(D.key==="apartmentId"){const K=ae=>{const Se=ae.match(/P(\d+)/i);if(Se)return parseInt(Se[1],10);const he=parseInt(ae.replace(/\D/g,""));return isNaN(he)?ae:he},se=K(X.apartmentId),J=K(B.apartmentId);return typeof se=="number"&&typeof J=="number"?D.direction==="asc"?se-J:J-se:D.direction==="asc"?String(se).localeCompare(String(J)):String(J).localeCompare(String(se))}const ce=V(X,D.key),me=V(B,D.key);return typeof ce=="number"&&typeof me=="number"?D.direction==="asc"?ce-me:me-ce:D.direction==="asc"?String(ce||"").localeCompare(String(me||"")):String(me||"").localeCompare(String(ce||""))}),U};return!r||!n?R.jsx("div",{className:"text-center p-10",children:"Dienste werden initialisiert..."}):l?R.jsxs("div",{className:"container mx-auto p-4 sm:p-6",children:[R.jsxs("header",{className:"mb-8 p-6 bg-gray-800 border border-gray-700 rounded-xl shadow-lg flex justify-between items-center",children:[R.jsx("h1",{className:"text-3xl font-bold text-white",children:"Immobilienverwaltung"}),R.jsxs("div",{children:[R.jsx("p",{className:"text-right text-gray-400",children:l.email}),R.jsx("button",{onClick:Ce,className:"text-sm text-blue-400 hover:underline font-semibold",children:"Abmelden"})]})]}),k?R.jsx(cN,{selectedProperty:"TRI",onCancel:()=>Q(!1),recordToUpdate:te,isTenantChangeMode:re,onSave:C}):Ne?R.jsx(yN,{db:n,userId:l.uid,appId:n.app.options.appId,onImportComplete:I}):R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"mb-6 p-6 bg-gray-800 border border-gray-700 rounded-xl shadow-lg",children:R.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"font-semibold text-gray-300 mr-2",children:"Datenstand vom:"}),R.jsx("input",{type:"date",value:A,onChange:z=>N(z.target.value),className:"p-2 border border-gray-600 bg-gray-700 text-white rounded-md shadow-sm"})]}),R.jsxs("div",{className:"flex gap-4",children:[R.jsx("button",{onClick:M,className:"btn btn-success",children:"Neuen Datensatz"}),R.jsx("button",{onClick:()=>_e(!0),className:"btn btn-special",children:"Daten importieren"})]})]})}),y?R.jsx("p",{className:"text-center p-10",children:"Lade Daten..."}):R.jsx("div",{className:"space-y-8",children:["TRI","TRI-P","PAS","RITA"].map(z=>f[z]&&R.jsxs("div",{className:"p-4 sm:p-6 bg-gray-800 border border-gray-700 rounded-xl shadow-lg",children:[R.jsx("h2",{className:"block-title",children:vc[z].name}),R.jsx("div",{className:"overflow-x-auto bg-gray-800 border border-gray-700 rounded-xl shadow-lg",children:R.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[R.jsx("thead",{className:"bg-gray-700",children:R.jsxs("tr",{children:[vc[z].hasHouseNumbers&&R.jsx("th",{className:"th-style cursor-pointer",onClick:()=>$(z,"details.houseNumber"),children:"Hausnr."}),R.jsx("th",{className:"th-style cursor-pointer",onClick:()=>$(z,"apartmentId"),children:"Wohnung"}),R.jsx("th",{className:"th-style cursor-pointer",onClick:()=>$(z,"details.location"),children:"Lage"}),R.jsx("th",{className:"th-style cursor-pointer",onClick:()=>$(z,"tenants.tenant1.name"),children:"Mieter 1"}),R.jsx("th",{className:"th-style cursor-pointer text-right",onClick:()=>$(z,"details.area"),children:"Flche"}),R.jsx("th",{className:"th-style cursor-pointer text-right",onClick:()=>$(z,"rent.total"),children:"Gesamtmiete"}),R.jsx("th",{className:"th-style cursor-pointer",onClick:()=>$(z,"details.stellplatz1"),children:"Stellpltze"}),R.jsx("th",{className:"th-style cursor-pointer text-right",onClick:()=>$(z,"contract.kautionszahlungen"),children:"Kaution"}),R.jsx("th",{className:"th-style text-center",children:"Aktionen"})]})}),R.jsx("tbody",{className:"divide-y divide-gray-700",children:W(z,f[z]).map(Z=>{var X,B,ce,me,K,se,J,ae,Se;const D=(B=(X=Z.data)==null?void 0:X.details)==null?void 0:B.area,U=(me=(ce=Z.data)==null?void 0:ce.rent)==null?void 0:me.total;return R.jsxs("tr",{className:"hover:bg-gray-700/50",children:[vc[z].hasHouseNumbers&&R.jsx("td",{className:"td-style",children:((K=Z.data.details)==null?void 0:K.houseNumber)||"-"}),R.jsx("td",{className:"td-style font-medium text-white",children:Z.apartmentId}),R.jsx("td",{className:"td-style text-gray-400",children:((se=Z.data.details)==null?void 0:se.location)||"-"}),R.jsx("td",{className:"td-style",children:(()=>{var be;const he=(be=Z.data.tenants)==null?void 0:be.tenant1;if(!he)return"N/A";const ge=(he.name||"").trim().split(/\s+/);let xe="",ue="";return ge.length===2?(xe=ge[0],ue=ge[1]):ge.length>2?(xe=ge.slice(0,-1).join(" "),ue=ge[ge.length-1]):ge.length===1&&(xe=ge[0],ue=""),`${xe} ${ue}`.trim()})()}),R.jsx("td",{className:"td-style text-right",children:typeof D=="number"?`${D.toFixed(2)} m`:"-"}),R.jsx("td",{className:"td-style text-right font-semibold",children:typeof U=="number"?`${U.toFixed(2)} `:"-"}),R.jsx("td",{className:"td-style text-gray-400",children:[(J=Z.data.details)==null?void 0:J.stellplatz1,(ae=Z.data.details)==null?void 0:ae.stellplatz2,(Se=Z.data.details)==null?void 0:Se.stellplatz3].filter(Boolean).join(", ")||"-"}),R.jsx("td",{className:"td-style text-right",children:(()=>{var ge;const he=(ge=Z.data.contract)==null?void 0:ge.kautionszahlungen;return Array.isArray(he)&&he.length>0?`${he.reduce((ue,be)=>typeof be=="object"&&be!==null?ue+(parseFloat(String(be.betrag))||0):typeof be=="number"||typeof be=="string"?ue+(parseFloat(be)||0):ue,0).toFixed(2)}  (${he.length} Rate${he.length>1?"n":""})`:"-"})()}),R.jsxs("td",{className:"td-style text-center space-x-2",children:[R.jsx("button",{onClick:()=>E(Z),className:"btn btn-edit",children:"Details"}),R.jsx("button",{onClick:()=>T(Z),className:"btn btn-primary",children:"Mieterwechsel"})]})]},Z.id)})})]})})]},z))})]})]}):R.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:R.jsxs("div",{className:"p-10 bg-gray-800 border border-gray-700 rounded-xl shadow-2xl text-center",children:[R.jsx("h1",{className:"text-2xl font-bold mb-4 text-white",children:"Bitte anmelden"}),R.jsx("button",{onClick:Ie,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Mit Google anmelden"})]})})}eS.createRoot(document.getElementById("root")).render(R.jsx(Xe.StrictMode,{children:R.jsx(EN,{})}));
